{"version":3,"file":"index.js","sources":["../../src/lib/services/config.ts","../../src/lib/services/api.ts","../../src/lib/services/services/workflow.ts","../../src/lib/services/services/remark.ts","../../src/lib/utils/time.ts","../../src/lib/utils/debug.ts","../../src/lib/utils/help.ts","../../src/lib/utils/parseQueryString.ts","../../src/lib/utils/matchColor.ts","../../src/lib/services/services/orgs.ts","../../src/lib/services/services/sign.ts","../../src/lib/services/services/approve-elements.ts","../../src/lib/services/services/task-center.ts","../../src/lib/models/fbpm-status.ts","../../src/lib/models/task-state.ts","../../src/lib/models/approve-flows.ts","../../src/lib/components/icon.tsx","../../src/lib/components/empty.tsx","../../src/lib/components/checklist.vue","../../src/lib/components/list.tsx","../../src/lib/components/search.tsx","../../src/lib/workflow-approve/select-users.tsx","../../src/lib/components/sep.tsx","../../src/lib/workflow-approve/message.tsx","../../src/lib/workflow-approve/elements.tsx","../../src/lib/workflow-approve/confirm.tsx","../../src/lib/workflow-approve/index.tsx","../../src/lib/workflow-reject/index.tsx","../../src/lib/components/steps.tsx","../../src/lib/workflow-trace/workflow-trace-full/index.tsx","../../src/lib/workflow-trace/workflow-trace-list/index.tsx","../../src/lib/task-center/bus.tsx","../../src/lib/task-center/done-container.tsx","../../src/lib/workflow-batch-approve/index.tsx","../../src/lib/workflow-delegate/index.tsx","../../src/lib/workflow-func.tsx","../../src/lib/validator.ts","../../src/lib/index.ts","../../src/lib/task-center/todo-container.tsx","../../src/lib/task-center/nav.tsx","../../src/lib/task-center/header.tsx","../../src/lib/task-center/index.tsx","../../src/lib/index.ts"],"sourcesContent":["const address = {\n    modeler_base: '',\n    flow_process_base: ''\n}\n\nfunction getModelerBase() {\n    console.log('getModelerBase', address.modeler_base);\n    return address.modeler_base;\n}\n\nfunction getFlowCenterBase() {\n    return address.flow_process_base;\n}\n\nclass Config {\n    _userCode: string = '';\n    _authToken: string = '';\n    _debug: boolean = false;\n    // 应用编辑\n    _appCode: string = '';\n    _rgCode: string = '';\n    _data: any = {};\n    get userCode() {\n        return this._userCode;\n    }\n\n    get appCode() {\n        return this._appCode;\n    }\n\n    get rgCode() {\n        return this._rgCode;\n    }\n\n    get authToken() {\n        return this._authToken;\n    }\n\n    get debug() {\n        return this._debug;\n    }\n\n\n    /**\n     * 组件全局配置\n     */\n    WORKFLOW_GLOBAL_CONFIG_URL() {\n        return getModelerBase() + `/config/components.json`;\n    }\n\n    // 判断流程是否启动\n    WORKFLOW_IS_STARTED_URL(businessKey: string) {\n        return getFlowCenterBase() + `/api/runtime/process-isstart/${businessKey}`;\n    }\n\n    WORKFLOW_IS_ENDED_URL(businessKey: string) {\n        return getFlowCenterBase() + `/api/runtime/process-isend-new/${businessKey}`;\n    }\n\n    get WORKFLOW_START_URL() {\n        return getFlowCenterBase() + \"/api/runtime/fbpm-process-instances\";\n    }\n\n    get WORKFLOW_SUSPEND_URL() {\n        return getFlowCenterBase() + \"/api/runtime/fbpm-process-instances/suspend\";\n    }\n\n    get WORKFLOW_RESUME_URL() {\n        return getFlowCenterBase() + \"/api/runtime/fbpm-process-instances/active\";\n    }\n\n    get WORKFLOW_TASKS_URL() {\n        return getFlowCenterBase() + \"/api/runtime/fbpm-user-task/taskList\";\n    }\n\n    get NODE_INFO_URL() {\n        return getModelerBase() + \"/api/flowNode/getNodeInfo\";\n    }\n    get NODE_STEPS_URL() {\n        return getModelerBase() + \"/api/flowNode/getNextNodes\";\n    }\n\n    get NODE_CANCEL_START_URL() {\n        return getFlowCenterBase() + \"/api/cancelTask/getCancelStartNodes\";\n    }\n\n    get NODE_TYPES_URL() {\n        return getModelerBase() + \"/api/identity/identityTypeNew\";\n    }\n\n    get NODE_CATALOG_URL() {\n        return getModelerBase() + \"/api/identity/identityType/listNew\";\n    }\n\n    APPROVE_BY_TASKID_URL(taskId: string) {\n        return getFlowCenterBase() + `/api/runtime/fbpm-approve-tasks-new/${taskId}`;\n    }\n\n    APPROVE_BY_BUSSINESSKEY_URL(businessKey: string) {\n        return getFlowCenterBase() + `/api/runtime/fbpm-approve-tasks-form-new/${businessKey}`;\n    }\n\n    get NODE_USER_LIST_URL() {\n        return getModelerBase() + \"/api/identity/identityListNew\";\n    }\n\n    get NODE_BACK_NODE_INFO_URL() {\n        return getFlowCenterBase() + \"/api/back/getBackToNodeInfo\";\n    }\n\n    get NODE_BACK_NODE_LIST_URL() {\n        return getFlowCenterBase() + \"/api/back/getBackToAnyNodeInfos\";\n    };\n\n    // 是否可撤销\n    get NODE_CAN_REVOKE_URL() {\n        return getFlowCenterBase() + \"/api/cancelTask/isPermitCancelTask\";\n    }\n    // 是否可撤销BusinessKey\n    get NODE_CAN_REVOKE_BUSINESSKEY_URL() {\n        return getFlowCenterBase() + \"/api/cancelTask/isPermitCancelTaskByBusinessKeyAndTaskId\";\n    }\n\n    // 是否可驳回\n    // get NODE_CAN_BACK_URL() {\n    //     return getFlowCenterBase() + \"/api/back/isPermitBackTaskByBusinessKey\";\n    // }\n\n    // 批语列表\n    get WORKFLOW_REMARK_LIST_URL() {\n        return getFlowCenterBase() + \"/api/runtime/comlang\";\n    }\n\n    // 保存批语\n    WORKFLOW_REMARK_SAVE_URL() {\n        return getFlowCenterBase() + `/api/runtime/comlang/save`;\n    }\n\n    // 检查批语是否重复\n    WORKFLOW_IS_REMARK_DUP_URL() {\n        return getFlowCenterBase() + `/api/runtime/comlang/querycomlang`;\n    }\n\n    // 删除批语\n    WORKFLOW_REMARK_DELETE_URL(id: string) {\n        return getFlowCenterBase() + `/api/runtime/comlang/delete/${id}`;\n    }\n\n    // 星标批语\n    WORKFLOW_REMARK_STAR_URL() {\n        return getFlowCenterBase() + `/api/runtime/comlang/setstar`;\n    }\n\n    // 驳回url\n    // getNodeBackActionUrl(businessKey: string) {\n    //     return getFlowCenterBase() + `/api/runtime/fbpm-tasks-businesskey-back/${businessKey}`;\n    // }\n    getNodeBackActionUrl(taskId: string) {\n        return getFlowCenterBase() + `/api/runtime/fbpm-tasks-back-taskId/${taskId}`;\n    }\n\n    // 撤销url\n    getNodeCancelActionWithBusinessKeyUrl(businessKey: string) {\n        return getFlowCenterBase() + `/api/runtime/fbpm-tasks-businesskey-cancel/${businessKey}`;\n    }\n\n    getNodeCancelActionUrl(procInstId: string) {\n        return getFlowCenterBase() + `/api/runtime/fbpm-tasks-cancel/${procInstId}`;\n    }\n\n    /**\n     *  获取流程首节点信息\n     */\n    getFirstNodeInfoUrl() {\n        return getFlowCenterBase() + `/api/runtime/proc-node/getFirstNodesByBizRgUnitCode`;\n    }\n\n    // 流程跟踪：workflow-trace-simple接口\n    getNodeTraceSimpleUrl(procInstId: string) {\n        return getFlowCenterBase() + `/api/query/track-tasks-new/${procInstId}`;\n    }\n\n    // 流程跟踪：workflow-trace-full接口\n    getNodeTraceFullUrl(procInstId: string) {\n        return getFlowCenterBase() + `/api/query/track-all-tasks/${procInstId}`;\n    }\n\n    // 流程跟踪：workflow-trace-form接口\n    getNodeTraceFormUrl() {\n        return getFlowCenterBase() + `/api/query/track-tasks/bills`;\n    }\n\n    // 流程跟踪：workflow-trace-list接口\n    getNodeTraceListUrl(procInstId: string) {\n        return getFlowCenterBase() + `/api/query/track-tasks-list/${procInstId}`;\n    }\n\n    // 流程跟踪：workflow-trace-flowchart\n    getNodeTraceFlowchartUrl(procInstId: string) {\n        return getFlowCenterBase() + `/api/query/track-tasks-vector/${procInstId}`;\n    }\n\n    // 用户信息url\n    WORKFLOW_USER_INFO_URL() {\n        return getFlowCenterBase() + \"/api/identity/userinfo\";\n    }\n\n\n    /**\n     * 获取流程信息及当前NodeId\n     * @param businessKey \n     */\n    WORKFLOW_INFO(businessKey: string) {\n        return getFlowCenterBase() + `/api/runtime/processQueryBybusinessKey/${businessKey}`;\n    }\n\n\n    /**\n     * 获取工作流image url\n     * @param procDefId \n     */\n    WORKFLOW_INFO_IMAGE_URL(procDefId: string) {\n        return getModelerBase() + `/showImage?procDefId=${procDefId}`;\n    }\n\n\n    WORKFLOW_USER_INFO_LIST_URL() {\n        return getModelerBase() + `/api/identity/userinfo`;\n    }\n\n    // 激活流程url\n    WORKFLOW_ACTIVATE_URL(businessKey: string) {\n        return getFlowCenterBase() + `/api/runtime/fbpm-process-instances/reactive/${businessKey}`;\n    }\n\n\n    /**\n     * 获取工作流单位树url\n     */\n    WORKFLOW_UNITS_URL() {\n        return getModelerBase() + `/api/identity/flowUnitTreeNew`;\n    }\n\n    /**\n     * 获取部门树url\n     */\n    WORKFLOW_DEPTS_URL() {\n        return getModelerBase() + `/api/identity/flowDeptTreeNew`;\n    }\n\n    /**\n     * 获取部门下用户url\n     */\n    WORKFLOW_DEPT_USERS_URL() {\n        return getModelerBase() + `/api/identity/identityList`;\n    }\n\n\n    /**\n     * 保存签章\n     */\n    SIGN_SAVE_URL() {\n        return getFlowCenterBase() + `/signature/save`;\n    }\n\n    /**\n     * 获取签章数据 \n     */\n    SIGN_QUERY_URL(procInstId: string) {\n        return getFlowCenterBase() + `/signature/query/${procInstId}`;\n    }\n\n    /**\n     * 获取审批要点列表\n     * @param procInstId \n     */\n    APPROVE_ELEMENTS_QUERY_URL(procInstId: string) {\n        return getFlowCenterBase() + `/api/runtime/element/query/${procInstId}`;\n    }\n\n    /**\n     * 批量送审url\n     * @param tasids \n     */\n    WORKFLOW_BATCH_APPROVE_URL(tasids: string) {\n        return getFlowCenterBase() + `/api/runtime/approve-batch-tasks/${tasids}`;\n    }\n\n\n    /**\n     * 是否支持直接送审\n     * @param taskId \n     */\n    WORKFLOW_IS_DIRECT_APPROVE_URL(taskId: string) {\n        return getFlowCenterBase() + `/api/runtime/fbpm-task-isback/${taskId}`;\n    }\n\n    /**\n     * 根据taskId直接送审\n     * @param taskId \n     */\n    WORKFLOW_DIRECT_APPROVE_TASKID_URL(taskId: string) {\n        return getFlowCenterBase() + `/api/runtime/fbpm-tasks-directsubmit-taskId/${taskId}`;\n    }\n\n\n    /**\n     * 根据businessKey直接送审\n     */\n    WORKFLOW_DIRECT_APPROVE_BUSINESSKEY_URL(businessKey: string) {\n        return getFlowCenterBase() + `/api/runtime/fbpm-tasks-directsubmit-businesskey/${businessKey}`;\n    }\n\n    public setBaseAddress(flowModelerBaseUrl: string, flowProcessBaseUrl: string) {\n        console.log('setBaseAddress', flowModelerBaseUrl, flowProcessBaseUrl);\n        address.flow_process_base = flowProcessBaseUrl;\n        address.modeler_base = flowModelerBaseUrl;\n    }\n\n    /**\n     * 设置UserCode\n     * @param code \n     */\n    public setUserCode(code: string) {\n        this._userCode = code;\n    }\n\n    /**\n     * 调协应用Code\n     * @param code \n     */\n    public setAppCode(code: string) {\n        this._appCode = code;\n    }\n\n    /**\n     * 区划code\n     */\n    public setRegionCode(code: string) {\n        this._rgCode = code;\n    }\n\n    public setAuthToken(token: string) {\n        this._authToken = token;\n    }\n\n    public setDebug(debug: boolean) {\n        this._debug = debug;\n    }\n\n    \n    /**\n     * 获取配置数据\n     */\n    public getData(key: string): any {\n        let keys = key.split(\".\");\n        let data = this._data;\n        for(let k of keys) {\n            if(data[k]) {\n                data = data[k];\n            } else {\n                return undefined;\n            }\n        }\n        return data;\n    }\n\n    public setData(data: any) {\n        this._data = data;\n    }\n\n    /**\n     * 配置管理(后期调整到数据中)\n     */\n    WORKFLOW_ADMIN_CONFIG_URL() {\n        return getModelerBase() + `/api/proc/config/readFile/admin-config`;\n    }\n\n    // 获取委托人code\n    WORKFLOW_USER_DELEGATE_URL() {\n        return getFlowCenterBase() + `/api/query/track-tasks-taskdelegate`;\n    }\n\n    /**\n     * 任务中心\n     */\n\n     // 获取待办任务列表\n     TASK_TODO_LIST_URL () {\n         return getFlowCenterBase() + '/center/task/app/todo'\n     }\n     // 获取已办任务列表\n     TASK_DONE_LIST_URL () {\n        return getFlowCenterBase() + '/center/task/app/done'\n    }\n\n    // 获取任务变量\n    TASK_CENTER_VARIABLES_REQUEST () {\n        return getFlowCenterBase() + '/api/runtime/task/variables'\n    }\n};\n\nexport default new Config();","\nimport axios from 'axios';\nimport config from './config';\n\nclass Api {\n\n    private _beforeRequest = () => { };\n    public onBeforeRequest(cb: any) {\n        this._beforeRequest = cb;\n    }\n\n    private _afterRequest = () => { };\n    public onAfterRequest(cb: any) {\n        this._afterRequest = cb;\n    }\n\n    private _onError = (url:string, e:any) => { \n        return false;\n    };\n    public onError(cb: any) {\n        this._onError = cb;\n    }\n\n    // public get_old(url: string, data: any) {\n    //     console.log('get', url);\n    //     if(config.authToken) {\n    //         axios.defaults.headers.common['Authorization'] = config.authToken;\n    //     }\n\n    //     return axios.get(url, {\n    //         params: { ...data, userCode: config.userCode }\n    //     })\n    //     .then(resp => {\n    //         this._afterRequest();\n    //         if(resp.data.code) {\n    //             if(resp.data.code == 200) {\n    //                 return resp.data.data;\n    //             } else {\n    //                 throw resp.data;\n    //             }\n    //         }\n\n    //         return resp.data;\n            \n    //     })\n    //     .catch(err => {\n    //         this._onError(url, err);\n    //         throw err;\n    //     });\n    // }\n\n    public delete(url: string) {\n        this._beforeRequest();\n\n        if(config.authToken) {\n            axios.defaults.headers.common['Authorization'] = config.authToken;\n        }\n\n        axios.defaults.headers.post['Content-Type'] = 'application/json';\n        return axios.delete(url)\n        .then(resp => {\n            if(resp.data.code == 100200 || resp.data.code == 100201) {\n                return resp.data.data;\n            } else {\n                throw resp.data;\n            }\n            this._afterRequest();\n        })\n        .catch(err => {\n            if(this._onError) {\n                this._onError(url, err);\n            }\n            throw err;\n        });\n    }\n\n    public post(url: string, data: any = {}, json: boolean = true) {\n        this._beforeRequest();\n\n        if(config.authToken) {\n            axios.defaults.headers.common['Authorization'] = config.authToken;\n        }\n\n        axios.defaults.headers.post['Content-Type'] = 'application/json';\n        return axios.post(url, { ...data })\n        .then(resp => {\n            this._afterRequest();\n\n            if(resp.data.code == 100200 || resp.data.code == 100201) {\n                return resp.data.data;\n            } else {\n                throw resp.data;\n            }\n            //return resp.data;\n\n            // if(!resp.ok) {\n            //     throw new Error(resp.status + \":\" + resp.statusText)\n            // }\n            // if(json) return resp.json();\n            // return resp;\n        })\n        .catch(err => {\n            if(this._onError) {\n                this._onError(url, err);\n            }\n            throw err;\n        });\n        // return fetch(url, {\n        //     method: \"post\",\n        //     headers: {\n        //         Accept: \"application/json\",\n        //         \"Content-Type\": 'application/json'\n        //     },\n        //     body: JSON.stringify({ userCode: config.userCode, ...data })\n        // })\n        //     .then(resp => {\n        //         this._afterRequest();\n        //         console.log('resp', resp);\n        //         if(!resp.ok) {\n        //             throw new Error(resp.status + \":\" + resp.statusText)\n        //         }\n        //         if(json) return resp.json();\n        //         return resp;\n        //     })\n        //     .catch(err => {\n        //         console.log('error', err);\n        //         this.onError(err);\n        //         throw err;\n        //     });\n    }\n\n\n    public get(url: string, data: any, throwWhenError: boolean = true) {\n\n        if (config.authToken) {\n            axios.defaults.headers.common['Authorization'] = config.authToken;\n        }\n\n        return axios.get(url, {\n            params: { ...data }\n        })\n            .then(resp => {\n                this._afterRequest();\n                // resp.data.status 处理平台适配层的接口规范\n                if (resp.data.code == 100200 || resp.data.code == 200 || resp.data.code == 100201 || resp.data.status === 'success') {\n                    return resp.data.data;\n                } else {\n                    throw resp.data;\n                }\n            })\n            .catch(err => {\n\n                if (throwWhenError && this._onError) {\n                    this._onError(url, err);\n                }\n\n                throw err;\n            });\n    }\n\n    public getJson(url:string, data: any, throwWhenError:boolean = true) {\n\n        if(config.authToken) {\n            axios.defaults.headers.common['Authorization'] = config.authToken;\n        }\n\n        return axios.get(url, {\n            params: { ...data }\n        })\n        .then(resp => {\n            this._afterRequest();\n            return resp.data;\n        })\n        .catch(err => {\n            \n            if(throwWhenError && this._onError) {\n                this._onError(url, err);\n            }\n            \n            throw err;\n        });\n    }\n\n    public getOld(url: string, data: any, throwWhenError: boolean = true) {\n\n        return axios.get(url, {\n            params: { ...data }\n        })\n            .then(resp => {\n                this._afterRequest();\n                return resp.data;\n            })\n            .catch(err => {\n                if (throwWhenError && this._onError) {\n                    this._onError(url, err);\n                }\n\n                throw err;\n            });\n    }\n\n}\n\n\nexport default new Api();","\nimport api from '../api';\nimport config from '../config';\nimport { WorkflowInfo, NodeInfo } from '../../models';\n\n/**\n * 判断流程是否启动\n * @param businessKey 单据id\n */\nexport function isWorkflowStarted(businessKey: string) {\n    return api.get(config.WORKFLOW_IS_STARTED_URL(businessKey), {})\n}\n\n/**\n * 判断流程是否结束\n * @param businessKey \n */\nexport function isWorkflowEnded(businessKey: string) {\n    return api.get(config.WORKFLOW_IS_ENDED_URL(businessKey), {})\n}\n\n/**\n * 获取流程信息\n * @param businessKey \n */\nexport function getWorkflowInfo(businessKey: string): Promise<WorkflowInfo> {\n    return api.get(config.WORKFLOW_INFO(businessKey), { userCode: config.userCode })\n}\n\n/**\n * 启动流程\n * @param req \n *  userCode ：流程发起人（必须项）\n    processDefinitionId：流程定义Id（可选项）\n    processDefinitionKey：流程定义key（可选项）\n    message：消息（可选项）\n    bizTypeCode：单据类型code\n    rgCode：区划code （必须项）\n    unitCode：单位code\n    businessKey：业务Id（必须项）\n */\nexport function startWorkflow(req: any) {\n    return api.post(config.WORKFLOW_START_URL, req, false);\n}\n\n\n/**\n * 挂起流程\n * @param businessKey \n */\nexport function suspendWorkflow(businessKey: string) {\n    return api.post(`${config.WORKFLOW_SUSPEND_URL}/${businessKey}`, {}, false);\n}\n\n/**\n * 恢复流程\n * @param businessKey \n */\nexport function resumeWorkflow(businessKey: string) {\n    return api.post(`${config.WORKFLOW_RESUME_URL}/${businessKey}`, {}, false);\n}\n\n/**\n * 获取节点属性\n * url: localhost:8082/fbpm-modeler/api/flowNode/getNodeInfo\n   请求方式：GET\n   请求参数： procDefId(流程定义Id)  nodeId(节点Id)\n   响应:\n   {\n     \"code\":200,\n\t \"data\":{\n\t   \"procDefId\":\"\",\n\t   \"nodeId\":\"\",\n\t   \"nodeName\":\"\",\n\t   \"isMultiinstance\":\"\",\n\t   \"isPreemptMode\":\"\", //1：抢占   0：非抢占\n\t   \"isCheckUsers\":\"\", //1：指派  0:非指派\n\t   \"isReject\":\"\"      //1：设置驳回  0:无\n\t }\n   }\n */\nexport function getNodeInfo(req: any) {\n    return api.get(config.NODE_INFO_URL, req);\n}\n\n/**\n * 获取流程首节点info\n * @param req \n *  bizTypeCode\n *  rgCode\n *  unitCode\n *  userCode\n *  variables\n * @returns\n *  NodeInfo\n */\nexport function getFirstNodeInfo(req: any): Promise<NodeInfo> {\n    return api.post(config.getFirstNodeInfoUrl(), req);\n}\n\n/**\n * 获取当前节点的下一节点列表\n * @param req \n */\nexport function getNodeNextSteps(req: any) {\n    return api.get(config.NODE_STEPS_URL, req);\n}\n\n/**\n * 执行撤销操作时，返回撤销操作的源节点\n * @param req \n*  procDefId(流程定义Id)\n*  nodeId(执行撤销操作的节点Id)\n*  procInstId(流程实例Id)\n*/\nexport function getNodeCancelStartNodes(req: any) {\n    return api.get(config.NODE_CANCEL_START_URL, req);\n}\n\n/**\n * 获取参与人类型\n * @param req \n */\nexport function getNodeParticipantTypes(req: any) {\n    return api.get(config.NODE_TYPES_URL, req);\n}\n\n/**\n * 根据参与人类型获取树状目录\n * @param req \n */\nexport function getParticipantCatalog(req: any) {\n    return api.post(config.NODE_CATALOG_URL, { ...req, userCode: config.userCode });\n}\n\n/**\n * 获取参与人分页列表\n * @param req \n */\nexport function getParticipantList(req: any) {\n    return api.get(config.NODE_USER_LIST_URL, req);\n}\n\n\n/**\n * 获取简版流程图数据\n * @param req \n */\nexport function getWorkflowTraceSimpleData(req: any) {\n    return api.get(config.getNodeTraceSimpleUrl(req.procInstId), {});\n}\n\n/**\n * 获取全流程跟踪数据\n * @param req \n */\nexport async function getWorkflowTraceFullData(req: any) {\n    //return import('./data/trace-data.json').then( data => data.default.data);\n    return api.post(config.getNodeTraceFullUrl(req.procInstId), { variables: req.variables });\n}\n\n/**\n * 获取表单流和跟踪数据\n * @param req \n *        businessKeys\n */\nexport async function getWorkflowTraceFormData(req: any) {\n    return api.get(config.getNodeTraceFormUrl(), req);\n}\n\n/**\n * 获取流程审批列表\n * @param req \n *      procInstId\n *      sort\n */\nexport async function getWorkflowTraceListData(req: any) {\n    // return import('./data/trace-list.json').then( data => data.default.data);\n    return api.get(config.getNodeTraceListUrl(req.procInstId), { sort: req.sort });\n}\n\n/**\n * 获取流程跟踪-流程图\n * @param req \n */\nexport function getWorkflowTraceFlowchartData(procInstId: string) {\n    //return import('./data/trace-flowchart.json').then( data => data.default.data);\n    return api.get(config.getNodeTraceFlowchartUrl(procInstId), {});\n}\n\nexport async function getWorkflowUserInfo(req: any) {\n    // return import('./data/user-info.json').then( data => data.default.data);\n    return api.get(config.WORKFLOW_USER_INFO_URL(), req);\n}\n\n/**\n * 审批\n * @param taskId 任务id\n * @param req \n */\nexport function approveByTaskId(taskId: string, req: any) {\n    return api.post(config.APPROVE_BY_TASKID_URL(taskId), { ...req, userCode: config.userCode }, false);\n}\n\n/**\n * 审批\n * @param businessKey 单据key\n * @param req \n */\nexport function approveByBusinessKey(businessKey: string, req: any) {\n    return api.post(config.APPROVE_BY_BUSSINESSKEY_URL(businessKey), { ...req, userCode: config.userCode }, false);\n}\n\n/**\n * 获取上一节点，或其它节点的信息\n * @param req \n */\nexport function getBackNodeInfo(req: any) {\n    return api.get(`${config.NODE_BACK_NODE_INFO_URL}`, req);\n}\n\n/**\n * 获取可以驳回的节点列表\n * @param req \n *        procInstId(流程实例Id)\n *        nodeId(当前节点Id)\n */\nexport function getAvaliableBackNodeList(req: any) {\n    return api.get(`${config.NODE_BACK_NODE_LIST_URL}`, req);\n}\n\n/**\n * 撤销\n * @param procInstId 流程实例id\n * @param req \n */\nexport function cancel(procInstId: string, req: any) {\n    return api.post(config.getNodeCancelActionUrl(procInstId), { ...req, userCode: config.userCode }, false);\n}\n\n/**\n * 撤销\n * @param businessKey 流程实例id\n * @param req \n */\nexport function cancelByBusinessKey(businessKey: string, req: any) {\n    return api.post(config.getNodeCancelActionWithBusinessKeyUrl(businessKey), { ...req, userCode: config.userCode }, false);\n}\n\n// export function back(businessKey: string, req: any) {\n//     return api.post(config.getNodeBackActionUrl(businessKey), req, false);\n// }\nexport function back(taskId: string, req: any) {\n    return api.post(config.getNodeBackActionUrl(taskId), { ...req, userCode: config.userCode }, false);\n}\n\n/**\n * 是否可撤销\n * @param procInstId \n * @param req \n */\n// export function canTaskRevoke(req: any) {\n//     return api.get_old(config.NODE_CAN_REVOKE_URL, req);\n// }\n\n/**\n * 是否可撤销\n * @param businessKey \n */\nexport function canTaskRevokeByBusinessKey(businessKey: string, taskId: string) {\n    try {\n        return api.get(config.NODE_CAN_REVOKE_BUSINESSKEY_URL, { businessKey, taskId }, false);\n    } catch (e) {\n        return false;\n    }\n\n}\n\n/**\n * 是否可撤销\n * @param req \n *        'procDefId'\n *        'procInstId'\n *        'nodeId'\n */\nexport function canTaskRevoke(req: any) {\n    try {\n        return api.get(config.NODE_CAN_REVOKE_URL, { ...req, userCode: config.userCode }, false);\n    } catch (e) {\n        return false;\n    }\n\n}\n\n/**\n * 是否可驳回\n * @param businessKey \n */\n// export function canTaskBackByBusinessKey(businessKey: string) {\n//     try {\n//         return api.get(config.NODE_CAN_BACK_URL, { businessKey }, false);\n//     }catch(e) {\n//         return false;\n//     }\n\n// }\n\n\n/**\n * 获取待办列表\n * @param req \n *        appCode\t应用编码\n *         userCode\t用户编码\n *         roleId\t角色ID\n *         pageNum\t页码\n *         pageSize\t每页条数\n *         bizTypeCode\t单据类型code\n *\n */\nexport function getTasks(req: any) {\n    return api.get(config.WORKFLOW_TASKS_URL, req);\n}\n\n\n/**\n * 获取用户信息列表\n * @param req \n *        ids  type\n *        基中type:user | role\n */\nexport function getUserInfoList(req: any) {\n    return api.post(config.WORKFLOW_USER_INFO_LIST_URL(), {\n        ...req, appCode: config.appCode, rgCode: config.rgCode\n    });\n}\n\n/**\n * 激活流程\n * @param options\n\n */\nexport function activateWorkflow(businessKey: string) {\n    return api.post(config.WORKFLOW_ACTIVATE_URL(businessKey), {\n        businessKey, userCode: config.userCode\n    });\n}\n\nexport function getWorkflowImageUrl(procDefId: string): string {\n    return config.WORKFLOW_INFO_IMAGE_URL(procDefId);\n}\n\n/**\n * 批量送审\n * @param taskIds \n * @param data \n *   userCode: 用户Code\n    \"taskFormRequests\": [\n        {\"businessKey\":\"单据Id\",\n        \"variables\": 单据变量集合 如:[ {\"name\":\"money\",\"type\":\"integer\",\"value\":100}]\n    }]\n */\nexport function batchApprove(taskIds: string, data: any) {\n    return api.post(config.WORKFLOW_BATCH_APPROVE_URL(taskIds), data);\n}\n\n/**\n * 根据taskId直接送审\n * @param taskId \n * @param data \n *        userCode: 用户code\n */\nexport function directApproveByTaskId(taskId: string, data: any) {\n    return api.post(config.WORKFLOW_DIRECT_APPROVE_TASKID_URL(taskId), data);\n}\n\n/** 不支持\n * 根据businessKey直接送审\n * @param businessKet \n * @param data \n *        userCode: 用户code\n *        menuId: 菜单Id\n */\n// export function directApproveByBusinessKey(businessKet: string, data: any) {\n//     return api.post(config.WORKFLOW_DIRECT_APPROVE_BUSINESSKEY_URL(businessKet), data);\n// }\n\n/**\n * 是否任务支持直接送审\n * 只有被驳回后才支持\n * @param taskId \n */\nexport function isTaskDirectApprove(taskId: string) {\n    return api.get(config.WORKFLOW_IS_DIRECT_APPROVE_URL(taskId), {}, false);\n}\n\n/**\n * 获取配置管理\n */\nexport async function getAdminConfig() {\n    try {\n        let data = await api.getOld(config.WORKFLOW_ADMIN_CONFIG_URL(), {});\n        return data;\n    }catch(e) {\n    }\n    return null;\n}\n\n/**\n * 获取用户角色信息\n * @param platAdapterBaseUrl \n * @param req \n */\nexport function getRoleInfoListByUrl(platAdapterBaseUrl:string, req: any) {\n    // 直接调用适配层地址\n    let url = platAdapterBaseUrl + '/fbpm/adapter/findRoleByRoleIds';\n    return api.get(url, req);\n}\n\n/**\n * 获取任务委托用户code\n * @param taskId \n */\nexport function getTaskDelegateUsers(taskIds: string) {\n    //api/query/track-tasks-taskdelegate\n    // return import('./data/delegatedUsers.json').then( data => data.data);\n    return api.get(`${config.WORKFLOW_USER_DELEGATE_URL()}`, { taskIds: taskIds || '' });\n}","/**\n * 批语\n */\n\nimport api from '../api';\nimport config from '../config';\n\n/**\n * 请求批语列表\n * @param req \n *        appCode\n *        userCode\n *        size\n */\nexport function getRemarkList(req: any): any {\n    return api.get(config.WORKFLOW_REMARK_LIST_URL, { ...req, userCode: config.userCode });\n}\n\n/**\n * 删除批语\n * @param id 批语id\n */\nexport function deleteRemark(id: string): any {\n    return api.delete(config.WORKFLOW_REMARK_DELETE_URL(id));\n}\n\n/**\n * 保存批语\n * @param req\n *       text\n *       userCode\n */\nexport function saveRemark(req: any): any {\n    return api.post(config.WORKFLOW_REMARK_SAVE_URL(), { ...req, userCode: config.userCode });\n}\n\n/**\n * 是否批语重复\n * @param req \n */\nexport function isRemarkDup(req: any): any {\n    return api.get(config.WORKFLOW_IS_REMARK_DUP_URL(), { ...req, userCode: config.userCode }, false);\n}\n\n/**\n * 设置星标\n * @param req \n *         id   批语id\n *         flag   标记 0 | 1\n */\nexport function starRemark(req: any): any {\n    return api.post(config.WORKFLOW_REMARK_STAR_URL(), { ...req, userCode: config.userCode });\n}","export function formatMillonSecondsToDays(millonSeconds) {\n    let days = Math.round((millonSeconds / 1000 / (3600 * 24)) * 10) / 10;\n    let intPart = parseInt(days.toString());\n    let decimalPart = days - intPart;\n    // 小于0.5不显示\n    if (days < 0.5)\n        return \"\";\n    // 如果小数部分　<0.5 显示为0.5,  > 0.5直接进位\n    if (decimalPart < 0.5)\n        return `${intPart}天`;\n    if (decimalPart > 0.5)\n        return `${intPart + 1}天`;\n    return `${days}天`;\n}","import config from '../services/config';\nimport { MessageBox } from 'mint-ui';\n/**\n * 检查输入参数\n * @param arr \n * @param input \n */\nexport function check(name: string, arr: Array<string>, input: any) {\n    let errCount = 0;\n    let params: Array<string> = [];\n    arr.forEach((v: string) => {\n        if (!input[v]) {\n            console.error(`[${name}] 缺少参数${v}`);\n            params.push(v);\n            errCount++;\n        }\n    });\n    if (errCount > 0) {\n        console.log(`[${name}]`, input);\n        error(`[${name}] 缺少参数${params.join(',')}`)\n    }\n    return errCount == 0;\n}\n\nexport function checkOr(name: string, arr1: Array<string>, arr2: Array<string>, input: any) {\n    let errCount1 = 0;\n    let errCount2 = 0;\n    let params1: Array<string> = [];\n    let params2: Array<string> = [];\n    arr1.forEach((v: string) => {\n        if (!input[v]) {\n            //console.error(`[workflow] ${name} ${v} is required`);\n            params1.push(v);\n            errCount1++;\n        }\n    });\n\n    arr2.forEach((v: string) => {\n        if (!input[v]) {\n            //console.error(`[workflow] ${name} ${v} is required`);\n            params2.push(v);\n            errCount2++;\n        }\n    });\n\n    if (errCount1 > 0 && errCount2 > 0) {\n        error(`[${name}]缺少参数: ${params1.join(',')}或${params2.join(',')}`)\n    }\n    return errCount1 == 0 || errCount2 == 0;\n}\n\nexport function checkTriple(name: string, \n    arr1: Array<string>, \n    arr2: Array<string>, \n    arr3: Array<string>, \n    input: any) {\n    let errCount1 = 0;\n    let errCount2 = 0;\n    let errCount3 = 0;\n    let params1: Array<string> = [];\n    let params2: Array<string> = [];\n    let params3: Array<string> = [];\n    arr1.forEach((v: string) => {\n        if (!input[v]) {\n            //console.error(`[workflow] ${name} ${v} is required`);\n            params1.push(v);\n            errCount1++;\n        }\n    });\n\n    arr2.forEach((v: string) => {\n        if (!input[v]) {\n            //console.error(`[workflow] ${name} ${v} is required`);\n            params2.push(v);\n            errCount2++;\n        }\n    });\n\n    arr3.forEach((v: string) => {\n        if (!input[v]) {\n            //console.error(`[workflow] ${name} ${v} is required`);\n            params3.push(v);\n            errCount3++;\n        }\n    });\n\n    if (errCount1 > 0 && errCount2 > 0 && errCount3 > 0) {\n        error(`[${name}]缺少参数: ${params1.join(',')}或${params2.join(',')}`)\n    }\n    return errCount1 == 0 || errCount2 == 0 || errCount3 == 0;\n}\n\nexport function error(message: string, foreShowing: boolean = false) {\n    console.log(`[workflow] ${message}`);\n    if (config.debug || foreShowing) {\n        MessageBox(config.debug ? 'DEBUG ' : '提示', message);\n    } \n}\n\n\nexport function log(message: string, ...optional: any[]) {\n    if (config.debug) {\n        console.log(message, optional);\n    }\n}","\nimport * as service from \"../services\";\nimport { WorkflowInfo, Options } from '../models';\nimport { Base64 } from 'js-base64';\n\nexport async function getConfig(options: Options, defaultOptions: any = {}): Promise<Options> {\n  let mergeOptions = { ...defaultOptions, ...options };\n\n  // 如果只传了businessKey才去掉用接口查询workflowInfo\n  if (options.businessKey && !options.taskId) {\n    let info = await service.getWorkflowInfo(options.businessKey);\n    info.businessKey = options.businessKey;\n    return { ...mergeOptions, ...info };\n  } else {\n    let opt = {\n      businessKey: options.businessKey || '',\n      taskId: options.taskId || '',\n      procDefId: options.procDefId || '',\n      procInstId: options.procInstId || '',\n      nodeId: options.nodeId || '',\n      appCode: ''\n    }\n\n    return { ...mergeOptions, ...opt }\n  }\n}\n\nexport function limitShowRemark(text: string): string {\n  if (text && text.length > 20) {\n    return text.substr(0, 20) + '...';\n  }\n  return text;\n}\n\n\nexport function buildTreeNode(list: Array<any>, filter: string = '', key: 'id' | 'code' = 'id'): Array<any> {\n  let temp: any = {};\n  let tree: Array<any> = [];\n  for (let i in list) {\n    if (list[i][key]) {\n      list[i].value = list[i][key];\n      list[i].title = list[i].name;\n      temp[list[i].id] = list[i];\n    }\n  }\n  for (let i in temp) {\n    if (temp[i].pId && temp[temp[i].pId]) {\n      if (!temp[temp[i].pId].children) {\n        temp[temp[i].pId].children = [];\n      }\n      temp[temp[i].pId].children.push(temp[i]);\n    } else {\n      if (temp[i]) {\n        tree.push(temp[i]);\n      }\n    }\n  }\n\n  if (filter) {\n    let hit = (list: Array<any>): Array<any> => {\n      if (!list) return [];\n      return list.filter((o: any) => {\n        let hitted = o.title ? o.title.indexOf(filter) != -1 : false;\n        let children: Array<any> | undefined = undefined;\n        if (o.children) {\n          children = hit(o.children);\n        }\n        o.children = children;\n        return hitted || (children ? children.length > 0 : false);\n      });\n    }\n\n    tree = hit(tree);\n  }\n\n  return tree;\n}\n\nexport function getErrorInfo(e: any) {\n  console.log('getErrorInfo', e);\n  let ret:any = {};\n  ret.error = e.code || 1;\n  ret.message = e.msg || e.message;\n  if(e.response && e.response.data) {\n    ret.message = e.response.data.message;\n  }\n\n  if(ret.message == \"Network Error\") {\n    ret.message = \"网络错误，请检查网络后重试\";\n  }\n  // if (e.code) {\n  //   ret.message = e.msg;\n  // }\n\n  return ret;\n}\n\n\nexport function decodeBase64(str) {\n  if(!str) return '';\n  return Base64.decode(str);\n}\n","export function parseQueryString (url) {\r\n    const obj = {};\r\n    if (url) {\r\n        const params = url.split('?')[1];\r\n        params && params.split('&').forEach(val => {\r\n            obj[val.split('=')[0]] = val.split('=')[1];\r\n        })\r\n    }\r\n    return obj;\r\n}","const colorArr = [\r\n    {\r\n        textColor: '#4A90E2',\r\n        bgColor: '#ECF3FC'\r\n    },\r\n    {\r\n        textColor: '#99CC00',\r\n        bgColor: '#F4F9E5'\r\n    },\r\n    {\r\n        textColor: '#FF9900',\r\n        bgColor: '#FFF4E5'\r\n    },\r\n    {\r\n        textColor: '#99CC00',\r\n        bgColor: '#F4F9E5'\r\n    },\r\n    {\r\n        textColor: 'orange',\r\n        bgColor: 'yellow'\r\n    },\r\n    {\r\n        textColor: 'black',\r\n        bgColor: '#ccc'\r\n}]\r\nexport function matchColor (data):any {\r\n    let newData:Array<any> = [];\r\n    let m: number = 0;\r\n    data.map(res => {\r\n        let bizTypeCode = res.bizTypeCode;\r\n        let i = newData.findIndex(item => (item as any).bizTypeCode == bizTypeCode);\r\n        if (i >= 0) {\r\n            //已存在\r\n            newData.push({ ...newData[i], ...res });\r\n        } else {\r\n            //不存在\r\n            newData.push({ ...res, ...colorArr[m] });\r\n            m = m + 1;\r\n        }\r\n    });\r\n    return newData;\r\n}","/**\n * 提供单位，部门接口服务\n */\nimport api from '../api';\nimport config from '../config';\nimport {  buildTreeNode } from '../../utils'\n\nexport async function getUnits(unitCode:string, name: string): Promise<any> {\n    let req = {\n        name: '',\n        appCode: config.appCode,\n        rgCode: config.rgCode,\n        unitCode: unitCode\n    }\n    return api.get(config.WORKFLOW_UNITS_URL(), req).then( (data:any) => buildTreeNode(data, name) )\n}\n\nexport function getOrgs(unitCode:string, name: string, containUnit: boolean) {\n\n     // 服务端不支持关键字搜索\n    let req = {\n        name: '',\n        containUnit: containUnit ? 'Y' : 'N',\n        appCode: config.appCode,\n        rgCode: config.rgCode,\n        unitCode: unitCode\n    }\n    return api.get(config.WORKFLOW_DEPTS_URL(), req).then( (data:any) => buildTreeNode(data, name) )\n}\n\n\n/**\n * 获取用部门用户列表\n * @param name \n * @param type \n * @param unitCode \n * @param id \n * @param pageNum \n * @param pageSize \n */\nexport async function getOrgUsers(\n    name: string,\n    type: string, // 'dept' | 'role',\n    unitCode: string,\n    id: string,\n    pageNum: number,\n    pageSize: number): Promise<any> {\n\n    let req = {\n        type,\n        name,\n        id,\n        pageNum,\n        pageSize,\n        appCode: config.appCode,\n        rgCode: config.rgCode,\n        unitCode: unitCode\n    };\n\n    return api.get(config.WORKFLOW_DEPT_USERS_URL(), req);\n\n}","\n/**\n * 签名\n */\n\nimport api from '../api';\nimport config from '../config';\n\n/**\n * 保存签章\n * @param req \n */\nexport function saveSignData(req: any): any {\n    return api.post(config.SIGN_SAVE_URL(), { ...req, userCode: config.userCode }, false);\n}\n\nexport function getSignList(procInstId: string): any {\n    return api.get(config.SIGN_QUERY_URL(procInstId), {}, false);\n}\n\nexport function getConfig() {\n    return api.getJson(config.WORKFLOW_GLOBAL_CONFIG_URL() + '?v=' + Date.now(), {}, false)\n}","\n/**\n * 审批要点\n */\nimport api from '../api';\nimport config from '../config';\n\nexport function getApproveElementsList(procInstId: string): any {\n    return api.get(config.APPROVE_ELEMENTS_QUERY_URL(procInstId), {}, false);\n}","import api from '../api';\r\nimport config from '../config';\r\n\r\nexport function getTaskTodoList(req: any) {\r\n    return api.get(config.TASK_TODO_LIST_URL(), req)\r\n}\r\nexport function getTaskDoneList(req: any) {\r\n    if(process.env.NODE_ENV == 'development') {\r\n        req = {...req, userCode: '200899'};\r\n    }\r\n    return api.get(config.TASK_DONE_LIST_URL(), req)\r\n}\r\nexport function advanceAsk (url, req) {\r\n    return api.post(url, req)\r\n}\r\n\r\n/**\r\n * 获取任务变量\r\n * @param req\r\n */\r\ninterface TaskCenterVariablesRequest {\r\n    procInstId: string;\r\n}\r\nexport async function getCenterTaskVariables(req: TaskCenterVariablesRequest): Promise<any> {\r\n    return api.get(`${config.TASK_CENTER_VARIABLES_REQUEST()}`, req);\r\n}","/**\n * fbpm工作流状态\n */\nexport enum FbpmStatus {\n    /**\n     * 启动流程\n     */\n    ACTION_INPUT = \"input\",\n\n    /**\n     * 审核中\n     */\n    ACTION_COMPLETE = \"complete\",\n\n    /**\n     * 回退到上一个任务节点\n     */\n    ACTION_BACK_PREV = \"back_prev\",\n\n    /**\n     * 回退到第一个任务节点\n     */\n    ACTION_BACK_FIRST = \"back_first\",\n    /**\n     * 回退到任一个任务节点\n     */\n    ACTION_BACK_ANY = \"back_any\",\n    /**\n     * 撤回 或者 收回 或者撤销\n     */\n    ACTION_RECALL = \"cancel\",\n    /**\n     * 认领\n     */\n    ACTION_CLAIM = \"claim\",\n    /**\n     * 委托\n     */\n    ACTION_DELEGATE = \"delegate\",\n    /**\n     * 审核中（委托任务）\n     */\n    ACTION_RESOLVE = \"resolve\",\n    /**\n     * 自由跳转\n     */\n    ACTION_JUMP = \"jump\",\n    /**\n     * 传阅\n     */\n    ACTION_CIRCULATE = \"circulate\"\n}","export enum TaskState {\n\n    /**\n     * 未开始\n     */\n    NotStart = 0,\n\n    /**\n     * 已审核\n     */\n    Approved = 1,\n\n    /**\n     * 审核中\n     */\n    Process = 2,\n\n    /**\n     * 驳回\n     */\n    Back = 3,\n\n    /**\n     * 被驳回\n     */\n    Backed = 4,\n    /**\n     * 撤销\n     */\n    Cancel = 5,\n    /**\n     * 已提交\n     */\n    Submitted = 6,\n\n    /**\n     * 待提交\n     */\n    Submitting = 7\n}","/**\n * 审批流\n */\nexport enum ApproveFlows {\n    /**\n     * 审批要点\n     */\n    ApproveElements = 1,\n    /**\n     * 审批意见\n     */\n    Messge = 2,\n  \n    /**\n     * 下一步参与人\n     */\n    Users = 3,\n    /**\n     * 确认\n     */\n    Confirm = 4\n  }","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\n\n@Component\nexport default class Icon extends Vue {\n    @Prop() primary!:boolean;\n    render(h) {\n        return <div class=\"workflow-icon\" style={`${this.primary ? 'workflow-icon-primary' : ''}`}></div>\n    }\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\n//import NoDataImage from '../assets/nodata.png';\nimport Icon from './icon';\n\n@Component({\n    components: {\n        'w-icon': Icon\n    }\n})\nexport default class Empty extends Vue {\n    @Prop({ default: `100%` }) height!: number;\n    render(h) {\n\n        return <div class=\"workflow-empty\" style={{ height: `${this.height}` }}>\n            <div>\n                <w-icon class=\"workflow-nodata\" />\n            </div>\n            <div>没有找到数据</div>\n        </div>\n    }\n}","<template>\n<div class=\"workflow-checklist\" ref=\"wrapper\" :style=\"{ height: wrapperHeight + 'px', overflow: 'auto' }\">\n    <div\n    class=\"mint-checklist\"\n    infinite-scroll-immediate-check=\"false\"\n    v-infinite-scroll=\"loadMore\"\n    infinite-scroll-disabled=\"loading\"\n    infinite-scroll-distance=\"50\">\n        <mt-cell v-for=\"option in options\" :key=\"option.id\">\n        <label slot=\"title\" class=\"mint-checklist-label\"  :style=\"{textAlign:'left'}\">\n        <span class=\"mint-checkbox is-right\">\n            <input\n                class=\"mint-checkbox-input\"\n                type=\"checkbox\"\n                :value=\"option.value\"\n                :disabled=\"option.disabled\"\n                @change=\"onChange($event, option)\"\n                :checked=\"option.selected\" ></input>\n            <span class=\"mint-checkbox-core\"></span>\n        </span>\n        <span class=\"mint-checkbox-label\" ><w-node :vnode=\"option.label\" /></span>\n        </label>\n        </mt-cell>\n\n    </div>\n    <p v-if=\"loading\" class=\"workflow-loading\">\n        <mt-spinner type=\"fading-circle\"></mt-spinner>加载中...\n    </p>\n    <p v-if=\"finished\" class=\"workflow-finished\">\n        没有数据了\n    </p>\n    </div>\n</template>\n<script>\n//import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\n// @Component({\n//     components: {\n//         'w-node': {\n//             functional: true,\n//             render: (h, ctx) => ctx.props.vnode\n//         },\n//     }\n    \n// })\n\nexport default {\n    name: 'w-checklist',\n    components: {\n        'w-node': {\n            functional: true,\n            render: (h, ctx) => ctx.props.vnode\n        },\n    },\n    props: {\n        loading: Boolean,\n        finished: Boolean,\n        options: {\n        type: Array,\n        required: true\n        }\n    },\n\n    data() {\n        return {\n           wrapperHeight: 0,\n           hasMore: false\n        };\n    },\n    // get myOptions() {\n    //     return this.options || [];\n    // }\n    // @Emit('change')\n    // change(values) {\n\n    // }\n\n\n    // @Emit('more')\n    // async onMore() :Promise<boolean>{\n    //     return false;\n    // }\n\n    mounted() {\n        let wrapper = this.$refs.wrapper;\n        if (wrapper) {\n            this.wrapperHeight = document.documentElement.clientHeight - wrapper.getBoundingClientRect().top;\n        }\n    },\n    methods:{\n\n            loadMore: function(){\n                setTimeout(async () => {\n                    this.$emit('more');\n                    //await this.onMore();\n                }, 100);\n            },\n            onChange: function(e, option) {\n                let selected = e.target.checked;\n                //let id = e.target.value;\n                option.selected = selected;\n                let values = this.options.filter((option) => option.selected).map(option => option.value)\n                //this.change(values)\n                this.$emit('change', values);\n            }\n        }\n\n    }\n</script>\n\n","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\n//import NoDataImage from '../assets/nodata.png';\n//import { Cell } from 'mint-ui';\n@Component\nexport default class List extends Vue {\n\n    @Prop() dataSource!: Array<any>;\n    @Emit('change')\n    change(value, item?: any) {\n    }\n\n    render(h) {\n        let source = this.dataSource || [];\n        return <ul class=\"workflow-list\">\n            {\n                source.map((item) => <li key={item.value} onClick={() => {\n                    this.change(item.value, item);\n                }} >\n                    <div>{item.label}</div>\n                </li>)\n            }\n        </ul>\n    }\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\n\n\n@Component\nexport default class Search extends Vue {\n\n    input: string = '';\n    @Prop() placeholder!: string;\n    @Emit('search') \n    onSearch(text:string) {\n\n    }\n    render(h) {\n\n        let placeholder = this.placeholder || '搜索';\n        return <div class=\"workflow-search\">\n            <div class=\"workflow-searchbar\">\n                <div class=\"workflow-searchbar-inner\">\n                    <i class=\"mintui mintui-search\"></i>\n                    <input\n                        \n                        ref=\"input\"\n                        value={this.input}\n                        type=\"search\"\n                        onKeyup={this.enter}\n                        //v-model=\"currentValue\"\n                        onInput={this.onInput}\n                        placeholder={placeholder}\n                        class=\"workflow-searchbar-core\" />\n                </div>\n            </div>\n        </div>\n    }\n\n    onInput(e) {\n        this.input = e.target.value;\n    }\n    enter(e) {\n        if(e.key === 'Enter'){\n            this.onSearch(this.input);\n        }\n    }\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\nimport * as service from \"../services\";\nimport config from \"../services/config\";\nimport { Toast, MessageBox } from 'mint-ui';\nimport * as utils from '../utils';\n//import { message, notification } from 'ant-design-vue';\nimport { Options, WorkflowInfo, Assignment } from '../models';\nimport { getUnits } from \"../services\";\nimport Empty from '../components/empty';\nimport Checklist from '../components/checklist.vue';\nimport List from '../components/list';\nimport Search from '../components/search';\n\nconst PAGE_SIZE = 8;\nexport interface User {\n    userCode: string;\n    userName: string;\n    deptName: string;\n    unitName: string;\n    selected?: boolean;\n}\n\n@Component({\n    components: {\n        \"w-empty\": Empty,\n        \"w-checklist\": Checklist,\n        \"w-list\": List,\n        \"w-search\": Search\n    }\n})\nexport default class SelectUsers extends Vue {\n    searchText: string = '';\n    selectedUsersInPopup: Array<User> = [];\n\n    // 是否显示下一步骤popup\n    isNextStepsPopup: boolean = false;\n\n    // 参与人类型popup\n    isParticipantTypePopup: boolean = false;\n\n    // 参与人目录popup\n    isParticipantCatalogPopup: boolean = false;\n\n    // 用户列表popup\n    isUsersPopup: boolean = false;\n\n    currentPage: number = 0;\n    userPageCount: number = 1;\n    pageTotal: number = 0;\n\n    steps: Array<any> = [];\n    selectedNodeId: string = \"\";\n    selectedNodeName: string = \"\";\n\n    type: any = {};\n\n    // 参与人类型列表\n    types: Array<any> = [];\n\n    // 参与人类型目录列表\n    catalogList: Array<any> = [];\n    catalog: any = {};\n\n    // 用户列表\n    userList: Array<User> = [];\n    nodeDataMap: Map<string, any> = new Map();\n    userMap: Map<string, User> = new Map();\n    selectedUsers: Array<User> = [];\n\n    // 加载用户列表\n    loadingUserList: boolean = false;\n    loadAllFinished: boolean = false;\n\n    // 抢占\n    nextIsPreemptMode: boolean = false;\n    // 会签\n    nextNodeIsMultiple: boolean = false;\n\n\n    @Prop({ default: false }) visible!: boolean;\n    @Prop({ default: '下一步' }) okText!: string;\n    @Prop()\n    extra?: any;\n\n    @Emit('back')\n    back() {\n\n    }\n\n    @Emit('ok')\n    ok() {\n        //return this.selectedUsers;\n        return {\n            users: this.selectedUsers,\n            selectedNodeId: this.selectedNodeId,\n            nextIsPreemptMode: this.nextIsPreemptMode,\n            nextNodeIsMultiple: this.nextNodeIsMultiple\n        }\n    }\n\n    async mounted() {\n        // 获取节点步骤\n        this.steps = await service.getNodeNextSteps({\n            //procInstId: this.workflowInfo.procInstId,\n            procDefId: this.extra.procDefId,\n            nodeId: this.extra.nodeId,\n            appCode: this.extra.appCode\n        });\n        if (this.steps && this.steps.length > 0) {\n            let node = this.steps[0];\n            this.selectedNodeId = node.nodeId;\n            this.selectedNodeName = node.nodeName;\n\n            console.log('next', node);\n            this.nextIsPreemptMode = node.isPreemptMode == \"1\";\n            this.nextNodeIsMultiple = node.isMultiinstance == \"1\";\n            console.log('selectedNodeId', this.selectedNodeId);\n            this.types = await service.getNodeParticipantTypes({\n                procDefId: this.extra.procDefId,\n                nodeId: this.selectedNodeId,\n                appCode: this.extra.appCode,\n                creatorCode: this.extra.creatorCode\n            }) || [];\n\n            if (this.types && this.types.length > 0) {\n                this.type = this.types[0];\n                this.handleTypeChange(this.type);\n            }\n        }\n    }\n    render(h:any) {\n        return <div>\n            <mt-popup class=\"workflow-page\" value={this.visible}>\n                <mt-header title=\"审批流程\" isLink={true}>\n                    <mt-button slot=\"left\" icon=\"back\" onClick={this.back}>返回</mt-button>\n                </mt-header>\n                <mt-cell title=\"下一步骤\" value={this.selectedNodeName} to={null} isLink={true} nativeOnClick={() => {\n                    this.isNextStepsPopup = true\n                }}>\n                </mt-cell>\n                <mt-cell title=\"参与人类型\"\n                    isLink={true}\n                    value={this.type.name}\n                    nativeOnClick={() => {\n                        this.isParticipantTypePopup = true\n                    }}\n                ></mt-cell>\n                <mt-cell title=\"角色列表/部门列表\" isLink={true}\n                    value={this.catalog.name}\n                    nativeOnClick={() => {\n                        this.isParticipantCatalogPopup = true\n                    }}></mt-cell>\n                <mt-cell title=\"人员列表\" value={this.renderUserNames()} isLink={true} nativeOnClick={() => {\n                    this.isUsersPopup = true;\n                    this.onSearch('');\n                }}></mt-cell>\n                <div class=\"workflow-page-actions\">\n                    <mt-button type=\"primary\" onClick={() => {\n                        if (this.selectedUsers && this.selectedUsers.length == 0) {\n                            Toast('请选择下一步骤人员');\n                            return;\n                        }\n                        this.ok();\n                    }}>{this.okText}</mt-button>\n                </div>\n            </mt-popup>\n            { /** 选择步骤 */}\n            <mt-popup class=\"workflow-page\" value={this.isNextStepsPopup}>\n                <mt-header title=\"选择下一步骤\">\n                    <mt-button slot=\"left\" icon=\"back\" onClick={() => this.isNextStepsPopup = false}>返回</mt-button>\n                </mt-header>\n                <w-list\n                    onChange={(v, item) => {\n                        this.isNextStepsPopup = false;\n                        this.selectedNodeId = v;\n                        this.selectedNodeName = item.label;\n                        this.onNodeStepChange(v);\n                    }}\n                    dataSource={this.steps.map((step) => {\n                        return { value: step.nodeId, label: step.nodeName }\n                    })}>\n                </w-list>\n            </mt-popup>\n\n            { /** 选择参与人类型  */}\n            <mt-popup class=\"workflow-page\" value={this.isParticipantTypePopup}>\n                <mt-header title=\"选择参与人类型\">\n                    <mt-button slot=\"left\" icon=\"back\" onClick={() => this.isParticipantTypePopup = false}>返回</mt-button>\n                </mt-header>\n                <w-list\n                    onChange={(v, item) => {\n                        this.isParticipantTypePopup = false;\n                        console.log('type', item);\n                        this.type = { type: item.value, name: item.label };\n                        this.handleTypeChange(this.type);\n\n                    }}\n                    dataSource={this.types.map((type) => {\n                        return { value: type.type, label: type.name }\n                    })}>\n                </w-list>\n            </mt-popup>\n\n            { /** 选择参与人目录  */}\n            <mt-popup class=\"workflow-page\" value={this.isParticipantCatalogPopup}>\n                <mt-header title=\"选择参与人目录\">\n                    <mt-button slot=\"left\" icon=\"back\" onClick={() => this.isParticipantCatalogPopup = false}>返回</mt-button>\n                </mt-header>\n                <w-list\n                    onChange={(v, item) => {\n                        this.isParticipantCatalogPopup = false;\n                        console.log('catalog', item);\n                        this.catalog.id = item.value;\n                        this.catalog.name = item.label;\n                    }}\n                    dataSource={this.catalogList.map((catalog) => {\n                        return { value: catalog.id, label: catalog.name }\n                    })}>\n                </w-list>\n            </mt-popup>\n\n            {/* 选择人员 */}\n            <mt-popup class=\"workflow-page\" value={this.isUsersPopup}>\n                <mt-header title=\"选择人员\">\n                    <mt-button slot=\"left\" icon=\"back\" onClick={() => this.isUsersPopup = false}>返回</mt-button>\n                </mt-header>\n                <w-search value={this.searchText} onSearch={(key) => this.onSearch(key)}>\n                </w-search>\n                {\n                    this.userList && this.userList.length > 0 ? <w-checklist\n                        loading={this.loadingUserList}\n                        finished={this.loadAllFinished}\n                        align=\"right\"\n                        options={this.userList.map((u: User) => {\n                            return {\n                                label: <span>\n                                    <div>\n                                        <span class=\"workflow-user-code\">{u.userCode}</span><span class=\"workflow-user-name\">{u.userName}</span>\n                                    </div>\n                                    <div>\n                                        <span class=\"workflow-unit-name\">{u.unitName}</span><span class=\"workflow-dept-name\">{u.deptName}</span>\n                                    </div>\n                                </span>,\n                                selected: false,\n                                value: u.userCode\n                            }\n                        })}\n                        onMore={async () => {\n                            return new Promise((resolve, reject) => {\n                                if (this.currentPage < this.pageTotal) {\n                                    this.searchUserList(this.type.type, this.catalog.id, this.currentPage + 1, this.searchText);\n                                    resolve(true);\n                                } else {\n                                    resolve(false);\n                                }\n\n                            });\n                        }}\n                        onChange={(values) => {\n                            console.log(values);\n                            let users = this.userList.filter(u => values.includes(u.userCode));\n                            this.selectedUsersInPopup = users;\n                        }}\n                    >\n                    </w-checklist> : <w-empty />\n                }\n\n                <div class=\"workflow-page-actions\">\n                    <mt-button type=\"primary\" onClick={async () => {\n                        this.isUsersPopup = false;\n                        this.selectedUsers = this.selectedUsersInPopup;\n                    }}>确定</mt-button>\n                </div>\n            </mt-popup>\n        </div>\n    }\n\n    renderUserNames() {\n        let ret = '请选择';\n        if (this.selectedUsers.length > 0) {\n            ret = this.selectedUsers.map(u => u.userName).join(', ');\n            if (ret.length > 12) {\n                ret = ret.substr(0, 12) + '...';\n            }\n        }\n        return ret;\n    }\n\n    /**\n     * 选择下一步节点\n     */\n    async onNodeStepChange(v: any) {\n        this.nodeDataMap.set(this.selectedNodeId, this.selectedUsers);\n        this.selectedNodeId = v;\n\n        let node = this.steps.find((n: any) => n.nodeId == this.selectedNodeId);\n        console.log('next', node);\n        this.nextIsPreemptMode = node.isPreemptMode == \"1\";\n        this.nextNodeIsMultiple = node.isMultiinstance == \"1\";\n\n        this.selectedUsers = this.nodeDataMap.get(this.selectedNodeId) || [];\n\n        this.types = await service.getNodeParticipantTypes({\n            procDefId: this.extra.procDefId,\n            nodeId: v,\n            appCode: this.extra && this.extra.appCode,\n            rgCode: this.extra && this.extra.rgCode,\n            unitCode: this.extra && this.extra.unitCode\n        });\n\n        if (this.types && this.types.length > 0) {\n            this.type = this.types[0];\n            this.handleTypeChange(this.type);\n        }\n    }\n\n    /**\n     * 选择参与人类型\n     */\n    async handleTypeChange(t: any) {\n        console.log(\"handleTypeChange\", t);\n        this.type = t;\n        // 替换$_为fvar_, 避免表达式错误\n        let variables = this.extra.variables.map(v => {\n            return { ...v, name: v.name.replace('$_', 'fvar_') }\n        })\n        console.log('variables', variables);\n        let data = await service.getParticipantCatalog({\n            procDefId: this.extra.procDefId,\n            nodeId: this.selectedNodeId,\n            appCode: this.extra && this.extra.appCode,\n            rgCode: this.extra && this.extra.rgCode,\n            unitCode: this.extra && this.extra.unitCode,\n            type: t.type,\n            businessKey: this.extra.businessKey,\n            creatorCode: this.extra.creatorCode,\n            variables: variables\n        });\n\n        this.catalogList = this.buildTreeNode(data);\n        if (this.catalogList && this.catalogList.length > 0) {\n            this.catalog = this.catalogList[0];\n            this.searchUserList(t.type, this.catalog.id, 1, '')\n        }\n    }\n\n    /**\n     * 搜索参与人\n     */\n    onSearch(v: string) {\n        console.log(\"search\", v);\n        this.userList = [];\n        this.searchText = v;\n        this.searchUserList(this.type.type, this.catalog.id, 1, v);\n    }\n\n\n    private async searchUserList(type: string, key: string, pageNum: number, name: string) {\n        let param = {\n            type: this.type.type,\n            id: key,\n            name: name,\n            pageNum: pageNum,\n\n            pageSize: PAGE_SIZE,\n            appCode: (this.extra && this.extra.appCode) || '',\n            rgCode: (this.extra && this.extra.rgCode) || '',\n            unitCode: (this.extra && this.extra.unitCode) || '',\n            procDefId: this.extra.procDefId,\n            nodeId: this.selectedNodeId\n        };\n        try {\n            this.loadingUserList = true;\n            let data = await service.getParticipantList(param);\n            if (data) {\n                let list = data.rows || [];\n                this.userList.push(...list);\n                console.log('userList', this.userList);\n                this.pageTotal = data.total;\n                this.currentPage = data.page;\n\n                // 只有多页时才显示 “没有数据了”提示\n                this.loadAllFinished = this.pageTotal > 1 && data.page == data.total;\n            } \n        } finally {\n            this.loadingUserList = false;\n        }\n\n    }\n\n    private buildTreeNode(list: Array<any>) {\n        let temp: any = {};\n        let tree: any = [];\n        for (let i in list) {\n            temp[list[i].id] = list[i];\n        }\n        for (let i in temp) {\n            if (temp[i].pId) {\n                if (!temp[temp[i].pId].children) {\n                    temp[temp[i].pId].children = [];\n                }\n                temp[temp[i].pId].children.push(temp[i]);\n            } else {\n                tree.push(temp[i]);\n            }\n        }\n        return tree;\n    }\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\n\n@Component\nexport default class Sep extends Vue {\n    render(h) {\n        return <div class=\"workflow-page-sep\"></div>\n    }\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\nimport * as service from \"../services\";\nimport config from \"../services/config\";\nimport { Toast, MessageBox } from 'mint-ui';\nimport * as utils from '../utils';\n//import { message, notification } from 'ant-design-vue';\nimport { Options, WorkflowInfo, Assignment } from '../models';\nimport { getUnits, saveRemark } from \"../services\";\nimport Empty from '../components/empty';\nimport List from '../components/list';\nimport Sep from '../components/sep';\n\nconst REMARK_TYPE = 'approve';\n\n@Component({\n    components: {\n        \"aw-empty\": Empty,\n        \"w-list\": List,\n        \"w-sep\": Sep\n    }\n})\nexport default class Message extends Vue {\n    isRemarkPopup: boolean = false;\n    approveText: string = '';\n    remarks: Array<any> = [];\n    saveAsRemark: boolean = false;\n\n    @Prop({ default: false }) visible!: boolean;\n    @Prop({ default: '' }) appCode!: string;\n    @Prop({ default: '下一步' }) okText!: string;\n\n    @Emit('back')\n    back() {\n\n    }\n\n    @Emit('ok')\n    ok() {\n        return this.approveText;\n    }\n\n    mounted() {\n        // 审核默认意见\n        this.approveText = config.getData('approve.text') || '';\n    }\n\n\n    /**\n     * 输入批语\n     */\n    onInputChange(v: any) {\n\n        this.approveText = v;\n    }\n\n    render(h: any) {\n        let okText = this.okText || '下一步';\n        return <div>\n            <mt-popup class=\"workflow-page\" value={this.visible}>\n                <mt-header title=\"审批意见\">\n                    <mt-button slot=\"left\" icon=\"back\" onClick={this.back}>返回</mt-button>\n                </mt-header>\n                <mt-cell title=\"常用批语\" value=\"\" isLink={true} nativeOnClick={() => {\n                    this.isRemarkPopup = true\n                    this.getRemarkList();\n                }}>\n                \n                </mt-cell>\n                <mt-field placeholder=\"请填写审批意见\" type=\"textarea\" rows=\"4\" value={this.approveText} onInput={this.onInputChange} ></mt-field>\n                <mt-cell title=\"存为常用批语\">\n                    <mt-switch value={this.saveAsRemark} onInput={(v) => this.saveAsRemark = v}></mt-switch>\n                </mt-cell>\n                <div class=\"workflow-page-actions\">\n                    <mt-button type=\"primary\" onClick={async () => {\n                        if (this.saveAsRemark) {\n                            try {\n                                await service.isRemarkDup({\n                                    appCode: this.appCode,\n                                    comLang: this.approveText,\n                                    type: REMARK_TYPE\n                                });\n                                await service.saveRemark({\n                                    appCode: this.appCode,\n                                    text: this.approveText,\n                                    type: REMARK_TYPE\n                                });\n                            } catch (e) {\n                                Toast('批语已存在, 不能保存重复批语');\n                                return;\n                            }\n                        }\n                        this.ok();\n                    }}>{okText}</mt-button>\n                </div>\n            </mt-popup>\n\n            <mt-popup class=\"workflow-page\" value={this.isRemarkPopup}>\n                <mt-header title=\"常用批语\">\n                    <mt-button slot=\"left\" icon=\"back\" onClick={() => this.isRemarkPopup = false}>返回</mt-button>\n                </mt-header>\n                <w-list\n                    onChange={(v, item) => {\n                        this.isRemarkPopup = false;\n                        this.approveText = item.label;\n                    }}\n                    dataSource={this.remarks.map((remark) => {\n                        return { value: remark.id, label: remark.text }\n                    })}>\n                </w-list>\n            </mt-popup>\n        </div>\n    }\n\n    // 获取批语列表\n    private async getRemarkList() {\n        this.remarks = await service.getRemarkList({\n            appCode: config.appCode,\n            userCode: config.userCode,\n            size: 10,\n            type: REMARK_TYPE\n        });\n    }\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\nimport * as service from \"../services\";\nimport config from \"../services/config\";\nimport { Toast, MessageBox } from 'mint-ui';\nimport * as utils from '../utils';\n//import { message, notification } from 'ant-design-vue';\nimport { Options, WorkflowInfo, Assignment } from '../models';\nimport { getUnits } from \"../services\";\nimport Empty from '../components/empty';\nimport List from '../components/list';\nimport Checklist from '../components/checklist.vue';\n\n\n@Component({\n    components: {\n        \"aw-empty\": Empty,\n        \"w-checklist\": Checklist,\n        \"w-list\": List,\n    }\n})\n\n/**\n * 审批要点\n */\nexport default class Elements extends Vue {\n    isRemarkPopup: boolean = false;\n    approveText: string = '';\n    remarks: Array<any> = [];\n\n    @Prop({ default: false }) visible!: boolean;\n    @Prop({ default: '下一步' }) okText!: string;\n    @Prop({ default: [] }) elements!: Array<any>;\n\n    @Prop({ default: false }) isBackFromConfrimPage!: boolean;\n    @Emit('back')\n    back() {\n\n    }\n\n    @Emit('ok')\n    ok() {\n\n    }\n\n\n    /**\n     * 输入批语\n     */\n    onInputChange(v: any) {\n        this.approveText = v;\n    }\n\n    render(h) {\n        let okText = this.okText || '下一步';\n        return <div>\n            <mt-popup class=\"workflow-page\" value={this.visible}>\n                <mt-header title=\"审批要点\">\n                    <mt-button slot=\"left\" icon=\"back\" onClick={this.back}>返回</mt-button>\n                </mt-header>\n                <w-checklist\n                    align=\"right\"\n                    onChange={(values: Array<string>) => {\n                        console.log(values);\n                        for (let e of this.elements) {\n                            e.selected = values.includes(e.id);\n                        }\n                    }}\n                    options={this.elements.map((e) => {\n                        return {\n                            value: e.id,\n                            selected: e.selected || false,\n                            label: <span>\n                                {e.elementName}\n                                {e.isRequired == '1' && <span class=\"element-required\" />}\n                            </span>\n                        }\n                    })}\n                >\n                </w-checklist>\n                <div class=\"workflow-page-actions\">\n                    <mt-button type=\"primary\" onClick={this.ok}>{ okText }</mt-button>\n                </div>\n            </mt-popup>\n        </div>\n    }\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\nimport * as service from \"../services\";\nimport config from \"../services/config\";\nimport { Toast, MessageBox } from 'mint-ui';\nimport * as utils from '../utils';\n//import { message, notification } from 'ant-design-vue';\nimport { getUnits } from \"../services\";\nimport Empty from '../components/empty';\nimport List from '../components/list';\nimport Sep from '../components/sep';\nimport { ApproveFlows } from '../models';\n\n@Component({\n    components: {\n        \"aw-empty\": Empty,\n        \"w-list\": List,\n        \"w-sep\": Sep\n    }\n})\nexport default class Confirm extends Vue {\n\n    @Prop({ default: false }) visible!: boolean;\n    @Prop({ default: '确定' }) okText!: string;\n    @Prop({ default: [] }) elements: any;\n    @Prop({ default: '' }) approveText!: string;\n    @Prop({ default: [] }) users!: Array<any>;\n    @Prop({ default: [] }) flows!: Array<ApproveFlows>;\n\n    @Emit('back')\n    back() {\n\n    }\n\n    @Emit('move')\n    move(flow: number) {\n\n    }\n\n    @Emit('ok')\n    ok() {\n\n    }\n\n\n    /**\n     * 输入批语\n     */\n    onInputChange(v: any) {\n        this.approveText = v;\n    }\n\n    render(h: any) {\n        let elements = this.elements || [];\n        let flows = this.flows || [];\n        return <div>\n            <mt-popup class=\"workflow-page\" value={this.visible}>\n                <mt-header title=\"审批确认\" isLink={true} >\n                    <mt-button slot=\"left\" icon=\"back\" onClick={this.back}>返回</mt-button>\n                </mt-header>\n                {\n                    flows.includes(ApproveFlows.ApproveElements) &&\n                    <div>\n                        <mt-cell title=\"审批要点\" class=\"workflow-cell-title\" isLink nativeOnClick={() => this.move(ApproveFlows.ApproveElements)}></mt-cell>\n                        {\n                            elements.filter((element) => element.selected).map((element, index) => <mt-cell title={`${index + 1}. ${element.elementName}`}></mt-cell>)\n                        }\n                        <w-sep />\n                    </div>\n                }\n\n                <mt-cell title=\"审批意见\" class=\"workflow-cell-title\" isLink nativeOnClick={() => this.move(ApproveFlows.Messge)}></mt-cell>\n                <mt-cell title={this.approveText || ''}></mt-cell>\n                <w-sep />\n                {\n                    flows.includes(ApproveFlows.Users) &&\n                    <div>\n                        <mt-cell title=\"下一岗审批人\" class=\"workflow-cell-title\" isLink nativeOnClick={() => this.move(ApproveFlows.Users)}></mt-cell>\n                        <mt-cell title={this.getUsersName()}></mt-cell>\n                        \n                    </div>\n                }\n\n                <div class=\"workflow-page-actions\">\n                    <mt-button type=\"primary\" onClick={this.ok}>\n                        {this.okText}\n                    </mt-button>\n                </div>\n            </mt-popup>\n        </div>\n    }\n\n    private getUsersName() {\n        let users = this.users || [];\n        let name = users.map(u => u.userName).join(',');\n        if (name.length > 12) {\n            return name.substr(0, 12) + '...';\n        }\n        return name;\n    }\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\r\nimport * as service from \"../services\";\r\nimport config from \"../services/config\";\r\nimport { Toast, Indicator, MessageBox } from 'mint-ui';\r\nimport * as utils from '../utils';\r\n//import { message, notification } from 'ant-design-vue';\r\nimport { Options, WorkflowInfo, Assignment, ApproveFlows } from '../models';\r\nimport { getUnits } from \"../services\";\r\nimport Empty from '../components/empty';\r\nimport Checklist from '../components/checklist.vue';\r\nimport List from '../components/list';\r\n\r\nimport SelectUsers, { User } from './select-users';\r\nimport Message from './message';\r\nimport Elements from './elements';\r\nimport Confirm from './confirm';\r\n\r\n// import '../styles/style.less'\r\nconst PAGE_SIZE = 10;\r\n\r\n@Component({\r\n  components: {\r\n    \"aw-empty\": Empty,\r\n    \"w-checklist\": Checklist,\r\n    \"w-list\": List,\r\n    \"w-selectusers\": SelectUsers,\r\n    \"w-message\": Message,\r\n    \"w-elements\": Elements,\r\n    \"w-confirm\": Confirm\r\n  }\r\n})\r\nexport default class WorkflowApprove extends Vue {\r\n\r\n  // 允许显示的审批流\r\n  allowedFlows: ApproveFlows[] = [];\r\n  // 审批流\r\n  approveFlow: ApproveFlows = ApproveFlows.ApproveElements;\r\n  // 是否从确认页返回\r\n  isBackFromConfirm: boolean = false;\r\n\r\n  // 审批要点\r\n  elements: Array<any> = [];\r\n\r\n  // 批语\r\n  approveText: string = '';\r\n\r\n  selectedUsers: Array<User> = [];\r\n\r\n  // 下一步骤节点\r\n  selectedNodeId: string = \"\";\r\n\r\n  // 抢占\r\n  nextIsPreemptMode: boolean = false;\r\n  // 会签\r\n  nextNodeIsMultiple: boolean = false;\r\n\r\n  // 保存忙碌状态\r\n  saveBusying: boolean = false;\r\n\r\n  // 当前节点\r\n  node: any = {};\r\n  isAllowedUsers: boolean = false;\r\n\r\n  config!: Options;\r\n  @Prop({ default: '' }) title!: string;\r\n  @Prop({ default: () => [] }) variables!: Array<any>;\r\n\r\n  @Prop({ default: false }) visible!: boolean;\r\n  // @Prop() nodeId: string = \"\";\r\n  // @Prop() procDefId: string = \"\";\r\n  @Prop() options!: Options;\r\n\r\n  @Watch('visible')\r\n  onVisibleChanged(val: boolean, oldVal: boolean) {\r\n    if (val) {\r\n      this.reinit(this.options);\r\n    }\r\n  }\r\n\r\n  @Watch('options')\r\n  onOptionsChanged(val: Options, oldVal: Options) {\r\n    if (this.visible && val) {\r\n      this.reinit(val);\r\n    }\r\n  }\r\n\r\n  @Emit(\"selected\")\r\n  async onSelected(e: any) {\r\n    let ret: any = { error: 0, message: '' };\r\n    this.saveBusying = true;\r\n    this.openLoading();\r\n    //this.nodeDataMap.set(this.selectedNodeId, this.selectedUsers);\r\n    var users: Array<Assignment> = [];\r\n    if (this.selectedUsers && this.selectedUsers.length > 0) {\r\n      users = this.selectedUsers.map((u: User) => {\r\n        return {\r\n          assignee: u.userCode,\r\n          assigneeName: u.userName,\r\n          assigneeType: 'user'\r\n        }\r\n      })\r\n    }\r\n\r\n    let sel = {\r\n      nextNodeId: this.selectedNodeId,\r\n      nextUsers: users,\r\n      isNextPreemptMode: this.nextIsPreemptMode,\r\n      isNextNodeMultiple: this.nextNodeIsMultiple,\r\n      message: this.approveText\r\n    };\r\n\r\n    try {\r\n      let opts: any = this.options;\r\n      opts.approveFirstNode = opts.approveFirstNode || true;\r\n\r\n\r\n      // 检查审批要点\r\n      // 如果要点检查成功，返回elements,否则抛出异常\r\n      let elements = this.checkApproveElements();\r\n\r\n      let data: any = await service.startWorkflow({\r\n        appCode: config.appCode,\r\n        bizTypeCode: opts.bizTypeCode,\r\n        businessKey: opts.businessKey,\r\n        rgCode: opts.rgCode,\r\n        unitCode: opts.unitCode,\r\n        userCode: opts.userCode,\r\n        // 发起人\r\n        creatorCode: this.node.creatorCode,\r\n        variables: this.variables\r\n      });\r\n\r\n      // 如果下一节点为抢占模式\r\n      if (sel.isNextPreemptMode) {\r\n        await service.approveByTaskId(data.taskId, {\r\n          action: \"complete\",\r\n          nextNodeId: sel.nextNodeId,\r\n          users: sel.nextUsers || [],\r\n          message: sel.message,\r\n          variables: this.variables,\r\n          signObject: null,\r\n          elements: elements,\r\n          deptCode: opts.deptCode\r\n        });\r\n      } else {  // 非抢占\r\n\r\n        // 是否会签\r\n        if (sel.isNextNodeMultiple) {\r\n          await service.approveByTaskId(data.taskId, {\r\n            action: \"complete\",//审核类型\r\n            assignee: \"\",\r\n            nextNodeId: sel.nextNodeId,\r\n            assignments: sel.nextUsers || [],//会签参与人\r\n            message: sel.message,\r\n            variables: this.variables,\r\n            signObject: null,\r\n            elements: elements,\r\n            deptCode: opts.deptCode\r\n          });\r\n        } else { // 非会签\r\n          await service.approveByTaskId(data.taskId, {\r\n            action: \"complete\",//审核类型\r\n            nextNodeId: sel.nextNodeId,\r\n            assignment: sel.nextUsers ? sel.nextUsers[0] : null,\r\n            message: sel.message,\r\n            variables: this.variables,\r\n            signObject: null,\r\n            elements: elements,\r\n            deptCode: opts.deptCode\r\n          });\r\n        }\r\n      }\r\n\r\n      ret.extra = {\r\n        procInstId: data.id,\r\n        businessKey: opts.businessKey || '',\r\n        procDefId: data.processDefinitionId,\r\n        nodeId: data.nodeId\r\n      }\r\n    } catch (e) {\r\n      ret = utils.getErrorInfo(e);\r\n      this.saveBusying = false;\r\n\r\n    } finally {\r\n      this.closeLoading();\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  @Emit(\"complete\")\r\n  async onComplete(e: any) {\r\n    let ret = { error: 0, message: '' };\r\n\r\n    try {\r\n\r\n      // 检查审批要点\r\n      // 如果要点检查成功，返回elements,否则抛出异常\r\n      let elements = this.checkApproveElements();\r\n\r\n      //this.nodeDataMap.set(this.selectedNodeId, this.selectedUsers);\r\n\r\n      let id = this.options.taskId ? this.options.taskId : this.options.businessKey;\r\n      let deptCode = this.options.deptCode || '';\r\n\r\n      let extra = {};\r\n      if (!this.options.taskId) {\r\n        // 如果按businessKey来审核发，则需要有menuId\r\n        extra = { menuId: this.options.menuId || '' }\r\n      }\r\n\r\n      if (!id) {\r\n        if (config.debug) {\r\n          Toast('taskId|businessKey not found');\r\n        }\r\n\r\n        throw { error: 1, message: 'taskId|businessKey not found' };\r\n      }\r\n\r\n      // 验证签章\r\n      // 如果signRequire为true, 则如果节点配置了签章，则必须要签章\r\n      // if (this.node.sign === '1' &&\r\n      //   this.options.signType &&\r\n      //   this.options.signRequired && !this.signObject) {\r\n      //   throw { error: 1, message: '请签章后再审批' };\r\n      // }\r\n      // 根据taskid或businessKey审核\r\n      let approve = this.options.taskId ? service.approveByTaskId : service.approveByBusinessKey;\r\n\r\n      // 替换$_为fvar_, 避免表达式错误\r\n      let variables = this.variables.map(v => {\r\n        return { ...v, name: v.name.replace('$_', 'fvar_') }\r\n      })\r\n\r\n      this.saveBusying = true;\r\n      this.openLoading();\r\n      // 调用审核方法前，检查签章并保存\r\n      // if (this.node.sign === '1' && this.signObject) {\r\n      //   await this.saveSignData(this.signObject);\r\n      // }\r\n\r\n      // 审核url和titlｅ\r\n      // 用于任务中心显示和跳转\r\n      let bizTitle = '';\r\n      let bizUrl = '';\r\n      if (this.options.bizExtra) {\r\n        bizTitle = this.options.bizExtra.bizTitle || '';\r\n        bizUrl = this.options.bizExtra.bizUrl || '';\r\n      }\r\n\r\n      // 当前节点是否允许选人\r\n      if (this.node.isCheckUsers == \"1\") {\r\n\r\n        var users: Array<Assignment> = [];\r\n        if (this.selectedUsers && this.selectedUsers.length > 0) {\r\n          users = this.selectedUsers.map((u: User) => {\r\n            return {\r\n              assignee: u.userCode,\r\n              assigneeName: u.userName,\r\n              assigneeType: 'user'\r\n            }\r\n          })\r\n        }\r\n\r\n\r\n        // 如果下一节点为抢占模式\r\n        if (this.nextIsPreemptMode) {\r\n          await approve(id, {\r\n            action: \"complete\",\r\n            nextNodeId: this.selectedNodeId,\r\n            users: users,\r\n            message: this.approveText,\r\n            variables: variables,\r\n            signObject: null,\r\n            elements: elements,\r\n            deptCode: deptCode,\r\n            bizTitle,\r\n            bizUrl,\r\n            ...extra\r\n          });\r\n        } else {  // 非抢占\r\n\r\n          // 是否会签\r\n          if (this.nextNodeIsMultiple) {\r\n            await approve(id, {\r\n              action: \"complete\",//审核类型\r\n              assignee: \"\",\r\n              nextNodeId: this.selectedNodeId,\r\n              assignments: users || [],//会签参与人\r\n              message: this.approveText,\r\n              variables: variables,\r\n              signObject: null,\r\n              elements: elements,\r\n              deptCode: deptCode,\r\n              bizTitle,\r\n              bizUrl,\r\n              ...extra\r\n            });\r\n          } else { // 非会签\r\n            await approve(id, {\r\n              action: \"complete\",//审核类型\r\n              nextNodeId: this.selectedNodeId,\r\n              assignment: users ? users[0] : null,\r\n              message: this.approveText,\r\n              variables: variables,\r\n              signObject: null,\r\n              elements: elements,\r\n              deptCode: deptCode,\r\n              bizTitle,\r\n              bizUrl,\r\n              ...extra\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        // 不选人直接送审\r\n        await approve(id, {\r\n          action: \"complete\",\r\n          message: this.approveText,\r\n          variables: variables,\r\n          deptCode: deptCode,\r\n          signObject: null,\r\n          elements: elements,\r\n          bizTitle,\r\n          bizUrl,\r\n          ...extra\r\n        });\r\n      }\r\n    } catch (e) {\r\n      ret = utils.getErrorInfo(e);\r\n    } finally {\r\n      this.saveBusying = false;\r\n      this.closeLoading();\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  @Emit(\"cancel\")\r\n  onCancel(e: any) {\r\n    return false;\r\n  }\r\n\r\n  get locale() {\r\n    return { emptyText: '当前没有数据' };\r\n  }\r\n\r\n  openLoading() {\r\n    Indicator.open({\r\n      text: '正在处理...',\r\n      spinnerType: 'fading-circle'\r\n    });\r\n  }\r\n\r\n  closeLoading() {\r\n    Indicator.close();\r\n  }\r\n\r\n  /**\r\n   * 检测审批要点\r\n   */\r\n  checkApproveElements(): Array<any> {\r\n    let ret: Array<any> = [];\r\n    if (this.elements && this.elements.length > 0) {\r\n      console.log('elements', this.elements);\r\n      this.elements.forEach((e: any) => {\r\n        if (!e.selected && e.isRequired === \"1\") {\r\n\r\n          throw { error: 1, message: `\"${e.elementName.length > 10 ? (e.elementName as string).substr(0, 10) + \"...\" : e.elementName}\"为必选要点` }\r\n        }\r\n        ret.push({ id: e.id, name: e.elementName, selected: e.selected ? \"1\" : \"0\" })\r\n      })\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  async mounted() {\r\n    if (this.visible) {\r\n      this.reinit(this.options);\r\n    }\r\n  }\r\n\r\n  destroyed() {\r\n\r\n    // 退出签章连接\r\n    //utils.signExit(this.options.signType || '');\r\n  }\r\n\r\n  /**\r\n   * 再次修改options后打开组件\r\n   * @param options \r\n   */\r\n  async reinit(options: Options) {\r\n    this.options = options;\r\n    if (!utils.checkTriple(\"workflow-approve\",\r\n      ['businessKey', 'taskId', 'procDefId', 'nodeId'],\r\n      ['businessKey', 'menuId'],\r\n      ['businessKey', 'procDefId', 'nodeId'],   // 启动流程时选择模式，点OK后调用onSelect\r\n      options)) {\r\n      if (options.onComplete) {\r\n        options.onComplete({ error: 1, message: '无效的options参数' })\r\n      }\r\n      return;\r\n    }\r\n    this.options.mode = options.mode || 'approve';\r\n\r\n    // 确保deptCode不为undeinfed\r\n    this.options.deptCode = options.deptCode || '';\r\n\r\n    // 发起人\r\n    this.options.creatorCode = options.creatorCode || '';\r\n\r\n    if (options.mode == 'approve') {\r\n      this.config = await utils.getConfig(options);\r\n      if (!this.config) {\r\n        utils.error(`查询工作流信息失败`);\r\n        if (options.onComplete) {\r\n          options.onComplete({ error: 1, message: '查询工作流信息失败' })\r\n        }\r\n        return;\r\n      }\r\n\r\n    } else {\r\n      this.config = {\r\n        procDefId: options.procDefId,\r\n        nodeId: options.nodeId,\r\n        businessKey: options.businessKey\r\n      } as any;\r\n    }\r\n\r\n    console.log('config', options, this.config);\r\n\r\n    // 获取节点属性\r\n    this.node = await service.getNodeInfo({\r\n      procDefId: this.config.procDefId,\r\n      nodeId: this.config.nodeId\r\n    });\r\n\r\n    // 默认显示审批意见\r\n    this.approveFlow = ApproveFlows.Messge;\r\n    this.allowedFlows.push(ApproveFlows.Messge);\r\n\r\n    // 处理审批要点\r\n    if (this.node && this.node.elements && this.node.elements.length > 0) {\r\n      this.elements = this.node.elements;\r\n      this.approveFlow = ApproveFlows.ApproveElements;\r\n      this.allowedFlows.push(ApproveFlows.ApproveElements);\r\n    }\r\n\r\n    // 只有在当前节点指派人的情况才查nextSteps\r\n    if (this.node && this.node.isCheckUsers == \"1\") {\r\n      this.isAllowedUsers = true;\r\n      this.allowedFlows.push(ApproveFlows.Users)\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 选择批语\r\n   */\r\n  handleWordChange(v: any) {\r\n    console.log(`selected`, v);\r\n    this.approveText = v;\r\n  }\r\n\r\n\r\n  /**\r\n   * 删除选择用户\r\n   */\r\n  onRemoveUser(user: User) {\r\n    console.log(`onRemoveUser`, user);\r\n    let index = this.selectedUsers.findIndex((u: User) => u.userCode === user.userCode);\r\n    if (index > -1) {\r\n      this.selectedUsers.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  selectRemarkItem(remark: any) {\r\n    console.log(`selectRemarkItem`, remark);\r\n    this.approveText = remark.text;\r\n  }\r\n\r\n  ok(e: any = null) {\r\n    if (this.options.mode == 'select') {\r\n      this.onSelected(e);\r\n    } else {\r\n      this.onComplete(e)\r\n    }\r\n  }\r\n\r\n\r\n  move(flow: ApproveFlows) {\r\n    this.isBackFromConfirm = true;\r\n    this.approveFlow = flow;\r\n  }\r\n\r\n  back() {\r\n    if (this.isBackFromConfirm) {\r\n      this.approveFlow = ApproveFlows.Confirm;\r\n      this.isBackFromConfirm = false;\r\n      return;\r\n    }\r\n    this.approveFlow = this.approveFlow - 1;\r\n    while (this.approveFlow > 0 && !this.allowedFlows.includes(this.approveFlow)) {\r\n      this.approveFlow = this.approveFlow - 1;\r\n    }\r\n  }\r\n\r\n  next() {\r\n    try {\r\n      if (this.approveFlow == ApproveFlows.ApproveElements) {\r\n        this.checkApproveElements()\r\n      }\r\n      if (this.approveFlow == ApproveFlows.Messge && !this.isAllowedUsers) {\r\n        this.ok();\r\n        return;\r\n      }\r\n\r\n      if (this.approveFlow == ApproveFlows.Users) {\r\n        this.ok();\r\n        return;\r\n      }\r\n      this.approveFlow = this.approveFlow + 1;\r\n      while (this.approveFlow < ApproveFlows.Confirm && !this.allowedFlows.includes(this.approveFlow)) {\r\n        this.approveFlow = this.approveFlow + 1;\r\n      }\r\n      // 当页面是从确认页返回的则，下一步后，直接到确认页\r\n      // if (this.isBackFromConfirm) {\r\n      //   this.approveFlow = ApproveFlows.Confirm;\r\n      // } else {\r\n\r\n      // }\r\n      console.log('flow', this.approveFlow);\r\n    } catch (e) {\r\n      console.log('next', e.message)\r\n      Toast(\"\" + e.message);\r\n    }\r\n\r\n  }\r\n\r\n  render(h: any) {\r\n    let flow = this.approveFlow;\r\n    return (<div class=\"workflow workflow-approve\">\r\n      <w-elements\r\n        visible={this.approveFlow == ApproveFlows.ApproveElements}\r\n        okText={this.isBackFromConfirm ? '确定' : '下一步'}\r\n        elements={this.elements}\r\n        onBack={this.back}\r\n        onOk={this.next} />\r\n\r\n      <w-message\r\n        visible={this.approveFlow == ApproveFlows.Messge}\r\n        okText={!this.isAllowedUsers ? '确定' : '下一步'}\r\n        appCode={this.node.appCode}\r\n        onBack={this.back}\r\n        onOk={(text: string) => {\r\n          this.approveText = text;\r\n          this.next();\r\n        }} ></w-message>\r\n      {\r\n        this.approveFlow == ApproveFlows.Users &&\r\n        <w-selectusers\r\n          visible={this.approveFlow == ApproveFlows.Users}\r\n          okText={'确定'}\r\n          extra={{\r\n            businessKey: this.config.businessKey,\r\n            procDefId: this.config.procDefId,\r\n            appCode: this.node.appCode,\r\n            rgCode: this.node.rgCode,\r\n            unitCode: this.node.unitCode,\r\n            nodeId: this.node.nodeId,\r\n            creatorCode: this.options.creatorCode,\r\n            variables: this.variables.map(v => {\r\n              return { ...v, name: v.name.replace('$_', 'fvar_') }\r\n            })\r\n\r\n          }}\r\n          onBack={this.back}\r\n          onOk={(ret: any) => {\r\n            this.selectedUsers = ret.users;\r\n            this.selectedNodeId = ret.selectedNodeId;\r\n            this.nextIsPreemptMode = ret.nextIsPreemptMode;\r\n            this.nextNodeIsMultiple = ret.nextNodeIsMultiple;\r\n            this.next();\r\n          }}\r\n        />\r\n      }\r\n\r\n      <w-confirm\r\n        visible={this.approveFlow == ApproveFlows.Confirm}\r\n        flows={this.allowedFlows}\r\n        elements={this.elements}\r\n        approveText={this.approveText}\r\n        users={this.selectedUsers}\r\n        onBack={this.back}\r\n        onMove={this.move}\r\n        onOk={this.ok} />\r\n    </div >\r\n    );\r\n  }\r\n\r\n}\r\n","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\r\nimport * as service from \"../services\";\r\nimport { FbpmStatus, Options, WorkflowInfo } from '../models';\r\nimport { Toast } from 'mint-ui';\r\n// import { message, notification } from 'ant-design-vue';\r\nimport * as utils from '../utils';\r\nimport config from \"../services/config\";\r\nimport Empty from \"../components/empty\";\r\nimport List from '../components/list';\r\nimport Sep from '../components/sep';\r\n\r\n//import '../styles/style.less'\r\nconst REMARK_TYPE = 'back';\r\nconst columns = [\r\n  {\r\n    title: \"节点名称\",\r\n    dataIndex: \"nodeName\",\r\n    key: \"nodeName\"\r\n  },\r\n\r\n];\r\n\r\ninterface Node {\r\n  nodeName: string;\r\n}\r\n\r\nenum NodeType {\r\n  Prev = FbpmStatus.ACTION_BACK_PREV,\r\n  First = FbpmStatus.ACTION_BACK_FIRST,\r\n  Any = FbpmStatus.ACTION_BACK_ANY\r\n}\r\n\r\n\r\n@Component({\r\n  components: {\r\n    \"aw-empty\": Empty,\r\n    \"w-list\": List,\r\n    \"w-sep\": Sep\r\n  }\r\n})\r\nexport default class WorkflowReject extends Vue {\r\n\r\n  isRemarkPopup: boolean = false;\r\n  isNodeListPopup: boolean = false;\r\n  isNodeTypePopup: boolean = false;\r\n  saveAsRemark: boolean = false;\r\n\r\n  // 当前节点\r\n  node: any;\r\n\r\n  // 批语列表\r\n  remarks: Array<any> = [];\r\n\r\n  // 节点列表\r\n  nodes: Array<any> = [];\r\n\r\n  // 节点类型列表\r\n  nodeTypes: Array<any> = [\r\n    { label: '上一节点', value: NodeType.Prev },\r\n    { label: '第一节点', value: NodeType.First },\r\n    { label: '任一节点', value: NodeType.Any }\r\n  ];\r\n\r\n  text: string = '';\r\n  nodeType: NodeType = NodeType.Prev;\r\n  backNodeName: string = '上一节点';\r\n  selectedNodeId: any = '';\r\n  backNode: any;\r\n\r\n  buttonBusying: boolean = false;\r\n  // 加载node列表\r\n  loadingNodeList: boolean = false;\r\n  //config!: Options;\r\n\r\n  @Prop({ default: false }) visible!: boolean;\r\n  @Prop() options!: Options;\r\n\r\n\r\n  @Watch('visible')\r\n  onVisibleChanged(val: boolean, oldVal: boolean) {\r\n    if (val) {\r\n      this.reload();\r\n    }\r\n  }\r\n\r\n  @Watch('options')\r\n  onOptionsChanged(val: Options, oldVal: Options) {\r\n    if (this.visible && val) {\r\n      this.reload();\r\n    }\r\n  }\r\n\r\n  @Emit(\"complete\")\r\n  async onOk(e: any) {\r\n\r\n    let ret = { error: 0, message: '' }\r\n    try {\r\n      this.buttonBusying = true;\r\n      let selectedNodeId = '';\r\n\r\n      if (!this.options.procInstId) {\r\n        throw { error: 1, message: 'options找不到procInstId' };\r\n      }\r\n\r\n      if (!this.options.taskId) {\r\n        throw { error: 1, message: 'options找不到taskId' };\r\n      }\r\n\r\n      let backType = this.nodeType;\r\n      if (this.nodeType == NodeType.Prev ||   // 上一切点\r\n        this.nodeType == NodeType.First ||    // 第一节点\r\n        (this.nodeType === NodeType.Any && this.node.isReject === \"0\")) {  // 任意节点情况下，并且流程模型预设了任意节点\r\n\r\n        // 获取要返回上节点信息\r\n        let node = await service.getBackNodeInfo({\r\n          backType: backType,\r\n          procDefId: this.options.procDefId,\r\n          procInstId: this.options.procInstId,\r\n          nodeId: this.options.nodeId\r\n        });\r\n\r\n        selectedNodeId = node.nodeId;\r\n      } else {\r\n        selectedNodeId = this.backNode.nodeId;\r\n      }\r\n\r\n      // url和titlｅ\r\n      // 用于任务中心显示和跳转\r\n      let bizTitle = '';\r\n      let bizUrl = '';\r\n      if (this.options.bizExtra) {\r\n        bizTitle = this.options.bizExtra.bizTitle || '';\r\n        bizUrl = this.options.bizExtra.bizUrl || '';\r\n      }\r\n      // 替换$_为fvar_, 避免表达式错误\r\n      let variables = (this.options.variables || []).map(v => {\r\n        return { ...v, name: v.name.replace('$_', 'fvar_') }\r\n      })\r\n\r\n      console.log('getBackNodeInfo', selectedNodeId);\r\n      await service.back(this.options.taskId, {\r\n        // 驳回类型 back_first, back_prev, back_any\r\n        backType: backType,\r\n        variables: variables,\r\n        bizUrl,\r\n        bizTitle,\r\n        // 要撤销的节点的id\r\n        currentActivityIds: [this.node.nodeId],\r\n\r\n        // 要退回到的节点id\r\n        targetActivityIds: [selectedNodeId],\r\n        message: this.text\r\n      });\r\n    } catch (e) {\r\n      ret = utils.getErrorInfo(e);\r\n    } finally {\r\n      this.buttonBusying = false;\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  @Emit(\"cancel\")\r\n  back(e: any) {\r\n    return false;\r\n  }\r\n\r\n  async mounted() {\r\n    if (this.visible) {\r\n      this.reload();\r\n    }\r\n  }\r\n\r\n  async reload() {\r\n    if (!utils.check(\"workflow-back\", ['procInstId', 'procDefId', 'nodeId', 'taskId'], this.options)) {\r\n      if (this.options.onComplete) {\r\n        this.options.onComplete({ error: 1, message: '无效的options参数' })\r\n      }\r\n      return;\r\n    }\r\n\r\n    // 获取节点属性\r\n    this.node = await service.getNodeInfo({\r\n      procDefId: this.options.procDefId,\r\n      nodeId: this.options.nodeId\r\n    });\r\n    console.log(\"node\", this.node);\r\n\r\n    // 如果流程模型配置了返回类型，则isReject == \"0\"\r\n    // 则直接读出来，不在当前页选择返回到哪个节点\r\n    if (this.node.isReject === \"0\") {\r\n      this.nodeType = this.node.backType;\r\n    }\r\n\r\n    // 设置驳回默认文本\r\n    this.text = config.getData('back.text') || '';\r\n\r\n    // 获取批语列表\r\n    this.getRemarkList();\r\n  }\r\n\r\n  async loadNodeList() {\r\n\r\n    if (this.nodeType == NodeType.Any) {\r\n\r\n      try {\r\n        this.loadingNodeList = true;\r\n        // 获取可返回的节点列表\r\n        let data = await service.getAvaliableBackNodeList({\r\n          procInstId: this.options.procInstId,\r\n          nodeId: this.options.nodeId\r\n        });\r\n\r\n        this.nodes = data || [];\r\n\r\n        // 默认选中第一个节点\r\n        // if (data && data.length > 0) {\r\n        //   this.backNode = data[0];\r\n        //   this.selectedNodeId = data[0].nodeId;\r\n        // }\r\n      } finally {\r\n        this.loadingNodeList = false;\r\n      }\r\n\r\n    } else {\r\n      this.nodes = [];\r\n    }\r\n  }\r\n\r\n  selectNode(node: any) {\r\n    console.log('selectNode', node);\r\n    this.selectedNodeId = node.nodeId;\r\n    this.backNode = node;\r\n  }\r\n\r\n  /**\r\n   * 输入批语\r\n   */\r\n  onInputChange(e: any) {\r\n    console.log(`onInputChange`, e);\r\n    // this.text = e.target.value;\r\n    this.text = e;\r\n  }\r\n\r\n\r\n  render(h: any) {\r\n    return (\r\n      <div class=\"workflow workflow-revoke\">\r\n        <mt-popup class=\"workflow-page\" value={this.visible}>\r\n          <mt-header title=\"审批意见\">\r\n            <mt-button slot=\"left\" icon=\"back\" onClick={this.back}>返回</mt-button>\r\n          </mt-header>\r\n          <mt-cell title=\"退回节点\" value={this.backNodeName} isLink={true} nativeOnClick={() => {\r\n            this.isNodeTypePopup = true\r\n          }}>\r\n          </mt-cell>\r\n          <w-sep />\r\n          <mt-cell title=\"常用批语\" value=\"\" isLink={true} nativeOnClick={() => {\r\n            this.isRemarkPopup = true\r\n            this.getRemarkList();\r\n          }}>\r\n          </mt-cell>\r\n          <mt-field placeholder=\"请填写审批意见\" type=\"textarea\" rows=\"4\" value={this.text} onInput={this.onInputChange} ></mt-field>\r\n          <mt-cell title=\"存为常用批语\">\r\n            <mt-switch value={this.saveAsRemark} onInput={(v) => this.saveAsRemark = v}></mt-switch>\r\n          </mt-cell>\r\n          <div class=\"workflow-page-actions\">\r\n            <mt-button type=\"primary\" onClick={async (e) => {\r\n              if (this.saveAsRemark) {\r\n                try {\r\n                  await service.isRemarkDup({\r\n                    appCode: this.node.appCode,\r\n                    comLang: this.text,\r\n                    type: REMARK_TYPE\r\n                  });\r\n                  await service.saveRemark({\r\n                    appCode: this.node.appCode,\r\n                    text: this.text,\r\n                    type: REMARK_TYPE\r\n                  });\r\n                } catch (e) {\r\n                  Toast('批语已存在, 不能保存重复批语');\r\n                  return;\r\n                }\r\n              }\r\n              this.onOk(e);\r\n            }}>确定</mt-button>\r\n          </div>\r\n        </mt-popup>\r\n        <mt-popup class=\"workflow-page\" value={this.isRemarkPopup}>\r\n          <mt-header title=\"常用批语\">\r\n            <mt-button slot=\"left\" icon=\"back\" onClick={() => this.isRemarkPopup = false}>返回</mt-button>\r\n          </mt-header>\r\n          <w-list\r\n            onChange={(v, item) => {\r\n              this.isRemarkPopup = false;\r\n              this.text = item.label;\r\n            }}\r\n            dataSource={this.remarks.map((remark) => {\r\n              return { value: remark.id, label: remark.text }\r\n            })}>\r\n          </w-list>\r\n        </mt-popup>\r\n        <mt-popup class=\"workflow-page\" value={this.isNodeTypePopup}>\r\n          <mt-header title=\"选择节点\">\r\n            <mt-button slot=\"left\" icon=\"back\" onClick={() => this.isNodeTypePopup = false}>返回</mt-button>\r\n          </mt-header>\r\n          <w-list\r\n            onChange={(v, item) => {\r\n\r\n              //this.text = item.label;\r\n\r\n              if (v === NodeType.Any) {\r\n                this.isNodeListPopup = true;\r\n                this.loadNodeList();\r\n              } else {\r\n                this.nodeType = v;\r\n                this.backNodeName = item.label;\r\n                this.isNodeTypePopup = false;\r\n              }\r\n            }}\r\n            dataSource={this.nodeTypes}>\r\n          </w-list>\r\n        </mt-popup>\r\n        <mt-popup class=\"workflow-page\" value={this.isNodeListPopup}>\r\n          <mt-header title=\"选择节点\">\r\n            <mt-button slot=\"left\" icon=\"back\" onClick={() => this.isNodeListPopup = false}>返回</mt-button>\r\n          </mt-header>\r\n          <w-list\r\n            onChange={(v, item) => {\r\n              this.isNodeListPopup = false;\r\n              this.isNodeTypePopup = false;\r\n\r\n              this.nodeType = NodeType.Any;\r\n              this.selectedNodeId = v;\r\n              this.backNode = item;\r\n              this.backNodeName = item.label;\r\n            }}\r\n            dataSource={this.nodes.map((node) => {\r\n              return {\r\n                label: node.nodeName,\r\n                value: node.nodeId,\r\n                nodeId: node.nodeId\r\n              };\r\n            })}>\r\n          </w-list>\r\n        </mt-popup>\r\n      </div>\r\n      // <aw-modal\r\n      //   centered\r\n      //   title={this.options.title || '驳回'}\r\n      //   class=\"workflow workflow-revoke\"\r\n      //   onCancel={this.onCancel}\r\n      //   onOk={(e: any) => this.onOk(e)}\r\n      //   visible={this.visible}\r\n      //   footer={[\r\n      //     <aw-button key=\"back\" onClick={this.onCancel}>\r\n      //       取消\r\n      //     </aw-button>,\r\n      //     <aw-button key=\"submit\" loading={this.buttonBusying} type=\"primary\" onClick={this.onOk}>\r\n      //       确定\r\n      //     </aw-button>\r\n      //   ]}\r\n      // >\r\n      //   {\r\n      //     (this.node && this.node.isReject == '1') && <div>\r\n      //       <aw-row class=\"workflow-line bottom-space\">\r\n      //         <span class=\"title\">选择节点</span>\r\n      //         <span>\r\n      //           <aw-radio-group onChange={this.onNodeTypeChanged} value={this.nodeType}>\r\n      //             <aw-radio value={NodeType.Prev}>上一节点</aw-radio>\r\n      //             <aw-radio value={NodeType.First}>第一节点</aw-radio>\r\n      //             <aw-radio value={NodeType.Any}>任一节点</aw-radio>\r\n      //           </aw-radio-group>\r\n      //         </span>\r\n      //       </aw-row>\r\n      //       <aw-row>\r\n      //         <aw-col>\r\n      //           <aw-list\r\n      //             class=\"workflow-revoke-list\"\r\n      //             bordered={true}\r\n      //             loading={this.loadingNodeList}\r\n      //             locale={{ emptyText: <aw-empty height={100} /> }}\r\n      //             dataSource={this.nodes}\r\n      //             renderItem={(item: any) => <aw-list-item class={`workflow-revoke-item ${item.nodeId == this.selectedNodeId ? 'active' : ''}`} onClick={() => this.selectNode(item)}>{item.nodeName}</aw-list-item>}\r\n      //           >\r\n      //           </aw-list>\r\n      //         </aw-col>\r\n      //       </aw-row>\r\n      //     </div>\r\n      //   }\r\n      //   <aw-row class=\"workflow-line\">\r\n      //     <aw-col span={3} class=\"title\">常用批语: </aw-col>\r\n      //     <aw-col span={21}>\r\n      //       <aw-dropdown class=\"workflow-remark-button\">\r\n      //         <aw-menu slot=\"overlay\" class=\"workflow-remark\">\r\n      //           {\r\n      //             this.remarks && this.remarks.length > 0 ?\r\n      //               this.remarks.map((remark: any) =>\r\n      //                 <aw-menu-item key={remark.id} >\r\n      //                   <span class=\"workflow-remark-text\" onClick={(e: any) => {\r\n      //                     this.selectRemarkItem(remark)\r\n      //                   }} >{utils.limitShowRemark(remark.text)}</span>\r\n      //                   {\r\n      //                     remark.type == 'private' &&\r\n      //                     <span class=\"workflow-remark-actions\">\r\n      //                       <aw-icon onClick={(e: any) => {\r\n      //                         this.starRemarkItem(remark);\r\n      //                       }} type=\"star\" theme={remark.flag && \"filled\"} />\r\n      //                       <aw-icon onClick={() => this.deleteRemarkItem(remark)} type=\"delete\" />\r\n      //                     </span>\r\n      //                   }\r\n      //                 </aw-menu-item>) : <aw-menu-item>当前还没有批语</aw-menu-item>\r\n      //           }\r\n      //         </aw-menu>\r\n      //         <aw-button style=\"margin-left: 8px\">\r\n      //           请选择常用批语 <aw-icon type=\"down\" />\r\n      //         </aw-button>\r\n      //       </aw-dropdown>\r\n      //     </aw-col>\r\n      //   </aw-row>\r\n      //   <aw-row class=\"workflow-line\">\r\n      //     <aw-col>\r\n      //       <aw-textarea\r\n      //         rows={2}\r\n      //         maxLength={50}\r\n      //         value={this.text}\r\n      //         placeholder=\"请输入批语\"\r\n      //         onChange={this.onInputChange}\r\n      //       />\r\n      //     </aw-col>\r\n      //   </aw-row>\r\n      //   <aw-row class=\"workflow-line\">\r\n      //     <aw-col>\r\n      //       <aw-button type=\"primary\" ghost disabled={!this.text} onClick={async () => {\r\n      //         try {\r\n      //           await service.isRemarkDup({\r\n      //             appCode: this.node.appCode,\r\n      //             comLang: this.text,\r\n      //             type: REMARK_TYPE\r\n      //           });\r\n\r\n      //         } catch (e) {\r\n      //           message.error(\"批语已存在, 不能保存重复批语\")\r\n      //           return;\r\n      //         }\r\n\r\n      //         await service.saveRemark({\r\n      //           appCode: this.node.appCode,\r\n      //           text: this.text,\r\n      //           type: REMARK_TYPE\r\n      //         });\r\n      //         message.success('批语保存成功');\r\n      //         this.getRemarkList();\r\n      //       }} >\r\n      //         另存为新批语\r\n      //       </aw-button>\r\n      //     </aw-col>\r\n      //   </aw-row>\r\n      // </aw-modal>\r\n    );\r\n  }\r\n\r\n  // 获取批语列表\r\n  private async getRemarkList() {\r\n    this.remarks = await service.getRemarkList({\r\n      appCode: config.appCode,\r\n      //userCode: config.userCode,\r\n      size: 10,\r\n      type: REMARK_TYPE\r\n    });\r\n  }\r\n\r\n}\r\n","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\n\n@Component\nexport class Step extends Vue {\n    @Prop() title!: string;\n    @Prop() description!: string;\n    @Prop() status!: string;\n    @Prop() icon!: any;\n    render(h) {\n        const title = this.title || '';\n        const description = this.description || '';   \n        // console.log(description);     \n        return <div class={`workflow-step-${this.status}`}>\n            <div class={`workflow-item-tail`}></div>\n            <div class={`workflow-item-icon`}>{this.icon}</div>\n            <div class={`workflow-item-content`}>\n                <div class={`workflow-item-title`}>{title}</div>\n                {description && <div class={`workflow-item-description`}>{description}</div>}\n            </div>\n        </div>\n    }\n}\n\n@Component({\n    components: {\n        \"w-step\": Step,\n    }\n})\nexport default class Steps extends Vue {\n    render(h) {\n        return <div class=\"workflow-steps\">\n            {this.$slots.default}\n        </div>\n    }\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\nimport moment from \"moment\";\nimport * as service from \"../../services\";\n//import { IconApproved, IconStart, IconEnd, IconProcess, IconNone } from '../../components/svgs';\nimport { TaskState, Options, Locale, AdminConfig } from '../../models';\nimport * as utils from '../../utils';\nimport Steps, { Step } from '../../components/steps';\nimport Icon from '../../components/icon';\n// import WorkflowTraceFlowchart from '../workflow-trace-flowchart'\n\n// 最大显示的用户数\nconst MAX_USER_COUNT = 5;\n\nconst ServerTaskStateMapping = {\n\n    // 已提交\n    \"001\": TaskState.Submitted,\n\n    // 审批中（待办任务-未读未办）\n    \"002\": TaskState.Process,\n\n    // 审批中（待办任务-已读未办）\n    \"003\": TaskState.Process,\n\n    // 已认领（待办任务-已读未办--抢占特有的状态）\n    \"004\": TaskState.Process,\n\n    // 已完成\n    \"005\": TaskState.Approved,\n\n    // 被驳回（被退回）\n    \"006\": TaskState.Process,\n\n    // 已驳回（已退回）\n    \"007\": TaskState.Back,\n\n    // 被撤销\n    \"008\": TaskState.Process,\n\n    // 委托 (当前不支持)\n    \"009\": TaskState.NotStart,\n\n    // 已撤销\n    \"010\": TaskState.Cancel,\n\n    // 已送审\n    \"011\": TaskState.Approved,\n\n    // 已废弃\n    \"014\": TaskState.Approved\n\n}\n\nconst defaultLocale: Locale = {\n\n    /**\n     * 已提交\n     */\n    submitted: '已提交',\n\n\n    /**\n     * 待提交\n     */\n    submitting: '待提交',\n\n    /**\n     * 已审核\n     */\n    approved: '已审核',\n\n    /**\n     * 审核中\n     */\n    process: '审核中',\n\n    /**\n     * 已撤销\n     */\n    cancel: '已撤销',\n\n    /**\n     * 已驳回\n     */\n    back: '已驳回',\n\n    /**\n     * 时间显示格式\n     */\n    dateTimeFormat: 'MM-DD HH:mm'\n}\n\n/**\n * 全流程跟踪图\n * 包括未开始节点\n */\n@Component({\n    components: {\n        \"w-steps\": Steps,\n        \"w-step\": Step,\n        \"w-icon\": Icon\n    }\n})\nexport default class WorkflowTraceFull extends Vue {\n    @Prop() options!: Options;\n    @Prop({ default: 'default' }) size!: 'default' | 'large';\n    @Prop({ default: 'default' }) iconStyle!: 'default' | 'simple';\n    @Prop() locale!: Locale;\n    // 如果是竖向显示传值 为:vertical\n    @Prop({ default: 'horizontal' }) direction!: string;\n    @Prop({ default: true }) showChartLink!: boolean;\n    @Watch('options')\n    onOptionsChanged(val: Options, oldVal: Options) {\n        if (val) {\n            this.reload();\n        }\n    }\n\n    // 是否显示用户信息\n    isUserInfoPopup: boolean = false;\n\n    // 审批要点\n    isElementsPopup: boolean = false;\n    elementsInfo: Array<any> = [];\n\n    steps: any = [];\n    userIds: Array<string> = [];\n    users = new Map<string, any>();\n\n    config!: Options;\n\n    userInfo: any = { userName: '' };\n    flowchartVisible: boolean = false;\n\n    adminConfig?: AdminConfig;\n    \n    elementColumns: Array<any> = [\n        {\n            title: \"\",\n            dataIndex: \"isRequired\",\n            key: \"isRequired\",\n            width: 40,\n            align: 'center',\n            customRender: (text, record) => {\n                return this.renderElement(record);\n            }\n        },\n        {\n            title: \"审批要点名称\",\n            dataIndex: \"elementName\",\n            key: \"elementName\",\n            width: 240\n        }\n    ];\n\n\n    public async reload() {\n        if (!utils.checkOr(\"workflow-trace-full\", ['procInstId'], ['businessKey'], this.options)) {\n            if (this.options.onComplete) {\n                this.options.onComplete({ error: 1, message: '无效的options参数' })\n            }\n            return;\n        }\n        // 获取全局配置\n        let adminConfig = await service.getAdminConfig();\n        if (adminConfig) {\n            this.adminConfig = adminConfig;\n        }\n\n        // variables检查\n        let variables = this.options.variables || [];\n        if (variables.length == 0) {\n            utils.error(`workflow-trace-full variables不能为空`, true);\n            if (this.options.onComplete) {\n                this.options.onComplete({ error: 1, message: 'variables不能为空' })\n            }\n            return true;\n        }\n        // console.log('config', this.options);\n        this.config = await utils.getConfig(this.options, { hiddenCancelNodes: false });\n\n        if (!this.config) {\n            utils.error(`查询工作流信息失败`);\n            if (this.options.onComplete) {\n                this.options.onComplete({ error: 1, message: '查询工作流信息失败' })\n            }\n            return true;\n        }\n\n        let data = await service.getWorkflowTraceFullData({\n            procInstId: this.config.procInstId,\n            variables: this.options.variables || []\n        });\n        if (data) {\n            this.steps = await this.getSteps(data || []);\n            console.log('steps', this.steps);\n            let { users } = await this.loadUserNames();\n            this.users = users;\n            // 获取签章数据\n            this.loadSignData();\n\n            // 获取审批要点\n            this.loadApproveElements();\n\n            let elements = document.querySelector('.task-process');\n            if (elements) {\n                (elements as any).focus();\n            }\n\n            // if (process.env.NODE_ENV === 'test') {\n            //     this.$emit('testing-mounted');\n            // }\n\n        }\n    }\n\n    async mounted() {\n        this.reload();\n    }\n\n    async showUserInfo(userCode: string) {\n        this.userInfo = this.users.get(userCode);\n        this.isUserInfoPopup = true;\n        console.log('userinfo', this.userInfo);\n    }\n\n    async showElementsInfo(info: any) {\n        this.elementsInfo = info;\n        this.isElementsPopup = true;\n\n    }\n\n    renderTaskStateText(h, step: any, t: any) {\n\n        let state: TaskState = this.getTaskState(step, t.status);\n        let ret = <div />;\n        console.log(state);\n        let locale = { ...defaultLocale, ...this.locale };\n        if (state == TaskState.Submitted) {\n            ret = <div class=\"task-submit\">{locale.submitted}</div>;\n        } else if (state == TaskState.Submitting) {\n            ret = <div class=\"task-process\" tabindex=\"-1\">{locale.submitting}</div>;\n        } else if (state == TaskState.Approved) {\n            ret = <div class=\"task-approved\">{locale.approved}</div>;\n        } else if (state == TaskState.Process) {\n            ret = <div class=\"task-process\" tabindex=\"-1\">{locale.process}</div>;\n        } else if (state == TaskState.NotStart) {\n            ret = <div class=\"task-none\">{locale.none}</div>;\n        } else if (state == TaskState.Back) {\n            ret = <div class=\"task-back\">{locale.back}</div>;\n        } else if (state == TaskState.Backed) {\n            ret = <div class=\"task-process\">{locale.process}</div>;\n        } else if (state == TaskState.Cancel) {\n            ret = <div class=\"task-cancel\">{locale.cancel}</div>;\n        }\n        // 将状态绑定审批要点\n        if (t.elements && t.elements.length > 0) {\n            return <span style=\"display:inline-block\"><span style=\"display:inline-block\" >{ret}</span> <a class=\"workflow-link\" href=\"javascript:void(0)\" onClick={() => this.showElementsInfo(t.elements)}><w-icon style=\"margin-left: 5px\" class=\"list\" /></a></span>;\n        }\n        return ret;\n    }\n\n    renderTasks(h: any, step: any) {\n        if (!step.tasks) return <div />;\n        let tasks = step.tasks.filter(t => (!t.roleId && !t.user)) as Array<any>;\n        let taskCount = tasks.length;\n        let maxUserCount = this.options.maxUserCount || MAX_USER_COUNT;\n        if (!step.more) {\n            tasks = tasks.slice(0, maxUserCount);\n        }\n        let locale = { ...defaultLocale, ...this.locale };\n\n        let ret = tasks.map((t: any) => {\n\n            return <div>\n                <div class=\"workflow-user\">\n                    <span class=\"workflow-username\" title={t.userName || ''} onClick={() => this.showUserInfo(t.userCode)} >\n                        {(t.roleName || t.roleId) ? `${(t.roleName || t.roleId)}(角色)` : (t.userName || t.userCode || '')}\n                    </span>\n                    <span class=\"workflow-taskstate\">{this.renderTaskStateText(h, step, t)}</span>\n                </div>\n                {\n                    t.signImage &&\n                    <div class=\"workflow-sign-image\">\n                        {<img src={t.signImage} />}\n                    </div>\n                }\n                {\n                    t.status !== TaskState.NotStart && t.message ?\n                        <div class=\"workflow-message\">\n                            <div>\n                                {\n                                    this.options.isMessagePrefix &&\n                                    <span class=\"workflow-messae-pre\">意见:</span>\n                                }\n                                {`${t.message}`}</div>\n                            <div class=\"workflow-time\">{t.endTime && moment(t.endTime, 'YYYY-MM-DD HH:mm:ss.S').format(locale.dateTimeFormat) || ''}</div>\n                        </div> : <div class=\"workflow-time\">{(t.endTime && moment(t.endTime, 'YYYY-MM-DD HH:mm:ss.S').format(locale.dateTimeFormat)) || ''}</div>\n                }\n            </div>\n        });\n        return <div class=\"workflow-tasks\">\n            <div class=\"workflow-task\">\n                {\n                    step.duration > 0 &&\n                    <div class=\"workflow-duration\">{utils.formatMillonSecondsToDays(step.duration)}</div>\n                }\n                {ret}\n                {\n                    taskCount > maxUserCount && <div class=\"more\" onClick={() => {\n                        step.more = !step.more;\n                    }}> {step.more ? <w-icon type=\"up\" /> : <w-icon type=\"down\" />}</div>\n                }\n            </div>\n        </div>\n    }\n\n    renderState(state: number) {\n        if (state == 1) {\n            return 'finish';\n        } else if (state == 2) {\n            return 'process';\n        }\n\n        return 'wait';\n    }\n\n    renderStepIcon(h: any, type: string, state: number) {\n\n        let css = 'workflow-process';\n        switch (type) {\n            case 'startEvent':\n                css = \"workflow-start\";\n                break;\n            case 'endEvent':\n                css = \"workflow-end\";\n                break;\n            case 'userTask':\n                if (state == TaskState.Approved) {\n                    css = \"workflow-approved\";\n                } else if (state == TaskState.Process) {\n                    css = \"workflow-process\";\n                } else if (state == TaskState.NotStart) {\n                    css = \"workflow-none\";\n                }\n                break;\n        }\n\n        switch (state) {\n            case TaskState.Approved:\n                css += ' enabled';\n                break;\n            case TaskState.NotStart:\n            case TaskState.Process:\n                css += ' disabled';\n                break;\n        }\n        return <w-icon class={css} />\n    }\n\n\n    renderTitle(h, step) {\n        let title: string = step.nodeName;\n        // if(title && title.length > 8) {\n        //     title = title.substring(0, 8) + '...'\n        // }\n        return <div title={step.nodeName} >\n            {title}\n        </div>;\n    }\n\n    render(h: any) {\n        // 当前只支持竖样式\n        this.direction = 'vertical';\n        console.log(this.steps);\n        return <div class={`workflow workflow-trace-full ${this.direction} ${this.size}`} >\n            <w-steps direction={this.direction} size=\"small\" labelPlacement=\"horizontal\" class=\"workflow-steps\">\n                {\n                    this.steps.map((step: any) => {\n                        return <w-step class=\"workflow-step\" icon={this.renderStepIcon(h, step.actType, Number(step.status))} status={this.renderState(step.status)} title={this.renderTitle(h, step)} description={this.renderTasks(h, step)} />\n                    })\n                }\n            </w-steps>\n            {\n                this.isUserInfoPopup && this.userInfo &&\n                <div class=\"workflow-bottom-page\">\n                    <mt-popup value={this.isUserInfoPopup} onInput={(v) => {\n                        if (v !== this.isUserInfoPopup) {\n                            this.isUserInfoPopup = v;\n                        }\n                    }} position=\"bottom\">\n                        <mt-cell title=\"姓名:\">{this.userInfo.userName}</mt-cell>\n                        <mt-cell title=\"手机:\" value={this.userInfo.phone}></mt-cell>\n                        <mt-cell title=\"E-Mail:\">{this.userInfo.mail}</mt-cell>\n                        <mt-cell title=\"电话:\">{this.userInfo.tel}</mt-cell>\n                    </mt-popup>\n                </div>\n            }\n            {\n                this.isElementsPopup &&\n                <div class=\"workflow-bottom-page \">\n                    <mt-popup value={this.isElementsPopup} onInput={(v) => {\n                        if (v !== this.isElementsPopup) {\n                            this.isElementsPopup = v;\n                        }\n                    }} position=\"bottom\">\n                        <div class=\"workflow-elements\">\n                        <div class=\"workflow-elements-title\">审批要点: </div>\n                        <div class=\"workflow-elements-content\">\n                        {\n                            this.elementsInfo.map((e: any) => {\n                            return <div class=\"workflow-elements-item\"><span>{e.elementName}</span>{ e.isRequired && <w-icon class=\"check\" primary />} </div>\n                            })\n                        }\n                        </div>\n                        </div>\n                        \n                    </mt-popup>\n                </div>\n            }\n\n        </div>\n    }\n\n    private getTaskState(step: any, status: string) {\n        let state = ServerTaskStateMapping[status];\n\n        // 处理第一岗审核中为待提交\n        // 如果第一岗为已审核，修改状态为已提交\n        if (step.isFirstNode) {\n            if (state == TaskState.Process) {\n                state = TaskState.Submitting;\n            } else if (state == TaskState.Approved) {\n                state = TaskState.Submitted;\n            }\n        }\n        return state;\n    }\n\n    private getSteps(data: Array<any>) {\n        let ret: Array<any> = [];\n        let steps: Array<any> = data;\n\n        let isFirstNodeFound = false;\n        let firstNodeId = '';\n        for (let node of steps) {\n            node.roleIds = [];\n            node.userCodes = [];\n            node.more = false;\n            let isSkipped = false;\n\n            // 查找第一个已审核任务节点\n            if (!isFirstNodeFound && node.actType == 'userTask') {\n                isFirstNodeFound = true;\n                firstNodeId = node.nodeId;\n                node.isFirstNode = true;\n            }\n\n            // 标记第一节点\n            if (node.nodeId == firstNodeId) {\n                node.isFirstNode = true;\n            }\n\n            if (node.tasks) {\n                for (let task of node.tasks) {\n\n                    // 默认一个signImage初始值\n                    task.signImage = null;\n\n                    // 默认审批要点\n                    task.elements = [];\n\n                    // 检查任务是否为已撤销或被撤销\n                    if (this.config.hiddenCancelNodes && (task.status == '010' || task.status == '008')) {\n                        isSkipped = true;\n                    }\n                    if (!task.userName) {\n                        if (task.userCode) {\n                            this.userIds.push(task.userCode);\n                        } else if (task.roleId) {\n                            node.more = false;\n                            node.roleIds.push(task.roleId);\n                        } else if (task.user) {  // 新的抢占，支持有角色，用户\n                            node.more = false;\n                            // 多角色\n                            if (task.user.roleId) {\n                                let roleIds = task.user.roleId.split(',');\n                                node.roleIds.push(...roleIds);\n                            }\n\n                            // 多用户\n                            if (task.user.userCode) {\n                                let userCodes = task.user.userCode.split(',');\n                                this.userIds.push(...userCodes);\n                                node.userCodes.push(...userCodes);\n                            }\n                        }\n                    }\n                }\n            }\n            if (isSkipped) continue;\n            ret.push(node);\n        }\n        return ret;\n    }\n\n    private async loadUserNames() {\n        let data = this.steps;\n        let users = new Map<string, any>();\n        let roles = new Map<string, any>();\n        if (this.userIds) {\n            let names = await service.getUserInfoList({\n                ids: this.userIds.join(','), type: 'user'\n            });\n\n            if (names) {\n                names.forEach(user => {\n                    users.set(user.userCode, user);\n                });\n            }\n        }\n        for (let node of data) {\n            let delegateUserNameMap: Map<string, any> = new Map<string, any>();\n            // 处理代办节点的委托人\n            if (this.options.showDelegatedUserName && node.status === TaskState.Process) {\n                let taskIds = node.tasks.map(t => t.taskId).join(',');\n                let delegatedUsers = await service.getTaskDelegateUsers(taskIds);\n                //console.log('delegatedUsers', delegatedUsers);\n                if (delegatedUsers && delegatedUsers.length > 0) {\n                    delegateUserNameMap = await delegatedUsers.reduce(async (prev: Map<string, any>, cur) => {\n                        let delegatedUserInfos: Array<any> = await service.getUserInfoList({\n                            ids: cur.delegatedUserCode, type: 'user'\n                        });\n                        if (delegatedUserInfos) {\n                            let delegateUser = delegatedUserInfos[0];\n                            prev.set(cur.delegateUserCode, delegateUser);\n                            users.set(delegateUser.userCode, delegateUser);\n                        }\n                        return prev;\n                    }, new Map<string, any>());\n                }\n            }\n\n            if (node.tasks) {\n                // 处理用户名称\n                for (let task of node.tasks) {\n                    if (!task.userName) {\n                        if (task.userCode) {\n                            let u = users.get(task.userCode);\n                            if (u) {\n                                task.userName = u.userName;\n                            } else {\n                                task.userName = task.userCode;\n                            }\n                        }\n                    }\n                }\n                // 处理角色\n                if (node.roleIds && node.roleIds.length > 0) {\n                    if (this.options.showRoleName) {\n                        if(this.adminConfig) {\n                            let names: Array<any> = await service.getRoleInfoListByUrl(this.adminConfig.platform.baseUrl, {\n                                ids: node.roleIds.join(',')\n                            });\n                            if (names) {\n                                // 角色名称\n                                names.forEach((role) => {\n                                    node.tasks.push({\n                                        roleId: role.roleId,\n                                        roleName: role.roleName\n                                    });\n                                })\n                            }\n                        }\n                    } else {\n                        let names = await service.getUserInfoList({\n                            ids: node.roleIds.join(','), type: 'role'\n                        });\n                        if (names) {\n                            names.forEach((u) => {\n                                node.tasks.push({\n                                    userCode: u.userCode,\n                                    userName: u.userName\n                                });\n                                users.set(u.userCode, u);\n                            })\n                        }\n                    }\n                }\n                // 处理多用户\n                if (node.userCodes && node.userCodes.length > 0) {\n                    node.userCodes.forEach(async (userCode) => {\n                        let u = users.get(userCode);\n                        if (u) {\n                            node.tasks.push({\n                                userCode: u.userCode,\n                                userName: u.userName\n                            });\n                        }\n\n                    })\n                }\n            }\n        }\n        return { users, roles };\n    }\n\n    /**\n     * 获取签章数据 \n     */\n    private async loadSignData() {\n        if (this.config.procInstId) {\n            let signList = await service.getSignList(this.config.procInstId);\n            let signMap = new Map<string, string>();\n            if (signList && signList.length > 0) {\n                for (let sign of signList) {\n                    if (sign.signImage) {\n                        signMap.set(sign.taskId, \"data:image/gif;base64,\" + sign.signImage);\n                    }\n                }\n            }\n\n            let steps = this.steps;\n            for (let node of steps) {\n                if (node.tasks) {\n                    for (let task of node.tasks) {\n                        if (signMap.has(task.taskId)) {\n                            //console.log('signImage', signMap.get(task.taskId));\n                            task.signImage = signMap.get(task.taskId);\n                        }\n\n                    }\n\n                }\n            }\n        }\n    }\n\n    private renderElement(record) {\n        if (record.isRequired === \"1\") {\n            return <w-icon class=\"workflow-element-check\" type=\"check\" />;\n        }\n        return <div />;\n    }\n\n    /**\n     * 获取审批要点\n     */\n    private async loadApproveElements() {\n        if (this.config.procInstId) {\n            // console.log(\"loadApproveElements\", this.config.procInstId);\n            let elementsMap = await service.getApproveElementsList(this.config.procInstId);\n            // let map = new Map<string, string>();\n            // if (elementsList && elementsList.length > 0) {\n            //     for (let task of elementsList) {\n            //         if (task.elements) {\n            //             map.set(task.taskId, task.elements);\n            //         }\n            //     }\n            // }\n\n            let steps = this.steps;\n            for (let node of steps) {\n                if (node.tasks) {\n                    for (let task of node.tasks) {\n                        if (elementsMap[task.taskId]) {\n                            // console.log(\"task.elements\", elementsMap[task.taskId]);\n                            task.elements = elementsMap[task.taskId];\n                        }\n                    }\n\n                }\n            }\n        }\n    }\n}\n\n","import { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport * as service from \"../../services\";\nimport { TaskState, Options, Locale } from '../../models';\nimport * as utils from '../../utils';\nimport moment from 'moment';\n\nconst ServerTaskStateMapping = {\n\n    // 已提交\n    \"001\": TaskState.Submitted,\n\n    // 审批中（待办任务-未读未办）\n    \"002\": TaskState.Process,\n\n    // 审批中（待办任务-已读未办）\n    \"003\": TaskState.Process,\n\n    // 已认领（待办任务-已读未办--抢占特有的状态）\n    \"004\": TaskState.Process,\n\n    // 已完成\n    \"005\": TaskState.Approved,\n\n    // 被驳回（被退回）\n    \"006\": TaskState.Back,\n\n    // 已驳回（已退回）\n    \"007\": TaskState.Back,\n\n    // 被撤销\n    \"008\": TaskState.Cancel,\n\n    // 委托 (当前不支持)\n    \"009\": TaskState.NotStart,\n\n    // 已撤销\n    \"010\": TaskState.Cancel,\n\n    // 已送审\n    \"011\": TaskState.Approved,\n    // 已废弃\n    \"014\": TaskState.Approved\n\n}\n\ninterface TraceTask {\n    taskId: string;\n    taskName: string;\n    endTime: string;\n    message: string;\n    state: string;\n    userName: string;\n    userCode: string;\n}\n\nconst defaultLocale: Locale = {\n\n    /**\n     * 已提交\n     */\n    submitted: '已提交',\n\n    /**\n     * 已审核\n     */\n    approved: '已审核',\n\n    /**\n     * 审核中\n     */\n    process: '审核中',\n\n    /**\n     * 已撤销\n     */\n    cancel: '已撤销',\n\n    /**\n     * 已驳回\n     */\n    back: '已驳回',\n\n    /**\n     * 时间显示格式\n     */\n    dateTimeFormat: 'MM-DD HH:mm'\n}\n\n/**\n * 流程跟踪审批记录\n */\n@Component\nexport default class WorkflowTraceList extends Vue {\n    @Prop() options!: Options;\n    @Prop({ default: 'desc' }) sort!: string;\n    @Prop() locale!: Locale;\n    @Prop({ default: '没有审批记录' }) emptyText!: string;\n    @Watch('options')\n    onOptionsChanged(val: Options, oldVal: Options) {\n        if (val) {\n            this.reload();\n        }\n    }\n    config!: Options;\n    columns: any = [\n        {\n            title: '序号',\n            dataIndex: 'index',\n            width: '70px',\n            customRender: (text, record, index) => {\n                return index + 1;\n            }\n        },\n        { title: '任务名称', dataIndex: 'taskName', key: 'taskName' },\n        {\n            title: '审批状态', dataIndex: 'state', key: 'state', customRender: (text, record, index) => {\n                return this.renderTaskStateText(record.state);\n            }\n        },\n        {\n            title: '审批人', dataIndex: 'opUserName', key: 'opUserName', customRender: (text, record, index) => {\n                return record.userName || record.userCode || '';\n            }\n        },\n        {\n            title: '审批意见',\n            dataIndex: 'message',\n            key: 'message',\n            width: '350px'\n        },\n        {\n            title: '审批时间', align: \"right\", dataIndex: 'endTime', key: 'endTime', customRender: (text, record, index) => {\n                let locale = { ...defaultLocale, ...this.locale };\n                return moment(record.endTime, 'YYYY-MM-DD HH:mm:ss.S').format(locale.dateTimeFormat) || ''\n            }\n        }\n    ];\n    tasks: any = [];\n\n    /**\n     * 重新加载\n     */\n    public async reload() {\n        if (!utils.checkOr(\"workflow-trace-list\", ['procInstId'], ['businessKey'], this.options)) {\n            if (this.options.onComplete) {\n                this.options.onComplete({ error: 1, message: '无效的options参数' })\n            }\n            return;\n        }\n        this.config = await utils.getConfig(this.options);\n        if (!this.config) {\n            utils.error(`查询工作流信息失败`);\n            if (this.options.onComplete) {\n                this.options.onComplete({ error: 1, message: '查询工作流信息失败' })\n            }\n            return true;\n        }\n        let data = await service.getWorkflowTraceListData({ procInstId: this.config.procInstId, sort: this.sort });\n        if (data) {\n            this.tasks = data || [];\n\n            // 查询用户名称\n            this.updateUserNames(this.tasks);\n\n        }\n    }\n\n    async mounted() {\n        this.reload();\n    }\n\n\n    render(h: any) {\n        return <div class={`workflow-trace-list`}>\n            <aw-table\n                bordered={true}\n                columns={this.columns}\n                dataSource={this.tasks}\n                rowKey=\"taskId\"\n                locale={{ emptyText: this.emptyText }}\n                pagination={false}\n            />\n        </div>\n    }\n\n    renderTaskStateText(serverTaskState: string) {\n        let state: TaskState = ServerTaskStateMapping[serverTaskState];\n        let ret = <div />;\n        let locale = { ...defaultLocale, ...this.locale };\n        if (state == TaskState.Submitted) {\n            ret = <div class=\"task-approved\">{locale.submitted}</div>;\n        } else if (state == TaskState.Approved) {\n            ret = <div class=\"task-approved\">{locale.approved}</div>;\n        } else if (state == TaskState.Process) {\n            ret = <div class=\"task-process\">{locale.process}</div>;\n        } else if (state == TaskState.NotStart) {\n            ret = <div class=\"task-none\">{locale.none}</div>;\n        } else if (state == TaskState.Back) {\n            ret = <div class=\"task-back\">{locale.back}</div>;\n        } else if (state == TaskState.Backed) {\n            ret = <div class=\"task-process\">{locale.process}</div>;\n        } else if (state == TaskState.Cancel) {\n            ret = <div class=\"task-cancel\">{locale.cancel}</div>;\n        }\n        return ret;\n    }\n\n    private async updateUserNames(tasks: Array<TraceTask>) {\n        let users: any = {};\n        let count = 0;\n        for (let task of tasks) {\n            if (!task.userName) {\n                users[task.userCode] = task;\n                count++;\n            }\n        }\n\n        if (count > 0) {\n            let userInfoList = await service.getUserInfoList({\n                ids: Object.keys(users).join(','), type: 'user'\n            });\n\n            let userMap: any = {};\n            for (let u of userInfoList) {\n                userMap[u.userCode] = u;\n            }\n\n            for (let task of tasks) {\n                if (!task.userName) {\n                    let user = userMap[task.userCode];\n                    if (user) {\n                        task.userName = user.userName;\n                    }\n                }\n            }\n        }\n\n    }\n}\n\n","import {Vue} from 'vue-property-decorator';\r\nexport const EventBus = new Vue({})","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\r\nimport * as service from \"../services\";\r\nimport { TabContainer, TabContainerItem, Toast } from 'mint-ui';\r\nimport * as utils from '../utils';\r\nimport { TaskState } from '../models';\r\nimport BScroll from 'better-scroll'\r\nimport Search from '../components/search';\r\nimport moment from 'moment';\r\nimport Empty from '../components/empty';\r\nimport './style.less'\r\n\r\n// declare function require(string): string;\r\n// const NoDataImage = require('../../assets/images/nodata.png');\r\n\r\nconst ServerTaskStateMapping = {\r\n\r\n  // 已提交\r\n  \"001\": TaskState.Submitted,\r\n\r\n  // 审批中（待办任务-未读未办）\r\n  \"002\": TaskState.Process,\r\n\r\n  // 审批中（待办任务-已读未办）\r\n  \"003\": TaskState.Process,\r\n\r\n  // 已认领（待办任务-已读未办--抢占特有的状态）\r\n  \"004\": TaskState.Process,\r\n\r\n  // 已完成\r\n  \"005\": TaskState.Approved,\r\n\r\n  // 被驳回（被退回）\r\n  \"006\": TaskState.Process,\r\n\r\n  // 已驳回（已退回）\r\n  \"007\": TaskState.Back,\r\n\r\n  // 被撤销\r\n  \"008\": TaskState.Process,\r\n\r\n  // 委托 (当前不支持)\r\n  \"009\": TaskState.NotStart,\r\n\r\n  // 已撤销\r\n  \"010\": TaskState.Cancel,\r\n\r\n  // 已送审\r\n  \"011\": TaskState.Approved,\r\n\r\n  // 已废弃\r\n  \"014\": TaskState.Approved\r\n\r\n}\r\n\r\n@Component({\r\n  components: {\r\n    'w-search': Search,\r\n    'w-empty': Empty\r\n  }\r\n})\r\nexport default class DoneContainer extends Vue {\r\n  @Prop({ default: 5 }) rows!: number;\r\n  @Prop({ default: '' }) userCode!: number;\r\n  @Prop({ default: '' }) roleId!: number;\r\n  @Prop({ default: '' }) name!: number;\r\n  searchText: string = '';\r\n  page: number = 1;\r\n  doneTaskList: Array<any> = [];\r\n  isEmpty: boolean = false;\r\n  loading: boolean = true;\r\n  show: boolean = false;\r\n  showDown: boolean = false;\r\n\r\n  async openUrl(url, businessKey, type) {\r\n    const arg: any = utils.parseQueryString(url);\r\n    if (arg.interfaceType && arg.interfaceType == 1) {\r\n      try {\r\n        const res = await service.advanceAsk(url, {\r\n          \"appType\": \"mobile\",\r\n          \"businessKey\": businessKey,\r\n          \"urlType\": type\r\n        })\r\n        this.$router.push({\r\n          path: res.url,\r\n          query: {\r\n            urlType: type,\r\n            bizTypeCode: res.bizTypeCode,\r\n            appCode: res.appCode,\r\n            procInstId: res.procInstId,\r\n            procDefId: res.procDefId,\r\n            businessKey: res.businessKey,\r\n            nodeId: res.nodeId,\r\n            taskId: res.taskId\r\n          }\r\n        })\r\n      } catch (e) {\r\n      }\r\n\r\n    } else {\r\n      this.$router.push({ path: url })\r\n    }\r\n  }\r\n\r\n  mounted() {\r\n    this.loading = true;\r\n    this.getTaskDoneList();\r\n    let scroll = new BScroll(this.$refs.taskContainer, {\r\n      scrollY: true,\r\n      click: true,\r\n      bounce: {\r\n        top: true,\r\n        bottom: true\r\n      },\r\n      pullDownRefresh: {\r\n        threshold: 30,\r\n        stop: 20,\r\n        fade: true\r\n      },\r\n      pullUpLoad: {\r\n        threshold: -50\r\n      }\r\n    })\r\n    scroll.on('pullingDown', async () => {\r\n      this.loading = true;\r\n      this.page = 1;\r\n      this.doneTaskList = [];\r\n      this.getTaskDoneList();\r\n      scroll.finishPullDown();\r\n      scroll.refresh();\r\n    })\r\n    scroll.on('pullingUp', async () => {\r\n      this.page = this.page + 1;\r\n      this.getTaskDoneList('upload');\r\n      this.showDown = false;\r\n      scroll.finishPullUp();\r\n    })\r\n\r\n    scroll.on('scroll', (pos) => {\r\n      if (document.body.clientHeight - (pos.y) - (this.$refs.pageContainer as any).clientHeight > 50) {\r\n        this.showDown = true;\r\n      }\r\n      // if (-document.body.clientHeight - (pos.y - 119) > -200) {\r\n      //   this.showDown = true;\r\n      // }\r\n    })\r\n  }\r\n  onSearch(v: string) {\r\n    this.loading = true;\r\n    this.searchText = v;\r\n    this.getTaskDoneList();\r\n  }\r\n  async getTaskDoneList(upload?:string) {\r\n    const taskDoneList = await service.getTaskDoneList({\r\n      page: this.page,\r\n      rows: this.rows,\r\n      userCode: this.userCode,\r\n      roleId: this.roleId,\r\n      name: this.searchText\r\n    });\r\n    if (upload === 'upload') {\r\n      this.doneTaskList.push(...utils.matchColor(taskDoneList.rows));\r\n    } else {\r\n      this.doneTaskList = utils.matchColor(taskDoneList.rows);\r\n      \r\n    }\r\n    this.isEmpty = taskDoneList.rows.length > 0 ? false : true;\r\n    this.loading = false;\r\n  }\r\n  render(h: any) {\r\n    return <div>\r\n      <w-search value=\"enen\"\r\n        onSearch={(key) => this.onSearch(key)}>\r\n      </w-search>\r\n      {\r\n        !this.isEmpty &&\r\n        <div class=\"workflow-page-infinite-list\" ref=\"taskContainer\">\r\n          <div ref=\"pageContainer\">\r\n          <mt-tab-container class=\"page-container\" value=\"1\">\r\n            <mt-tab-container-item id=\"1\">\r\n              {\r\n                this.doneTaskList.map((val) => {\r\n                  return <div class=\"workflow-task-content\" onClick={() => this.openUrl(val.url, val.businessKey, 'done')}>\r\n                    <div class=\"workflow-task-tit\">\r\n                      <span class=\"workflow-task-bizTypeName\" style={{ color: val.textColor, backgroundColor: val.bgColor }}>{val.bizTypeName}</span>\r\n                      <span class=\"workflow-task-code\">{val.field1}</span>\r\n                      <span class=\"workflow-task-time\">{moment(val.taskEndTime, 'YYYY-MM-DD HH:mm:ss.S').format(\"YYYY-MM-DD HH:mm\")}</span>\r\n                    </div>\r\n                    <div class=\"workflow-task-middle\">\r\n                      <span class=\"workflow-task-peoples\">{val.field2}</span>\r\n                      <span class=\"workflow-task-departmentApprove\">{val.nodeName}</span>\r\n                    </div>\r\n                    <div class=\"workflow-task-bottom\">\r\n                      <span class=\"workflow-task-department\">{val.field3}</span>\r\n                      <span class=\"workflow-task-price\">{val.field4}</span>\r\n                    </div>\r\n                    <div class=\"workflow-task-reason\"><span>{val.field5}</span></div>\r\n                    <div class=\"div-relative\">\r\n                      <div class={`workflow-circle-out ${this.getTaskCssName(val.state).ret}`}>\r\n                        <div class=\"workflow-circle-in flex\"><span class=\"workflow-task-billstatus\">{this.getTaskCssName(val.state).retName}</span></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                })\r\n              }\r\n              <p>\r\n              {\r\n                this.showDown &&\r\n                <div class=\"before-trigger\">\r\n                  <span>加载中</span> &nbsp;&nbsp; <i class=\"workflow-loading\"></i>\r\n                </div>\r\n              }\r\n            </p>\r\n            </mt-tab-container-item>\r\n          </mt-tab-container>\r\n          </div>\r\n        </div>\r\n      }\r\n      {\r\n        this.isEmpty &&\r\n        <div class=\"workflow-noInfo\">\r\n          <w-empty></w-empty>\r\n        </div>\r\n      }\r\n      {\r\n          this.loading &&\r\n          <p class=\"workflow-page-infinite-loading\" ref=\"infiniteLoading\">\r\n            <mt-spinner type=\"fading-circle\"></mt-spinner>\r\n            加载中...\r\n          </p>\r\n        }\r\n    </div>\r\n  }\r\n\r\n  private getTaskCssName(status: string): any {\r\n    let state = ServerTaskStateMapping[status];\r\n    let ret = '';\r\n    let retName = '';\r\n    if (state) {\r\n      switch (state) {\r\n        case TaskState.Approved:\r\n          ret = \"workflow-out-agree\";\r\n          retName = '已同意';\r\n          break;\r\n        case TaskState.Cancel:\r\n          ret = \"workflow-out-stay\";\r\n          retName = '已驳回';\r\n          break;\r\n        case TaskState.Back:\r\n          ret = \"workflow-out-stay\";\r\n          retName = '已驳回';\r\n      }\r\n    }\r\n    return {\r\n      ret: ret,\r\n      retName: retName\r\n    };\r\n  }\r\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\nimport * as service from \"../services\";\nimport config from \"../services/config\";\nimport { Toast } from 'mint-ui';\nimport * as utils from '../utils';\n//import { message, notification } from 'ant-design-vue';\nimport { BatchOptions } from '../models';\n\nconst REMARK_TYPE = 'approve';\n\n@Component\nexport default class WorkflowBatchApprove extends Vue {\n  // 当前批语\n  approveText: string = \"\";\n\n  // 批语列表\n  remarks: Array<any> = [];\n\n  searchText: string = '';\n  userPage: number = 0;\n  userPageCount: number = 1;\n  userTotal: number = 0;\n\n  // 保存忙碌状态\n  saveBusying: boolean = false;\n\n  // 签章数据\n  signObject: any = null;\n\n  @Prop({ default: '' }) title!: string;\n  @Prop({ default: false }) visible!: boolean;\n  @Prop() options!: BatchOptions;\n\n  @Watch('visible')\n  onVisibleChanged(val: boolean, oldVal: boolean) {\n    if (val) {\n      this.reinit(this.options);\n    }\n  }\n\n  @Watch('options')\n  onOptionsChanged(val: BatchOptions, oldVal: BatchOptions) {\n    if (this.visible && val) {\n      this.reinit(val);\n    }\n  }\n\n  @Emit(\"complete\")\n  async onOk(e: any) {\n    let ret = { error: 0, message: '' };\n\n    try {\n\n      if (!this.options || !this.options.list || this.options.list.length == 0) {\n        throw { code: 1, msg: '请选择批量送审的单据' }\n      }\n      // 获取taskIds\n      let taskIds = this.options.list.map((task: any) => task.taskId);\n      if (!taskIds || taskIds.length == 0) {\n        throw { code: 1, msg: '请选择批量送审的单据' }\n      }\n\n      // 验证签章\n      // 如果signRequire为true, 则如果节点配置了签章，则必须要签章\n      if (this.options.signType &&\n        this.options.signRequired && !this.signObject) {\n        throw { error: 1, message: '请签章后再审批' };\n      }\n\n      this.saveBusying = true;\n      let data = {\n        userCode: config.userCode,\n        signObject: this.signObject,\n        message: this.approveText,\n        taskFormRequests: this.options.list.map((task: any) => {\n          return {\n            businessKey: task.businessKey,\n            variables: task.variables\n          }\n        })\n      }\n      await service.batchApprove(taskIds.join(','), data);\n      return ret;\n    } catch (e) {\n      ret = utils.getErrorInfo(e);\n    } finally {\n      this.saveBusying = false;\n    }\n\n    return ret;\n  }\n\n  @Emit(\"cancel\")\n  onCancel(e: any) {\n    return false;\n  }\n\n  async mounted() {\n    if (this.visible) {\n      this.reinit(this.options);\n    }\n  }\n\n  destroyed() {\n    // 退出签章连接\n    //utils.signExit(this.options.signType || '');\n  }\n\n  /**\n   * 再次修改options后打开组件\n   * @param options \n   */\n  async reinit(options: BatchOptions) {\n    this.options = options;\n\n    // 如果节点配置为签章并且组合件配置了签章类型\n    console.log(\"options\", this.options);\n    if (this.options.signType) {\n      // utils.signInit(this.options.signType || '');\n    }\n\n    this.approveText = config.getData('approve.text') || '';\n\n    // 获取批语列表\n    this.getRemarkList();\n  }\n\n  /**\n   * 选择批语\n   */\n  handleWordChange(v: any) {\n    console.log(`selected`, v);\n    this.approveText = v;\n  }\n\n  /**\n   * 输入批语\n   */\n  onInputChange(e: any) {\n    console.log(`onInputChange`, e);\n    this.approveText = e.target.value;\n  }\n\n  /**\n   * 星标批语\n   */\n  async starRemarkItem(remark: any) {\n    //e.preventDefault();\n    console.log(`starRemarkItem`, remark);\n    await service.starRemark({\n      id: remark.id,\n      flag: remark.flag == 1 ? 0 : 1\n    });\n    Toast(remark.flag == 1 ? '取消批语星标成功' : '添加批语星标成功');\n    this.getRemarkList();\n  }\n\n  async deleteRemarkItem(remark: any) {\n    console.log(`deleteRemarkItem`, remark);\n    // Modal.confirm({\n    //   title: '确定要删除该批语吗?',\n    //   //content: '点击确定删除, ',\n    //   okText: \"确认\",\n    //   cancelText: \"取消\",\n    //   onOk: async () => {\n    //     await service.deleteRemark(remark.id);\n    //     message.success('批语删除成功');\n    //     this.getRemarkList();\n    //   },\n    //   onCancel() { },\n    // });\n\n  }\n\n  selectRemarkItem(remark: any) {\n    console.log(`selectRemarkItem`, remark);\n    this.approveText = remark.text;\n  }\n\n  render(h: any) {\n    return (\n      <div></div>\n      // <aw-modal\n      //   centered\n      //   title={this.options.title || '审批'}\n      //   class=\"workflow workflow-approve\"\n      //   visible={this.visible}\n      //   maskClosable={false}\n      //   onCancel={this.onCancel}\n      //   footer={[\n      //     <aw-button key=\"back\" onClick={this.onCancel}>\n      //       取消\n      //     </aw-button>,\n      //     <aw-button key=\"submit\" loading={this.saveBusying} type=\"primary\" onClick={(e) => {\n      //       this.onOk(e)\n      //     }}>\n      //       确定\n      //     </aw-button>\n      //   ]}\n      // >\n      //   <aw-row class=\"workflow-line\">\n      //     <aw-col span={3} class=\"title\">常用批语: </aw-col>\n      //     <aw-col span={21}>\n      //       <aw-dropdown class=\"workflow-remark-button\">\n      //         <aw-menu slot=\"overlay\" class=\"workflow-remark\">\n      //           {\n      //             this.remarks && this.remarks.length > 0 ?\n      //               this.remarks.map((remark: any) =>\n      //                 <aw-menu-item key={remark.id} >\n      //                   <span class=\"workflow-remark-text\" onClick={(e: any) => {\n      //                     this.selectRemarkItem(remark)\n      //                   }} >{utils.limitShowRemark(remark.text)}</span>\n      //                   {\n      //                     remark.type == 'private' &&\n      //                     <span class=\"workflow-remark-actions\">\n      //                       <aw-icon title=\"星标批语\" onClick={(e: any) => {\n      //                         this.starRemarkItem(remark);\n      //                       }} type=\"star\" theme={remark.flag && \"filled\"} />\n      //                       <aw-icon title=\"删除批语\" onClick={() => this.deleteRemarkItem(remark)} type=\"delete\" />\n      //                     </span>\n      //                   }\n      //                 </aw-menu-item>) : <aw-menu-item>当前还没有批语</aw-menu-item>\n      //           }\n      //         </aw-menu>\n      //         <aw-button style=\"margin-left: 8px\">\n      //           请选择常用批语 <aw-icon type=\"down\" />\n      //         </aw-button>\n      //       </aw-dropdown>\n      //     </aw-col>\n      //   </aw-row>\n      //   <aw-row class=\"workflow-line\">\n      //     <aw-col id=\"message-container\">\n      //       <aw-textarea\n      //         id=\"approve-message\"\n      //         ref=\"approveMessage\"\n      //         maxLength={50}\n      //         rows={2}\n      //         value={this.approveText}\n      //         placeholder=\"请输入批语\"\n      //         onChange={this.onInputChange}\n      //       />\n      //     </aw-col>\n      //   </aw-row>\n      //   <aw-row class=\"workflow-line\">\n      //     <aw-col>\n      //       <aw-button type=\"primary\" disabled={!this.approveText} ghost onClick={async () => {\n      //         try {\n      //           await service.isRemarkDup({\n      //             appCode: config.appCode,\n      //             comLang: this.approveText,\n      //             type: REMARK_TYPE\n      //           });\n\n      //         } catch (e) {\n      //           message.error('批语已存在, 不能保存重复批语');\n      //           return;\n      //         }\n\n      //         await service.saveRemark({\n      //           appCode: config.appCode,\n      //           text: this.approveText,\n      //           type: REMARK_TYPE\n      //         });\n      //         message.success('批语保存成功');\n      //         this.getRemarkList();\n      //       }} >\n      //         另存为新批语\n      //       </aw-button>\n      //       {\n      //         this.options.signType &&\n      //         <aw-button type=\"primary\" style=\"margin-left:8px\" onClick={async () => {\n      //           try {\n      //             let messageInputBox: any = this.$refs.approveMessage;\n      //             utils.sign(this.options.signType || '', {\n      //               left: messageInputBox.$el.clientWidth - 80,\n      //               top: messageInputBox.$el.clientHeight - 40,\n      //               imgWidth: 80,\n      //               imgHeight: 40,\n      //               defaultSignText: ' ',\n      //               containerId: \"message-container\",\n      //               fieldId: \"approve-message\",\n      //               onSuccess: async (signData, signMethod, imgData) => {\n      //                 this.signObject = {\n      //                   signImage: imgData,\n      //                   signType: this.options.signType,\n      //                   signMethod: signMethod,\n      //                   signMessage: this.approveText,\n      //                   signData: signData\n      //                 };\n      //               }\n      //             });\n      //           } catch (e) {\n      //             message.error(e.message);\n      //             return;\n      //           }\n      //         }} >\n      //           签章\n      //         </aw-button>\n      //       }\n      //     </aw-col>\n      //   </aw-row>\n      // </aw-modal>\n    );\n  }\n\n  // 获取批语列表\n  private async getRemarkList() {\n    this.remarks = await service.getRemarkList({\n      appCode: config.appCode,\n      userCode: config.userCode,\n      size: 10,\n      type: REMARK_TYPE\n    });\n  }\n\n  /**\n   * 保存签章数据\n   */\n  private async saveSignData(data) {\n    return service.saveSignData(data);\n  }\n\n}\n","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\nimport * as service from \"../services\";\nimport config from \"../services/config\";\nimport { Toast, MessageBox } from 'mint-ui';\nimport * as utils from '../utils';\n// import { message, notification } from 'ant-design-vue';\nimport { DelegateOptions, Options, WorkflowInfo, Assignment } from '../models';\nimport Empty from '../components/empty';\n\n// import '../styles/style.less'\nconst PAGE_SIZE = 10;\nconst columns = [\n    {\n        title: \"单位\",\n        dataIndex: \"unitName\",\n        key: \"unitName\",\n        width: 180\n    },\n    {\n        title: \"部门\",\n        dataIndex: \"deptName\",\n        key: \"deptName\",\n        width: 130\n    },\n    {\n        title: \"姓名\",\n        dataIndex: \"userName\",\n        key: \"userName\",\n        //width: 80\n    },\n    {\n        title: \"编号\",\n        dataIndex: \"userCode\",\n        key: \"userCode\"\n    }\n];\n\ninterface User {\n    userCode: string;\n    userName: string;\n    deptName: string;\n    unitName: string;\n}\n\n/**\n * 代办/转办\n */\n@Component({\n    components: {\n        \"aw-empty\": Empty\n    }\n})\nexport default class WorkflowDelegate extends Vue {\n    // 当前意见\n    approveText: string = \"\";\n\n    searchText: string = '';\n    userPage: number = 0;\n    userPageCount: number = 1;\n    userTotal: number = 0;\n\n    userList: Array<User> = [];\n    currentUsers: Array<User> = [];\n    userMap: Map<string, User> = new Map();\n\n    steps: Array<any> = [];\n    selectedNodeId: string = \"\";\n\n    defaultUnit: any = \"\";\n    units: Array<any> = [];\n\n    orgs: Array<any> = [];\n    defaultOrgId: string = \"\";\n    defaultOrgType: string = \"\";\n\n    config!: Options;\n    buttonBusying: boolean = false;\n\n    @Prop({ default: '' }) title!: string;\n    @Prop({ default: () => [] }) variables!: Array<any>;\n\n    @Prop({ default: false }) visible!: boolean;\n    @Prop() options!: DelegateOptions;\n\n    @Prop() action!: string;\n\n    @Watch('visible')\n    onVisibleChanged(val: boolean, oldVal: boolean) {\n        if (val) {\n            this.reload(this.options);\n        }\n    }\n\n    @Watch('options')\n    onOptionsChanged(val: DelegateOptions, oldVal: DelegateOptions) {\n        if (this.visible && val) {\n            this.reload(val);\n        }\n    }\n\n    @Emit(\"complete\")\n    async onOk(e: any) {\n        let ret = { error: 0, message: '' };\n        try {\n            this.buttonBusying = true;\n            let id = this.config.taskId ? this.config.taskId : this.config.businessKey;\n            if (!id) {\n                if (config.debug) {\n                    MessageBox(\"错误\", 'taskId|businessKey not found')\n                }\n\n                throw { code: 1, msg: 'taskId|businessKey not found' };\n            }\n\n            var users: Array<Assignment> = [];\n            if (this.currentUsers && this.currentUsers.length > 0) {\n                users = this.currentUsers.map((u: User) => {\n                    return {\n                        assignee: u.userCode,\n                        assigneeName: u.userName,\n                        assigneeType: 'user'\n                    }\n                })\n            }\n\n            if (!this.action) {\n                throw { code: 1, msg: `未设置action(delegate|transfer)` };\n            }\n\n            if (users.length == 0) {\n                throw { code: 1, msg: `请选择${this.title}人员` };\n            }\n\n            // 根据taskid或businessKey审核\n            let approve = this.config.taskId ? service.approveByTaskId : service.approveByBusinessKey;\n            await approve(id, {\n                action: this.action,\n                assignment: users ? users[0] : null,\n                message: this.approveText\n            });\n\n        } catch (e) {\n            ret.error = e.code || 1;\n            ret.message = e.message;\n            if (e.code) {\n                ret.message = e.msg;\n            }\n        } finally {\n            this.buttonBusying = false;\n        }\n\n        return ret;\n    }\n\n    @Emit(\"cancel\")\n    onCancel(e: any) {\n        return false;\n    }\n\n    get locale() {\n        return { emptyText: '当前没有数据' };\n    }\n\n    get users() {\n        return this.currentUsers;\n    }\n\n    async mounted() {\n        if (this.visible) {\n            this.reload(this.options);\n        }\n    }\n\n    /**\n     * 再次修改options后打开组件\n     * @param options \n     */\n    async reload(options: DelegateOptions) {\n        this.options = options;\n        if (!utils.checkOr(\"workflow-delegate\",\n            ['taskId', 'unitCode'],\n            ['businessKey', 'unitCode'],\n            options)) {\n            if (this.options.onComplete) {\n                this.options.onComplete({ error: 1, message: '无效的options参数' })\n            }\n            return;\n        }\n\n        this.config = await utils.getConfig(options);\n        console.log('config', options, this.config);\n\n        if(this.action == 'delegate') {\n            this.approveText = config.getData('delegate.text') || '';\n        } else if(this.action == 'transfer') {\n            this.approveText = config.getData('transfer.text') || '';\n        }\n        \n\n        this.units = await service.getUnits(this.options.unitCode, '');\n        if (this.units && this.units.length > 0) {\n            this.defaultUnit = this.units[0].value;\n            this.orgs = await service.getOrgs(this.defaultUnit, '', true);\n\n            if (this.orgs && this.orgs.length > 0) {\n                this.defaultOrgId = this.orgs[0].value;\n                this.defaultOrgType = this.orgs[0].type;\n                this.searchUserList(this.defaultOrgType, this.defaultOrgId, 1, '');\n            }\n        }\n\n    }\n\n    /**\n     * 选择左侧树节点查询人员\n     */\n    async selectDeptTreeNode(keys: Array<string>, e: any) {\n        console.log('selectTreeNode', e.node);\n        if (keys && keys.length > 0) {\n            this.defaultOrgId = keys[0];\n        }\n        this.defaultOrgType = e.node.$attrs.type;\n        this.searchText = \"\";\n        this.searchUserList(this.defaultOrgType, this.defaultOrgId, 1, \"\");\n    }\n\n    /**\n     * 选择单位树\n     */\n    async handleUnitChange(v: any) {\n        console.log(\"handleUnitChange\", v);\n        this.defaultUnit = v;\n        this.orgs = await service.getOrgs(v, '', true);\n\n        if (this.orgs && this.orgs.length > 0) {\n            this.selectDeptTreeNode([this.orgs[0].id], { node: { $attrs: { type: this.orgs[0].type } } });\n        }\n    }\n\n    /**\n     * 搜索用户\n     */\n    onSearch(v: string) {\n        console.log(\"search\", v);\n        this.searchText = v;\n        this.searchUserList(this.defaultOrgType, this.defaultOrgId, 1, v);\n    }\n\n    /**\n    * 输入批语\n    */\n    onInputChange(e: any) {\n        console.log(`onInputChange`, e);\n        this.approveText = e.target.value;\n    }\n\n    /**\n     * 删除选择用户\n     */\n    onRemoveUser(user: User) {\n        console.log(`onRemoveUser`, user);\n        let index = this.currentUsers.findIndex((u: User) => u.userCode === user.userCode);\n        if (index > -1) {\n            this.currentUsers.splice(index, 1);\n        }\n    }\n\n    // 选择用户\n    get rowSelection() {\n        return {\n            type: \"radio\",\n            onChange: (selectedRowKeys: any, selectedRows: any) => {\n                let unselectedKeys = (this.userList || [])\n                    .map((u: User) => u.userCode)\n                    .filter(v => !selectedRowKeys.includes(v));\n\n                let keys = this.currentUsers.filter(\n                    (u: User) => unselectedKeys.indexOf(u.userCode) == -1\n                );\n                selectedRows.forEach((row: User) => {\n                    if (keys.findIndex((u: User) => u.userCode === row.userCode) == -1) {\n                        keys.push(row);\n                    }\n                    if (!this.userMap.has(row.userCode)) {\n                        this.userMap.set(row.userCode, row);\n                    }\n                });\n                this.currentUsers = keys;\n            },\n            selectedRowKeys: this.currentUsers.map((u: User) => u.userCode)\n        };\n    }\n\n    render(h: any) {\n        let isTextMessage = this.options.isTextMessage;\n        return (\n            <div></div>\n            // <aw-modal\n            //     centered\n            //     title={this.options.title || ''}\n            //     class=\"workflow workflow-delegate\"\n            //     visible={this.visible}\n            //     maskClosable={false}\n            //     onCancel={this.onCancel}\n            //     footer={[\n            //         <aw-button key=\"back\" onClick={this.onCancel}>\n            //             取消\n            //         </aw-button>,\n            //         <aw-button key=\"submit\" type=\"primary\" loading={this.buttonBusying} onClick={(e) => {\n            //             this.onOk(e)\n            //         }}>\n            //             确定\n            //         </aw-button>\n            //     ]}\n            // >\n            //     <div>\n            //         <aw-row class=\"workflow-line bottom\">\n            //             <aw-col span={6} class=\"workflow-delegate-tree\">\n            //                 <aw-tree-select\n            //                     showSearch\n            //                     searchPlaceholder=\"搜索\"\n            //                     treeDefaultExpandAll\n            //                     class=\"worklfow-units\"\n            //                     value={this.defaultUnit}\n            //                     onChange={this.handleUnitChange}\n            //                     treeData={this.units}\n            //                     filterTreeNode={(inputValue: string, treeNode: any) => {\n            //                         return treeNode.data.props.title.indexOf(inputValue) !== -1;\n            //                     }}\n            //                 >\n            //                 </aw-tree-select>\n            //                 <aw-tree\n            //                     //checkable={false}\n            //                     class=\"workflow-orgs\"\n            //                     showLine={true}\n            //                     //showIcon={true}\n\n            //                     selectedKeys={[this.defaultOrgId]}\n            //                     defaultExpandAll={true}\n            //                     treeDefaultExpandAll={true}\n            //                     onSelect={this.selectDeptTreeNode}\n            //                 //switcherIcon={<aw-icon type=\"down\" />}\n            //                 >\n            //                     {this.showTreeNode(h, this.orgs)}\n            //                 </aw-tree>\n            //             </aw-col>\n            //             <aw-col span={18} class=\"workflow-user-list\">\n            //                 <div class=\"workflow-user-list-header\">\n            //                     <aw-input-search\n            //                         placeholder=\"请输入姓名进行搜索\"\n            //                         onSearch={this.onSearch}\n            //                         style={{ width: 200 }}\n            //                     />\n            //                 </div>\n            //                 <div>\n            //                     <aw-table\n            //                         bordered\n            //                         rowKey=\"userCode\"\n            //                         class=\"workflow-user-list-table\"\n            //                         locale={{ emptyText: <aw-empty height={180} /> }}\n            //                         pagination={{\n            //                             current: this.userPage,\n            //                             pageSize: PAGE_SIZE,\n            //                             total: this.userTotal,\n            //                             size: \"middle\",\n            //                             onChange: (page: any) => {\n            //                                 this.userPage = page;\n            //                                 console.log(\"page\", page);\n            //                                 this.searchUserList(this.defaultOrgType, this.defaultOrgId, page, this.searchText);\n            //                             }\n            //                         }}\n            //                         rowSelection={this.rowSelection}\n            //                         dataSource={[...this.userList]}\n            //                         columns={columns}\n            //                         scroll={{ y: 150, x: 500 }}\n            //                     />\n            //                 </div>\n            //             </aw-col>\n            //         </aw-row>\n            //         <aw-row class=\"workflow-delegate-select\">\n            //             <aw-col span={2}>已选人员: </aw-col>\n            //             <aw-col span={22}>\n            //                 <div class=\"workflow-delegate-tags\">\n            //                     {this.users.map((u: any) => (\n            //                         <aw-tag closable onClose={() => this.onRemoveUser(u)}>\n            //                             {u.userName}\n            //                         </aw-tag>\n            //                     ))}\n            //                 </div>\n            //             </aw-col>\n            //         </aw-row>\n            //     </div>\n            //     {\n            //         isTextMessage &&\n            //         <div>\n            //             <aw-row class=\"workflow-line\">\n            //                 <aw-col span={24} class=\"title left-tag\">意见</aw-col>\n            //             </aw-row>\n            //             <aw-row class=\"workflow-line\">\n            //                 <aw-col>\n            //                     <aw-textarea\n            //                         rows={2}\n            //                         value={this.approveText}\n            //                         placeholder=\"请输入意见\"\n            //                         onChange={this.onInputChange}\n            //                     />\n            //                 </aw-col>\n            //             </aw-row>\n            //         </div>\n            //     }\n\n            // </aw-modal>\n        );\n    }\n\n    private async searchUserList(type: string, key: string, pageNum: number, name: string) {\n\n        let data = await service.getOrgUsers(this.searchText, type, this.options.unitCode, key, pageNum, PAGE_SIZE);\n        if (data) {\n            this.userList = data.rows || [];\n            this.userTotal = data.total;\n            this.userPage = data.page;\n        }\n    }\n\n    private showTreeNode(h: any, data: any) {\n        return data.map((item: any) => {\n            if (item.children && item.children.length > 0) {\n                return (\n                    <aw-tree-node\n                        key={item.id}\n                        value={item.id}\n                        title={item.name}\n                        type={item.type}\n                    //onClick={() => this.selectDeptTreeNode(item)}\n                    // icon={<aw-icon component={IconApproved} />}\n                    >\n                        {this.showTreeNode(h, item.children)}\n                    </aw-tree-node>\n                );\n            }\n            return (\n                <aw-tree-node\n                    key={item.id}\n                    value={item.id}\n                    title={item.name}\n                    type={item.type}\n                // icon={({ selected }) => <aw-icon component={IconApproved} />}\n                //onClick={() => this.selectDeptTreeNode(item)}\n                />\n            );\n        });\n    }\n\n}\n","import Vue from 'vue';\r\nimport { DelegateOptions, Options, FbpmStatus, StartOptions, WorkflowReturnData, BatchOptions } from './models';\r\nimport * as service from './services';\r\nimport config from './services/config';\r\nimport * as utils from './utils';\r\nimport WorkflowApprove from './workflow-approve';\r\nimport WorkflowBatchApprove from './workflow-batch-approve';\r\nimport WorkflowReject from './workflow-reject';\r\nimport WorkflowDelegate from './workflow-delegate';\r\nimport { Assignment } from './models';\r\n\r\n/**\r\n * 默认启动流程参数\r\n */\r\nconst defaultStartOptions = {\r\n  //默认送审第一节点\r\n  approveFirstNode: true,\r\n\r\n  // 默认单位Code\r\n  unitCode: \"\",\r\n\r\n  /**\r\n   * 部门Code,为批派部门负责人时使用\r\n   */\r\n  deptCode: \"\"\r\n};\r\n\r\nexport async function startWorkflow(options: StartOptions) {\r\n\r\n  let ret: WorkflowReturnData = { error: 0, message: '' };\r\n  let opts = { ...defaultStartOptions, ...options };\r\n  if (!utils.check(\"startWorkflow\", ['bizTypeCode', 'businessKey', 'userCode', 'rgCode'], opts)) {\r\n    if (opts.onComplete) {\r\n      ret.error = 1;\r\n      ret.message = \"options中缺少必要参数\";\r\n      opts.onComplete(ret);\r\n    }\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // 替换$_为fvar_, 避免表达式错误\r\n    let variables: any = [];\r\n    if (options.variables) {\r\n      variables = options.variables.map(v => {\r\n        return { ...v, name: v.name.replace('$_', 'fvar_') }\r\n      })\r\n    }\r\n\r\n    // 先判断流程是否已经启动\r\n    let isStarted = await service.isWorkflowStarted(opts.businessKey);\r\n    if (isStarted) {\r\n      ret.error = 1;\r\n      ret.message = \"流程已经启动\";\r\n    } else {\r\n      console.log('aaa', config, config.appCode);\r\n      // 查找第一节点信息\r\n      let node = await service.getFirstNodeInfo({\r\n        appCode: config.appCode,\r\n        bizTypeCode: opts.bizTypeCode,\r\n        rgCode: opts.rgCode,\r\n        unitCode: opts.unitCode,\r\n        userCode: opts.userCode,\r\n        variables: variables\r\n      });\r\n\r\n      // 核验第一节点\r\n      if (!node) {\r\n        ret.error = 1;\r\n        ret.message = \"查询流程定义第一节点错误\";\r\n        opts.onComplete(ret);\r\n        return;\r\n      }\r\n\r\n      // 启动并送审第一节点 \r\n      if (opts.approveFirstNode) {\r\n\r\n        // 第一节点需要指派人\r\n        let isCheckUsers = node.isCheckUsers === \"1\";\r\n        // 否岀弹出审核窗口\r\n        let isTextMessage = opts.isTextMessage === true;\r\n\r\n        // 判断是否强制签名\r\n        let signRequired = node.sign === '1' && opts.signType && opts.signRequired === true;\r\n        if (isCheckUsers || isTextMessage || signRequired) {\r\n          const div = document.createElement('div');\r\n          const el = document.createElement('div');\r\n          div.appendChild(el);\r\n          document.body.appendChild(div);\r\n          let approveInstance;\r\n\r\n          let destry = () => {\r\n            if (approveInstance) {\r\n              approveInstance.$destroy();\r\n              if (div.parentNode) {\r\n                div.parentNode.removeChild(div);\r\n              }\r\n            }\r\n\r\n          }\r\n          let render = (props: any) => {\r\n            return new Vue({\r\n              el: el,\r\n              render: (h) => {\r\n                return <WorkflowApprove\r\n                  options={props.options}\r\n                  variables={props.variables}\r\n                  visible={props.visible}\r\n                  onCancel={props.onCancel}\r\n                  onSelected={props.onSelected} />;\r\n              }\r\n            });\r\n          }\r\n\r\n          let startConfig = {\r\n            visible: true,\r\n            // 表单变量\r\n            variables: variables,\r\n            options: {\r\n              mode: 'select',\r\n              title: opts.title,\r\n              businessKey: opts.businessKey,\r\n              nodeId: node.nodeId,\r\n              procDefId: node.procDefId,\r\n              // 发起人\r\n              creatorCode: node.creatorCode,\r\n              userCode: opts.userCode,\r\n              bizTypeCode: opts.bizTypeCode,\r\n              rgCode: opts.rgCode,\r\n              unitCode: opts.unitCode,\r\n              signType: opts.signType,\r\n              signRequired: opts.signRequired\r\n            },\r\n\r\n            // 取消审核\r\n            onCancel: () => {\r\n              destry();\r\n              if (opts.onCancel) {\r\n                opts.onCancel();\r\n              }\r\n            },\r\n\r\n            // 审核选择\r\n            onSelected: async (selectResult) => {\r\n              if (selectResult.error == 0) {\r\n                destry();\r\n              }\r\n              opts.onComplete(selectResult);\r\n              return;\r\n            }\r\n          }\r\n          approveInstance = render(startConfig);\r\n          return;\r\n        } else {  // 不指派人，则直接送审\r\n\r\n          let data: any = await service.startWorkflow({\r\n            appCode: config.appCode,\r\n            bizTypeCode: opts.bizTypeCode,\r\n            businessKey: opts.businessKey,\r\n            rgCode: opts.rgCode,\r\n            unitCode: opts.unitCode,\r\n            userCode: opts.userCode,\r\n\r\n            // 发起人\r\n            creatorCode: node.creatorCode,\r\n            variables: variables\r\n          });\r\n\r\n          // 直接送审\r\n          await service.approveByTaskId(data.taskId, {\r\n            action: \"complete\",\r\n            message: '',\r\n            variables: variables,\r\n            deptCode: opts.deptCode\r\n          });\r\n\r\n          ret.extra = {\r\n            procInstId: data.id,\r\n            businessKey: options.businessKey,\r\n            procDefId: data.processDefinitionId,\r\n            nodeId: data.nodeId,\r\n\r\n            // 不审核第一节点，则返回第一节点的taskId\r\n            taskId: data.taskId\r\n          }\r\n        }\r\n      } else {  // 不送审第一节点\r\n\r\n        let data: any = await service.startWorkflow({\r\n          appCode: config.appCode,\r\n          bizTypeCode: opts.bizTypeCode,\r\n          businessKey: opts.businessKey,\r\n          rgCode: opts.rgCode,\r\n          unitCode: opts.unitCode,\r\n          userCode: opts.userCode,\r\n          variables: variables\r\n        });\r\n\r\n        ret.extra = {\r\n          procInstId: data.id,\r\n          businessKey: options.businessKey,\r\n          procDefId: data.processDefinitionId,\r\n          nodeId: data.nodeId\r\n        }\r\n      }\r\n    }\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n  }\r\n\r\n  // 完成\r\n  if (opts.onComplete) {\r\n    opts.onComplete(ret);\r\n  }\r\n}\r\n\r\n/**\r\n * 审批流程\r\n * @param options \r\n */\r\nexport async function approve(options: Options) {\r\n\r\n  let ret: WorkflowReturnData = { error: 0, message: '' };\r\n  try {\r\n    if (!utils.checkOr(\"workflow.approve\",\r\n      ['businessKey', 'taskId', 'procDefId', 'nodeId'],\r\n      ['businessKey', 'menuId'],\r\n      options)) {\r\n      throw { code: 1, msg: '【缺少参数】businessKey, taskId, procDefId, nodeId或businessKey, menuId' }\r\n    }\r\n\r\n    let config = await utils.getConfig(options);\r\n    if (!config) {\r\n      utils.error(`查询工作流信息失败`);\r\n      return;\r\n    }\r\n\r\n    // 查询当前节点\r\n    let node = await service.getNodeInfo({\r\n      procDefId: config.procDefId,\r\n      nodeId: config.nodeId\r\n    });\r\n\r\n    // 替换$_为fvar_, 避免表达式错误\r\n    let variables: any = [];\r\n    if (options.variables) {\r\n      variables = options.variables.map(v => {\r\n        return { ...v, name: v.name.replace('$_', 'fvar_') }\r\n      })\r\n    }\r\n\r\n    // (如果节点为第一节点（提交节点）或 不填意见) 并且 不需要指派人\r\n    // 则直接送审\r\n    // 否岀弹出审核窗口\r\n    let isTextMessage = options.isTextMessage === undefined || options.isTextMessage === true;\r\n    if ((!isTextMessage || node.isFirstUserTaskNode === '1') && node.isCheckUsers === '0') {\r\n\r\n      let id = options.taskId ? options.taskId : options.businessKey;\r\n      let approveTask = options.taskId ? service.approveByTaskId : service.approveByBusinessKey;\r\n      if (!id) {\r\n        throw { code: 1, msg: '【请求参数】缺少taskId或businessKey' }\r\n      }\r\n      let extra = {};\r\n      if (!options.taskId) {\r\n        // 如果按businessKey来审核发，则需要有menuId\r\n        extra = { menuId: options.menuId || '' }\r\n      }\r\n\r\n      // 审核url和titlｅ\r\n      // 用于任务中心显示和跳转\r\n      let bizTitle = '';\r\n      let bizUrl = '';\r\n      if (options.bizExtra) {\r\n        bizTitle = options.bizExtra.bizTitle || '';\r\n        bizUrl = options.bizExtra.bizUrl || '';\r\n      }\r\n\r\n      // 直接送审\r\n      await approveTask(id, {\r\n        action: \"complete\",\r\n        message: '',\r\n        bizUrl,\r\n        bizTitle,\r\n        variables: variables,\r\n        deptCode: options.deptCode || '',\r\n        ...extra\r\n      });\r\n\r\n      // 送审完，回调\r\n      if (options.onComplete) {\r\n        options.onComplete(ret);\r\n      }\r\n\r\n    } else {\r\n      const div = document.createElement('div');\r\n      const el = document.createElement('div');\r\n      div.appendChild(el);\r\n      document.body.appendChild(div);\r\n      let approveInstance;\r\n\r\n      let destry = () => {\r\n        if (approveInstance) {\r\n          approveInstance.$destroy();\r\n          if (div.parentNode) {\r\n            div.parentNode.removeChild(div);\r\n          }\r\n        }\r\n      }\r\n      let render = (props: any) => {\r\n        return new Vue({\r\n          el: el,\r\n          render: (h) => {\r\n            return <WorkflowApprove\r\n              options={props.options}\r\n              visible={props.visible}\r\n              variables={props.variables}\r\n              onCancel={props.onCancel}\r\n              onComplete={props.onComplete} />;\r\n          },\r\n        });\r\n      }\r\n\r\n      let approveConfig = {\r\n        visible: true,\r\n        options: options,\r\n        variables: variables,\r\n        // 取消审核\r\n        onCancel: () => {\r\n          destry();\r\n\r\n          if (options.onCancel) {\r\n            options.onCancel();\r\n          }\r\n        },\r\n\r\n        // 审核\r\n        onComplete: async (approveResult) => {\r\n          if (approveResult.error == 0) {\r\n            destry();\r\n          }\r\n          if (options.onComplete) {\r\n            options.onComplete(approveResult);\r\n          }\r\n          return;\r\n        }\r\n      }\r\n      approveInstance = render(approveConfig);\r\n      return;\r\n    }\r\n\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * 委托/代办\r\n * @param options \r\n */\r\nexport async function delegate(options: DelegateOptions) {\r\n  let ret: WorkflowReturnData = { error: 0 }\r\n  try {\r\n    if (!utils.checkOr(\"workflow-delegate\",\r\n      ['taskId', 'unitCode'],\r\n      ['businessKey', 'unitCode'],\r\n      options)) {\r\n      throw { code: 1, msg: 'taskId, unitCode或businessKey, unitCode' }\r\n    }\r\n\r\n    options.title = options.title || '代办';\r\n    const div = document.createElement('div');\r\n    const el = document.createElement('div');\r\n    div.appendChild(el);\r\n    document.body.appendChild(div);\r\n    let instance;\r\n\r\n    let destry = () => {\r\n      if (instance) {\r\n        instance.$destroy();\r\n        if (div.parentNode) {\r\n          div.parentNode.removeChild(div);\r\n        }\r\n      }\r\n    }\r\n    let render = (props: any) => {\r\n      return new Vue({\r\n        el: el,\r\n        render: (h) => {\r\n          return <WorkflowDelegate\r\n            action=\"delegate\"\r\n            options={props.options}\r\n            visible={props.visible}\r\n            onCancel={props.onCancel}\r\n            onComplete={props.onComplete} />;\r\n        },\r\n      });\r\n    }\r\n\r\n    let config = {\r\n      visible: true,\r\n      options: options,\r\n      // 取消审核\r\n      onCancel: () => {\r\n        destry();\r\n\r\n        if (options.onCancel) {\r\n          options.onCancel();\r\n        }\r\n      },\r\n\r\n      // 审核\r\n      onComplete: async (result) => {\r\n        if (result.error == 0) {\r\n          destry();\r\n        }\r\n        if (options.onComplete) {\r\n          options.onComplete(result);\r\n        }\r\n        return;\r\n      }\r\n    }\r\n    instance = render(config);\r\n\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 转办\r\n * @param options \r\n */\r\nexport async function transfer(options: DelegateOptions) {\r\n  let ret: WorkflowReturnData = { error: 0 }\r\n  try {\r\n    if (!utils.checkOr(\"workflow-delegate\",\r\n      ['taskId', 'unitCode'],\r\n      ['businessKey', 'unitCode'],\r\n      options)) {\r\n      throw { code: 1, msg: 'taskId, unitCode或businessKey, unitCode' }\r\n    }\r\n\r\n    options.title = options.title || '转办';\r\n\r\n    const div = document.createElement('div');\r\n    const el = document.createElement('div');\r\n    div.appendChild(el);\r\n    document.body.appendChild(div);\r\n    let instance;\r\n\r\n    let destry = () => {\r\n      if (instance) {\r\n        instance.$destroy();\r\n        if (div.parentNode) {\r\n          div.parentNode.removeChild(div);\r\n        }\r\n      }\r\n    }\r\n    let render = (props: any) => {\r\n      return new Vue({\r\n        el: el,\r\n        render: (h) => {\r\n          return <WorkflowDelegate\r\n            action=\"transfer\"\r\n            options={props.options}\r\n            visible={props.visible}\r\n            onCancel={props.onCancel}\r\n            onComplete={props.onComplete} />;\r\n        },\r\n      });\r\n    }\r\n\r\n    let config = {\r\n      visible: true,\r\n      options: options,\r\n      // 取消审核\r\n      onCancel: () => {\r\n        destry();\r\n\r\n        if (options.onCancel) {\r\n          options.onCancel();\r\n        }\r\n      },\r\n\r\n      // 审核\r\n      onComplete: async (result) => {\r\n        if (result.error == 0) {\r\n          destry();\r\n        }\r\n        if (options.onComplete) {\r\n          options.onComplete(result);\r\n        }\r\n        return;\r\n      }\r\n    }\r\n    instance = render(config);\r\n\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 是否可撤销\r\n * @param options \r\n *        businessKey: 业务单据Id\r\n */\r\nexport async function canTaskRevoke(options: Options): Promise<boolean> {\r\n  if (!utils.check(\"canTaskRevoke\", ['businessKey', 'taskId'], options)) {\r\n    throw { code: 1, msg: '无效的options参数: 需要businessKey和taskId两个参数' }\r\n  }\r\n  let data = await service.canTaskRevokeByBusinessKey(options.businessKey!, options.taskId!);\r\n  return data && data.permitCancel === \"1\";\r\n}\r\n\r\n/**\r\n * 是否可驳回\r\n * @param options \r\n *        businessKey: 业务单据Id\r\n */\r\n// export async function canTaskBack(options: Options): Promise<boolean> {\r\n//   if (!utils.check(\"canTaskRevoke\", ['businessKey'], options)) {\r\n//     return false;\r\n//   }\r\n//   let data = await service.canTaskBackByBusinessKey(options.businessKey);\r\n//   return data.permitBackTask === \"1\";\r\n// }\r\n\r\n/**\r\n * 撤销\r\n * @param options \r\n */\r\nexport async function revoke(options: Options) {\r\n  let ret: WorkflowReturnData = { error: 0, message: '', extra: {} }\r\n  try {\r\n\r\n    if (!utils.checkOr(\"revoke\",\r\n      ['businessKey'], ['procDefId', 'procInstId', 'nodeId'],\r\n      options)) {\r\n      throw { code: 1, msg: 'procDefId, procInstId, nodeId或businessKey' }\r\n    }\r\n\r\n    // url和titlｅ\r\n    // 用于任务中心显示和跳转\r\n    let bizTitle = '';\r\n    let bizUrl = '';\r\n    if (options.bizExtra) {\r\n      bizTitle = options.bizExtra.bizTitle || '';\r\n      bizUrl = options.bizExtra.bizUrl || '';\r\n    }\r\n\r\n    // 替换$_为fvar_, 避免表达式错误\r\n    let variables = (options.variables || []).map(v => {\r\n      return { ...v, name: v.name.replace('$_', 'fvar_') }\r\n    })\r\n\r\n    // 检查是否可撤销\r\n    // if (await canTaskRevoke(options) === false) {\r\n    //   throw { code: 1, msg: '当前任务不允许撤销' };\r\n    // }\r\n    // 按businessKey来撤销\r\n    if (options.businessKey) {\r\n      ret.extra = await service.cancelByBusinessKey(options.businessKey, {\r\n        variables: variables,\r\n        bizUrl,\r\n        bizTitle,\r\n      });\r\n    } else {\r\n      // 获取要撤销的上一节点的id\r\n      let nodes = await service.getNodeCancelStartNodes({\r\n        procDefId: options.procDefId,\r\n        nodeId: options.nodeId,\r\n        procInstId: options.procInstId\r\n      });\r\n      if (nodes && nodes.length > 0) {\r\n        ret.extra = await service.cancel(options.procInstId!, {\r\n          variables: variables,\r\n          bizUrl,\r\n          bizTitle,\r\n          // 要撤销的节点的id\r\n          currentActivityIds: [nodes[0].nodeId],\r\n          // 要退回到的节点id\r\n          targetActivityIds: [options.nodeId]\r\n        });\r\n      }\r\n    }\r\n\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n  }\r\n\r\n  if (options.onComplete) {\r\n    options.onComplete(ret);\r\n  }\r\n}\r\n\r\n/**\r\n * 激活流程\r\n * @param options \r\n *        businessKey  单据Id\r\n *        onComplete   回调\r\n */\r\nexport async function activateWorkflow(options: any) {\r\n\r\n  let ret: WorkflowReturnData = { error: 0, message: '' };\r\n  try {\r\n    if (!utils.check(\"activateWorkflow\", ['businessKey'], options)) {\r\n      throw { code: 1, msg: '【缺少参数】 businessKey' }\r\n    }\r\n\r\n    let data = await service.activateWorkflow(options.businessKey);\r\n    ret.extra = { taskId: data.taskId };\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n  }\r\n\r\n  // 完成\r\n  if (options.onComplete) {\r\n    options.onComplete(ret);\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * 驳回\r\n */\r\nexport async function back(options: Options) {\r\n  console.log('workflow.back', options);\r\n  let ret: WorkflowReturnData = { error: 0, message: '' };\r\n  try {\r\n    if (!utils.check(\"back\", ['procInstId', 'procDefId', 'nodeId', 'taskId'], options)) {\r\n      throw { code: 1, msg: '【缺少参数】procInstId, procDefId, nodeId, taskId' }\r\n    }\r\n\r\n    const div = document.createElement('div');\r\n    const el = document.createElement('div');\r\n    div.appendChild(el);\r\n    document.body.appendChild(div);\r\n    let backInstance;\r\n\r\n    let destry = () => {\r\n      if (backInstance) {\r\n        backInstance.$destroy();\r\n        if (div.parentNode) {\r\n          div.parentNode.removeChild(div);\r\n        }\r\n      }\r\n    }\r\n    let render = (props: any) => {\r\n      return new Vue({\r\n        el: el,\r\n        render: (h) => {\r\n          return <WorkflowReject\r\n            options={props.options}\r\n            visible={props.visible}\r\n            onCancel={props.onCancel}\r\n            onComplete={props.onComplete} />;\r\n        },\r\n      });\r\n    }\r\n\r\n    let config = {\r\n      visible: true,\r\n      options: options,\r\n      // 取消审核\r\n      onCancel: () => {\r\n        destry();\r\n\r\n        if (options.onCancel) {\r\n          options.onCancel();\r\n        }\r\n      },\r\n\r\n      // 审核\r\n      onComplete: async (approveResult) => {\r\n        if (approveResult.error == 0) {\r\n          destry();\r\n        }\r\n        if (options.onComplete) {\r\n          options.onComplete(approveResult);\r\n        }\r\n        return;\r\n      }\r\n    }\r\n    backInstance = render(config);\r\n\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * 获取待办列表\r\n * @param options \r\n *        appCode\t应用编码\r\n *        userCode\t用户编码\r\n *        roleId\t角色ID\r\n *        pageNum\t页码\r\n *        pageSize\t每页条数\r\n *        bizTypeCode\t单据类型code\r\n */\r\nexport async function getWorkflowTasks(options: any) {\r\n  return service.getTasks(options);\r\n}\r\n\r\n/**\r\n * 批量送审\r\n * @param options 送审数据集合\r\n{\r\n  // 送审列表\r\n  list: [ {\r\n    taskId: 任务Id,\r\n    businessKey: 单据Id,\r\n    variables: [], 表单变量集合\r\n  }],\r\n    // 完成回调\r\n    // 完成后的回调\r\n    // ret\r\n    //    error: 错误标记，0: 没有错误\r\n    //                    1: 错误\r\n    //    message: 错误消息\r\n    onComplete: 完成回调\r\n}\r\n */\r\nexport async function batchApprove(options: BatchOptions) {\r\n  console.log('workflow.batchApprove', options);\r\n  let ret: WorkflowReturnData = { error: 0, message: '' };\r\n\r\n  try {\r\n\r\n    let isTextMessage = options.isTextMessage === undefined || options.isTextMessage === true;\r\n    let signRequired = options.signType && options.signRequired === true;\r\n\r\n    // 弹窗审批\r\n    if (isTextMessage || signRequired) {\r\n      const div = document.createElement('div');\r\n      const el = document.createElement('div');\r\n      div.appendChild(el);\r\n      document.body.appendChild(div);\r\n      let approveInstance;\r\n\r\n      let destry = () => {\r\n        if (approveInstance) {\r\n          approveInstance.$destroy();\r\n          if (div.parentNode) {\r\n            div.parentNode.removeChild(div);\r\n          }\r\n        }\r\n      }\r\n      let render = (props: any) => {\r\n        return new Vue({\r\n          el: el,\r\n          render: (h) => {\r\n            return <WorkflowBatchApprove\r\n              options={props.options}\r\n              visible={props.visible}\r\n              onCancel={props.onCancel}\r\n              onComplete={props.onComplete} />;\r\n          },\r\n        });\r\n      }\r\n\r\n      let approveConfig = {\r\n        visible: true,\r\n        options: options,\r\n        // 取消审核\r\n        onCancel: () => {\r\n          destry();\r\n\r\n          if (options.onCancel) {\r\n            options.onCancel();\r\n          }\r\n        },\r\n\r\n        // 审核\r\n        onComplete: async (approveResult) => {\r\n          if (approveResult.error == 0) {\r\n            destry();\r\n          }\r\n          if (options.onComplete) {\r\n            options.onComplete(approveResult);\r\n          }\r\n          return;\r\n        }\r\n      }\r\n      approveInstance = render(approveConfig);\r\n    } else {  // 不弹窗\r\n      if (!options.list || options.list.length == 0) {\r\n        throw { code: 1, msg: '请选择批量送审的单据' }\r\n      }\r\n      // 获取taskIds\r\n      let taskIds = options.list.map((task: any) => task.taskId);\r\n      if (!taskIds || taskIds.length == 0) {\r\n        throw { code: 1, msg: '请选择批量送审的单据' }\r\n      }\r\n      let data = {\r\n        userCode: config.userCode,\r\n        signObject: null,\r\n        message: '',\r\n        taskFormRequests: options.list.map((task: any) => {\r\n          return {\r\n            businessKey: task.businessKey,\r\n            variables: task.variables\r\n          }\r\n        })\r\n      }\r\n      await service.batchApprove(taskIds.join(','), data);\r\n\r\n      // 回调\r\n      if (options.onComplete) {\r\n        options.onComplete(ret);\r\n      }\r\n    }\r\n\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n/**\r\n * 直接送审\r\n * @param options \r\n */\r\nexport async function directApprove(options: any) {\r\n  console.log('workflow.back', options);\r\n  let ret: WorkflowReturnData = { error: 0, message: '' };\r\n  try {\r\n    if (!utils.check(\"workflow.back\", ['taskId'], options)) {\r\n      throw { code: 1, msg: '【缺少参数】taskId' }\r\n    }\r\n\r\n    // 检查是否可送审\r\n    let res = await service.isTaskDirectApprove(options.taskId);\r\n    let isDirectTask = res ? res.isBackTask === '1' : false;\r\n    if (!isDirectTask) {\r\n      throw { code: 1, msg: '当前任务不支持直接送审' }\r\n    }\r\n\r\n    // 审核url和titlｅ\r\n    // 用于任务中心显示和跳转\r\n    let bizTitle = '';\r\n    let bizUrl = '';\r\n    if (options.bizExtra) {\r\n      bizTitle = options.bizExtra.bizTitle || '';\r\n      bizUrl = options.bizExtra.bizUrl || '';\r\n    }\r\n\r\n    // 替换$_为fvar_, 避免表达式错误\r\n    let variables = (options.variables || []).map(v => {\r\n      return { ...v, name: v.name.replace('$_', 'fvar_') }\r\n    })\r\n    // 按任务Id送审\r\n    await service.directApproveByTaskId(options.taskId, {\r\n      bizTitle,\r\n      bizUrl,\r\n      variables,\r\n      userCode: config.userCode\r\n    });\r\n\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * 挂起工作流\r\n * @param options \r\n */\r\nexport async function suspendWorkflow(options: any) {\r\n  console.log('workflow.suspend', options);\r\n  let ret: WorkflowReturnData = { error: 0, message: '' };\r\n  try {\r\n    if (!utils.check(\"workflow.suspend\", ['businessKey'], options)) {\r\n      throw { code: 1, msg: '【缺少参数】businessKey' }\r\n    }\r\n    await service.suspendWorkflow(options.businessKey);\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n  }\r\n}\r\n\r\nexport async function resumeWorkflow(options: any) {\r\n  console.log('workflow.resume', options);\r\n  let ret: WorkflowReturnData = { error: 0, message: '' };\r\n  try {\r\n    if (!utils.check(\"workflow.resume\", ['businessKey'], options)) {\r\n      throw { code: 1, msg: '【缺少参数】businessKey' }\r\n    }\r\n\r\n    await service.resumeWorkflow(options.businessKey);\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n\r\n  } catch (e) {\r\n    ret = utils.getErrorInfo(e);\r\n\r\n    if (options.onComplete) {\r\n      options.onComplete(ret);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 获取流程信息\r\n * @param req \r\n */\r\nexport async function getWorkflowInfo(businessKey: string) {\r\n  return service.getWorkflowInfo(businessKey);\r\n}\r\n\r\n/**\r\n * 获取流程签章数据\r\n * @param procInstId 流程实例Id\r\n */\r\nexport async function getSignData(procInstId: string) {\r\n  return service.getSignList(procInstId);\r\n}\r\n\r\n/**\r\n * 加载组件配置\r\n * /fbpm-modeler/config/components.json\r\n */\r\nexport async function getConfig() {\r\n  return service.getConfig();\r\n}","import * as services from \"./services\";\n\nexport async function isWorkflowEnded(businessKey: string) {\n    try {\n        return services.isWorkflowEnded(businessKey);\n    } catch (e) {\n        return false;\n    }\n}\n\nexport async function isWorkflowStarted(businessKey: string) {\n    try {\n        return services.isWorkflowStarted(businessKey);\n    } catch (e) {\n        return false;\n    }\n}\n\n/**\n * 是否支持直接送审\n * @param taskId \n */\nexport async function isTaskDirectApprove(taskId: string) {\n    try {\n        let res = await services.isTaskDirectApprove(taskId);\n        return res ? res.isBackTask === '1' : false;\n    } catch (e) {\n        return false;\n    }\n\n}","import Vue from 'vue';\nimport WorkflowApprove from './workflow-approve';\nimport WorkflowReject from './workflow-reject';\n//import WorkflowTraceSimple from './workflow-trace/workflow-trace-simple';\nimport WorkflowTraceFull from './workflow-trace/workflow-trace-full';\n//import WorkflowTraceForm from './workflow-trace/workflow-trace-form';\nimport WorkflowTraceList from './workflow-trace/workflow-trace-list';\n//import WorkflowTraceFlowchart from './workflow-trace/workflow-trace-flowchart';\nimport WorkflowTaskCenter from './task-center';\nimport api from './services/api';\nimport * as func from './workflow-func';\nimport * as validator from './validator';\nimport { error } from './utils';\n\nimport { check } from './utils';\n\nimport config from './services/config';\nimport MintUI from 'mint-ui';\n//import 'mint-ui/lib/style.css';\n\n\n// import {\n//     Affix,\n//     Anchor,\n//     AutoComplete,\n//     Alert,\n//     Avatar,\n//     BackTop,\n//     Badge,\n//     Breadcrumb,\n//     Button,\n//     Calendar,\n//     Card,\n//     Collapse,\n//     Carousel,\n//     Cascader,\n//     Checkbox,\n//     Col,\n//     DatePicker,\n//     Divider,\n//     Dropdown,\n//     Form,\n//     Icon,\n//     Input,\n//     InputNumber,\n//     Layout,\n//     List,\n//     LocaleProvider,\n//     message,\n//     Menu,\n//     Modal,\n//     notification,\n//     Pagination,\n//     Popconfirm,\n//     Popover,\n//     Progress,\n//     Radio,\n//     Rate,\n//     Row,\n//     Select,\n//     Slider,\n//     Spin,\n//     Steps,\n//     Switch,\n//     Table,\n//     Transfer,\n//     Tree,\n//     TreeSelect,\n//     Tabs,\n//     Tag,\n//     TimePicker,\n//     Timeline,\n//     Tooltip,\n//     Upload,\n//     Drawer,\n//     Skeleton,\n// } from 'ant-design-vue';\n\nexport * from './models';\nexport * from './workflow-func';\nexport { WorkflowApprove, WorkflowReject };\n//export { reject, canTaskRevoke, revoke, startWorkflow };\n\n/**\n * 默认选项参数\n */\nconst defaultOptions = {\n    debug: false,\n};\n\n/**\n * 配置工作流\n * @param options \n *       debug  （可选） 是否启用调试, 默认为false, 当启用时，在调试过程中会弹出错误提示\n *       authToken  （可选） 如果用户请求接口需要token\n *       userCode   （必填） 用户Code\n *       flowModelerBaseUrl   （必填） 流程模型Modeler地址\n *       flowProcessBaseUrl   （必填） 流程运行process地址\n *       appCode   （必填） 应用编码\n *       rgCode   （必填） 区划编码\n */\nfunction setConfig(options: any) {\n    console.log(\"config\", options);\n    let opts = { ...defaultOptions, ...options };\n    config.setDebug(opts.debug);\n    if (!check(\"workflow.config\", ['userCode', 'appCode', 'rgCode', 'flowModelerBaseUrl', 'flowProcessBaseUrl'], opts)) {\n        return;\n    }\n    api.onError((url: string, e: any) => {\n        let m = e.message;\n        if (e.code) {\n            m = `${e.code}:${e.msg}`;\n            \n        }\n\n        if (opts.debug) {\n            m += ` ${url} `;\n        }\n        error(m);\n    })\n    // if (opts.debug) {\n\n    // }\n    config.setBaseAddress(opts.flowModelerBaseUrl, opts.flowProcessBaseUrl);\n\n    if (opts.userCode) {\n        config.setUserCode(opts.userCode);\n    }\n\n    if (opts.appCode) {\n        config.setAppCode(opts.appCode);\n    }\n\n    if (opts.rgCode) {\n        config.setRegionCode(opts.rgCode);\n    }\n\n    if (opts.token) {\n        config.setAuthToken(opts.token);\n    }\n\n    // 加载组件配置\n    func.getConfig().then( (data) => {\n        if(data) {\n            //console.log(\"config\", data);\n            config.setData(data);\n        }\n    })\n    \n}\n\nconst defaultInstallOptions = { useAntd: true };\nfunction install(vue: any, options: any) {\n\n    Vue.use(MintUI)\n    let opts = { ...defaultInstallOptions, ...options };\n\n    // // 审批\n    // vue.component('workflow-approve', WorkflowApprove);\n\n    // // 驳回\n    // vue.component('workflow-reject', WorkflowReject);\n\n    // // 已废弃\n    // vue.component('workflow-flow', WorkflowTraceSimple);\n\n    // 流程跟踪\n    // 简版\n    // vue.component('workflow-trace-simple', WorkflowTraceSimple);\n    // 全流程\n    vue.component('workflow-trace-full', WorkflowTraceFull);\n    // 基于表单\n    //vue.component('workflow-trace-form', WorkflowTraceForm);\n    // 跟踪列表\n    vue.component('workflow-trace-list', WorkflowTraceList);\n    vue.component('workflow-task-center', WorkflowTaskCenter);\n    // 流程图\n    //vue.component('workflow-trace-flowchart', WorkflowTraceFlowchart);\n}\n\nexport default { \n    install, \n\n    /**\n     * @param options\n     *      debug  （可选） 是否启用调试, 默认为false, 当启用时，在调试过程中会弹出错误提示\n    *       authToken  （可选） 如果用户请求接口需要token\n    *       userCode   （必填） 用户Code\n    *       flowModelerBaseUrl   （必填） 流程模型Modeler地址\n    *       flowProcessBaseUrl   （必填） 流程运行process地址\n    *       appCode   （必填） 应用编码\n    *       rgCode   （必填） 区划编码\n     */\n    config: setConfig,\n\n    /**\n     * 启动流程\n     */\n    start: func.startWorkflow,\n\n    /**\n     * 审批\n     * @param options {object}\n     *  {\n            taskId: 任务id,\n            procDefId:流程定义id,\n            nodeId: 节点id\n            businessKey: 单据id\n\n            businessKey: 单据id, 当有单据Id时，taskId,procDefId和nodeId可不传, 这时组件会根据businessKey查出所需的taskId, procdefId和nodeId\n\n            // 可修改弹窗文本\n            title: 标题文本\n\n            // 网关分支扩展变量\n            // 数组, 可以放多个变量\n            // object结构\n            //  {\n            //       type: 类型 string,integer,long,short,double,boolean,date,json\n            //       name: 变量名,\n            //       value: 值，根据type不同，值不同\n            //  }\n            // 如: [ { type: \"integer\", name: \"money\", value:  100 }]\n            variables: 表单变量集合\n\n            // 完成回调\n            // 完成后的回调\n            // ret\n            //    error: 错误标记，0: 没有错误\n            //                    1: 错误\n            //    message: 错误消息\n            onComplete: 完成回调,\n            onCancel: 取消回调\n        }\n     */\n    approve: func.approve,\n\n\n    /**\n     * 代办\n     * @param  options {object}\n     *      taskId: 任务id,\n            businessKey: 单据id, 当有单据Id时，taskId不传, 这时组件会根据businessKey查出所需的taskId\n\n            unitCode:单位Code, 在创建流程模型时所选,\n\n            // 可修改弹窗文本\n            title: 标题文本\n\n            isTextMessage: true | false 是否显示意见框, 默认为显示\n\n            // 完成回调\n            // 完成后的回调\n            // ret\n            //    error: 错误标记，0: 没有错误\n            //                    1: 错误\n            //    message: 错误消息\n            onComplete: 完成回调,\n            onCancel: 取消回调\n     */\n    delegate: func.delegate,\n\n\n    /**\n     * 转办\n    * @param  options {object}\n     *      taskId: 任务id,\n            businessKey: 单据id, 当有单据Id时，taskId不传, 这时组件会根据businessKey查出所需的taskId\n\n            unitCode:单位Code, 在创建流程模型时所选,\n\n            // 可修改弹窗文本\n            title: 标题文本\n\n            isTextMessage: true | false 是否显示意见框, 默认为显示\n\n            // 完成回调\n            // 完成后的回调\n            // ret\n            //    error: 错误标记，0: 没有错误\n            //                    1: 错误\n            //    message: 错误消息\n            onComplete: 完成回调,\n            onCancel: 取消回调\n     */\n    transfer: func.transfer,\n\n    /**\n     * 撤销\n     * \n     * @param  options {object}\n     *      taskId: 任务id,\n            procDefId:流程定义id,\n            nodeId: 节点id\n\n            businessKey: 单据id, 当有单据Id时，taskId,procDefId和nodeId可不传, 这时组件会根据businessKey查出所需的taskId, procdefId和nodeId\n\n            // 可修改弹窗文本\n            title: 标题文本\n\n            // 完成回调\n            // 完成后的回调\n            // ret\n            //    error: 错误标记，0: 没有错误\n            //                    1: 错误\n            //    message: 错误消息\n            onComplete: 完成回调,\n            onCancel: 取消回调\n     */\n    cancel: func.revoke,\n\n    /**\n     * 激活\n     */\n    activate: func.activateWorkflow,\n\n    /**\n     * 驳回\n     * @param  opiotns {object}\n     *      {\n                taskId: 任务id,\n                procDefId:流程定义id,\n                nodeId: 节点id\n\n                businessKey: 单据id, 当有单据Id时，taskId,procDefId和nodeId可不传, 这时组件会根据businessKey查出所需的taskId, procdefId和nodeId\n\n                // 可修改弹窗文本\n                title: 标题文本\n\n                // 完成回调\n                // 完成后的回调\n                // ret\n                //    error: 错误标记，0: 没有错误\n                //                    1: 错误\n                //    message: 错误消息\n                onComplete: 完成回调,\n                onCancel: 取消回调\n        }\n     */\n    back: func.back,\n\n    /**\n     * 批量送审\n     * @param options 送审数据集合\n        {\n        // 送审列表\n        list: [ {\n            taskId: 任务Id,\n            businessKey: 单据Id,\n            variables: [], 表单变量集合\n        }],\n            // 完成回调\n            // 完成后的回调\n            // ret\n            //    error: 错误标记，0: 没有错误\n            //                    1: 错误\n            //    message: 错误消息\n            onComplete: 完成回调\n        }\n     */\n    batchApprove: func.batchApprove,\n\n    /**\n     * 挂起流程\n     * @param options \n     *        businessKey 单据Id\n     */\n    suspend: func.suspendWorkflow,\n\n    /**\n     * 恢复挂起的流程\n     * @param options \n     *        businessKey 单据Id\n     */\n    resume: func.resumeWorkflow,\n\n    /**\n     * 直接送审\n     */\n    directApprove: func.directApprove,\n\n    /**\n     * 校验器\n     */\n    validator: {\n        canTaskCancel: func.canTaskRevoke,\n        isWorkflowStarted: validator.isWorkflowStarted,\n        isWorkflowEnded: validator.isWorkflowEnded,\n        isTaskDirectApprove: validator.isTaskDirectApprove\n    },\n\n    getWorkflowInfo: func.getWorkflowInfo,\n\n    /**\n     * 获取流程签章数据\n     * @param procInstId 流程实例Id\n     */\n    getSignData: func.getSignData,\n\n}","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\r\nimport * as service from \"../services\";\r\nimport { TabContainer, TabContainerItem, Toast } from 'mint-ui';\r\nimport * as utils from '../utils';\r\nimport BScroll from 'better-scroll'\r\nimport Search from '../components/search';\r\nimport Empty from '../components/empty';\r\nimport workflow from '../';\r\nimport moment from 'moment';\r\nimport './style.less'\r\n\r\n// declare function require(string): string;\r\n// const NoDataImage = require('../../assets/images/nodata.png');\r\n\r\n@Component({\r\n  components: {\r\n    'w-search': Search,\r\n    'w-empty': Empty\r\n  }\r\n})\r\nexport default class TodoContainer extends Vue {\r\n  @Prop({ default: 5 }) rows!: number;\r\n  @Prop({ default: '' }) userCode!: number;\r\n  @Prop({ default: '' }) roleId!: number;\r\n  @Prop({ default: '' }) name!: number;\r\n\r\n\r\n  todoTaskList:Array<any> = [];\r\n  isEmpty: boolean = false;\r\n  loading: boolean = false;\r\n  show: boolean = false;\r\n  showDown: boolean = false;\r\n  downMsg: string = '';\r\n  searchText: string = '';\r\n  page: number = 1;\r\n  async openUrl(url, businessKey, type) {\r\n    const arg: any = utils.parseQueryString(url);\r\n    if (arg.interfaceType && arg.interfaceType == 1) {\r\n      try {\r\n        const res = await service.advanceAsk(url, {\r\n          \"appType\": \"mobile\",\r\n          \"businessKey\": businessKey,\r\n          \"urlType\": type\r\n        })\r\n        this.$router.push({\r\n          path: res.url,\r\n          query: {\r\n            urlType: type,\r\n            bizTypeCode: res.bizTypeCode,\r\n            appCode: res.appCode,\r\n            procInstId: res.procInstId,\r\n            procDefId: res.procDefId,\r\n            businessKey: res.businessKey,\r\n            nodeId: res.nodeId,\r\n            taskId: res.taskId\r\n          }\r\n        })\r\n      } catch (e) {\r\n      }\r\n\r\n    } else {\r\n      try {\r\n        this.$router.push({ path: url })\r\n      } catch (e) {\r\n      }\r\n    }\r\n  }\r\n\r\n  mounted() {\r\n    this.loading = true\r\n    this.getTaskTodoList();\r\n    let scroll = new BScroll(this.$refs.taskContainer, {\r\n      scrollY: true,\r\n      click: true,\r\n      bounce: {\r\n        top: true,\r\n        bottom: true\r\n      },\r\n      pullDownRefresh: {\r\n        threshold: 30,\r\n        stop: 20,\r\n        fade: true\r\n      },\r\n      pullUpLoad: {\r\n        threshold: -50\r\n      }\r\n    })\r\n\r\n     // 下拉刷新\r\n     scroll.on('pullingDown', async () => {\r\n      this.page = 1;\r\n      this.loading = true;\r\n      // this.todoTaskList = [];\r\n      this.getTaskTodoList();\r\n      scroll.finishPullDown();\r\n      scroll.refresh();\r\n    })\r\n    scroll.on('pullingUp', async () => {\r\n      this.page = this.page + 1;\r\n      this.getTaskTodoList('upload');\r\n      this.showDown = false;\r\n      scroll.finishPullUp();\r\n    })\r\n\r\n    scroll.on('scroll', (pos) => {\r\n      if (document.body.clientHeight - (pos.y) - (this.$refs.pageContainer as any).clientHeight > 50) {\r\n        this.showDown = true;\r\n      }\r\n      // if (-document.body.clientHeight - (pos.y - 119) > 10) {\r\n        \r\n      // }\r\n    })\r\n  }\r\n\r\n  onSearch(v: string) {\r\n    this.loading = true;\r\n    this.searchText = v;\r\n    this.getTaskTodoList();\r\n  }\r\n\r\n  async getTaskTodoList(upload?: string) {\r\n    const taskTodoList = await service.getTaskTodoList({\r\n      page: this.page,\r\n      rows: this.rows,\r\n      userCode: this.userCode,\r\n      roleId: this.roleId,\r\n      name: this.searchText\r\n    });\r\n    if (upload === 'upload') {\r\n      this.todoTaskList.push(...utils.matchColor(taskTodoList.rows));\r\n    } else {\r\n      this.todoTaskList = utils.matchColor(taskTodoList.rows);\r\n      \r\n    }\r\n    this.isEmpty = taskTodoList.rows.length > 0 ? false : true;\r\n    this.loading = false;\r\n    this.showDown = false;\r\n  }\r\n\r\n  render(h: any) {\r\n    return <div>\r\n      <w-search value=\"haha\"\r\n      onSearch={(key) => this.onSearch(key)}>\r\n      </w-search>\r\n      {/* {\r\n        this.show &&\r\n        <div class=\"before-trigger\">\r\n          <span>{this.downMsg}</span> &nbsp;&nbsp; <i class=\"loading\"></i>\r\n        </div>\r\n      } */}\r\n      {\r\n      !this.isEmpty &&\r\n      <div class=\"workflow-page-infinite-list\" ref=\"taskContainer\" >\r\n      <div ref=\"pageContainer\">\r\n        <mt-tab-container class=\"page-container\" value=\"1\">\r\n          <mt-tab-container-item id=\"1\">\r\n          {\r\n            this.todoTaskList.map((val) => {\r\n              return <div class=\"workflow-task-content\" onClick={() => {\r\n                this.openUrl(val.url, val.businessKey, 'todo')\r\n              }}>\r\n                <div class=\"workflow-task-tit\">\r\n                  <span class=\"workflow-task-bizTypeName\" style={{ color: val.textColor, backgroundColor: val.bgColor }}>{val.bizTypeName}</span>\r\n                  <span class=\"workflow-task-code\">{val.field1}</span>\r\n\r\n                  <span class=\"workflow-task-time\">{moment(val.taskCreateTime, 'YYYY-MM-DD HH:mm:ss.S').format(\"YYYY-MM-DD HH:mm\")}</span>\r\n                </div>\r\n                <div class=\"workflow-task-middle\">\r\n                  <span class=\"workflow-task-peoples\">{val.field2}</span>\r\n                  <span class=\"workflow-task-departmentApprove\">{val.nodeName}</span>\r\n                </div>\r\n                <div class=\"workflow-task-bottom\">\r\n                  <span class=\"workflow-task-department\">{val.field3}</span>\r\n                  <span class=\"workflow-task-price\">{val.field4}</span>\r\n                </div>\r\n                <div class=\"workflow-task-reason\"><span>{val.field5}</span></div>\r\n                <div class=\"workflow-operation\">\r\n                  <mt-button class=\"workflow-argeen\" size=\"normal\" type=\"primary\" plain onClick={(e)=>this.approve(e, val)}>同意</mt-button>\r\n                  <mt-button class=\"workflow-reject\" size=\"normal\" plain onClick={(e) => this.back(e, val)}>驳回</mt-button>\r\n                </div>\r\n              </div>\r\n            })\r\n          }\r\n            <p>\r\n            {\r\n              this.showDown &&\r\n              <div class=\"before-trigger\">\r\n                <span>加载中</span> &nbsp;&nbsp; <i class=\"workflow-loading\"></i>\r\n              </div>\r\n            }\r\n          </p>\r\n          </mt-tab-container-item>\r\n        </mt-tab-container>\r\n      </div>\r\n      </div>\r\n      }\r\n\r\n      {\r\n        this.isEmpty &&\r\n        <div class=\"workflow-noInfo\">\r\n          <w-empty></w-empty>\r\n        </div>\r\n      }\r\n\r\n      {\r\n        this.loading &&\r\n        <p class=\"workflow-page-infinite-loading\">\r\n          <mt-spinner type=\"fading-circle\"></mt-spinner>\r\n          加载中...\r\n        </p>\r\n      }\r\n    </div>\r\n  }\r\n  \r\n  private async approve(e:any, record:any) {\r\n    e.stopPropagation();\r\n    let variables = await service.getCenterTaskVariables({\r\n      procInstId: record.procInstId\r\n    })\r\n    let data: any = {\r\n      businessKey: record.businessKey,\r\n      procDefId: record.procDefId || '',\r\n      nodeId: record.nodeId || '',\r\n      taskId: record.taskId || ''\r\n    }\r\n    let options = {\r\n      title: '审批',\r\n      ...data,\r\n      variables,\r\n      deptCode: '',\r\n      signType: 'ca',\r\n      bizExtra: {\r\n        bizTitle: record.title || '',\r\n        bizUrl: record.url || ''\r\n      },\r\n      onComplete: (ret) => {\r\n        if (ret.error) {\r\n          Toast(ret.message);\r\n          return;\r\n        }\r\n        this.getTaskTodoList();\r\n      },\r\n      onCancel: () => {\r\n        // do nothing\r\n      }\r\n    }\r\n    workflow.approve(options);\r\n  }\r\n\r\n  private async  back (e:any, record:any) {\r\n    e.stopPropagation();\r\n     let variables = await service.getCenterTaskVariables({\r\n      procInstId: record.procInstId\r\n     })\r\n      let data: any = {\r\n        procInstId: record.procInstId || '',\r\n        procDefId: record.procDefId || '',\r\n        nodeId: record.nodeId || '',\r\n        taskId: record.taskId || '',\r\n        bizExtra: {\r\n          bizTitle: record.title || '',\r\n          bizUrl: record.url || ''\r\n        },\r\n        variables \r\n      }\r\n      let options: any = {\r\n        title: '收回',\r\n        ...data,\r\n        onComplete: (ret) => {\r\n          console.log(\"back complete\", ret);\r\n          if (ret.error) {\r\n            Toast(ret.message);\r\n            return;\r\n          }\r\n          this.getTaskTodoList();\r\n        },\r\n        onCancel: () => {\r\n          // do nothing\r\n        }\r\n      }\r\n      workflow.back(options)\r\n    }\r\n  }","import { Component, Prop, Vue, Emit, Watch } from \"vue-property-decorator\";\r\nimport * as service from \"../services\";\r\nimport { TabItem, Navbar } from 'mint-ui';\r\nimport {EventBus} from './bus';\r\nimport './style.less'\r\n\r\n@Component({\r\n  components: {\r\n\r\n  }\r\n})\r\nexport default class Nav extends Vue {\r\n    @Prop({default: []}) navLabels!: Array<any>;\r\n    @Prop({default: '1'}) selected!: string;\r\n\r\n    @Emit('change')\r\n    change(val) {\r\n        EventBus.$emit('changeSelected', val)\r\n    }\r\n\r\n    render(h: any) {\r\n        return <div class=\"workflow-nav-container-wrapper\">\r\n                    <mt-navbar class=\"nav-bar-container\" value={this.selected} onInput={this.change}>\r\n                    {\r\n                        this.navLabels.map((val)=><mt-tab-item key={val.id} id={val.id}>{val.label}</mt-tab-item>)\r\n                    }\r\n                    </mt-navbar>\r\n                </div>\r\n    }\r\n}\r\n","import { Component, Prop, Vue, Emit } from \"vue-property-decorator\";\r\nimport { Header } from 'mint-ui';\r\nimport './style.less'\r\n\r\n@Component({\r\n  components: {\r\n\r\n  }\r\n})\r\nexport default class TaskHeader extends Vue {\r\n  @Prop({default: ''}) headerTit!: string;\r\n  @Prop({default: ''}) backNodePath!: string;\r\n\r\n  @Emit('back')\r\n  back() {\r\n    //this.$router.push({ path: this.backNodePath});\r\n  }\r\n  render(h: any) {\r\n    return <mt-header title={this.headerTit} isLink={true} >\r\n                <mt-button slot=\"left\" icon=\"back\" onClick={this.back}>返回</mt-button>\r\n                {/* <mt-button slot=\"right\"></mt-button> */}\r\n            </mt-header>\r\n  }\r\n}\r\n","import { Component, Vue, Prop, Emit } from 'vue-property-decorator';\r\nimport { Toast, CellSwipe, Spinner } from 'mint-ui';\r\nimport * as service from \"../services\";\r\nimport * as utils from '../utils';\r\nimport {EventBus} from './bus';\r\n\r\nimport DoneContainer from '../task-center/done-container';\r\nimport TodoContainer from '../task-center/todo-container';\r\n\r\nimport Nav from '../task-center/nav';\r\nimport TaskHeader from '../task-center/header';\r\n\r\ndeclare function require(string): string;\r\nconst NoDataImage = require('../../assets/images/nodata.png');\r\n\r\nVue.component('w-todo-container', TodoContainer)\r\nVue.component('w-done-container', DoneContainer)\r\nVue.component('w-nav', Nav)\r\nVue.component('w-header', TaskHeader)\r\n\r\nconst TaskCenterLabels = [\r\n  {\r\n    id: '1',\r\n    label: '待办'\r\n  },\r\n  {\r\n    id: '2',\r\n    label: '已办'\r\n  }\r\n]\r\n\r\n@Component\r\nexport default class TaskCenter extends Vue {\r\n  isEmpty: boolean = false;\r\n  screenVisible: boolean = false;\r\n  loading: boolean = false;\r\n  headerTit: string = '任务中心';\r\n  navLabels: Array<any> = TaskCenterLabels;\r\n  selected: string = '1';\r\n  backNodePath: string = '';\r\n  rows: number = 5;\r\n  page: number = 1;\r\n  name: string = '';\r\n  todoTaskList: any = [];\r\n  doneTaskList: any = [];\r\n  searchText: string = '';\r\n  userCode: string = '';\r\n  roleId: string = '';\r\n  \r\n  @Emit('back')\r\n  back() {\r\n  }\r\n  \r\n  async mounted() {\r\n    let commonData = localStorage.getItem(\"commonData\");\r\n    if (commonData != null) {\r\n      try {\r\n        let commonDataObj = JSON.parse(commonData);\r\n        this.userCode = utils.decodeBase64(commonDataObj['svUserCode']);\r\n        this.roleId = utils.decodeBase64(commonDataObj['svRoleId']);\r\n      } catch (e) {\r\n\r\n      }\r\n    }\r\n    EventBus.$on('changeSelected', async (value) => {\r\n      this.selected = value;\r\n    })\r\n  }\r\n  render(h: any) {\r\n    return <div class=\"workflow workflow-taskcenter\" >\r\n      \r\n      <w-header headerTit={this.headerTit} onBack={this.back} backNodePath={this.backNodePath}></w-header>\r\n\r\n      <w-nav\r\n        selected={this.selected}\r\n        navLabels={this.navLabels}\r\n      ></w-nav>\r\n\r\n      <div>\r\n        {\r\n          this.selected == '1' &&\r\n          <div>\r\n            <w-todo-container \r\n            todoTaskList={this.todoTaskList}\r\n            page={this.page}\r\n            rows={this.rows}\r\n            userCode={this.userCode}\r\n            roleId={this.roleId}\r\n            name={this.searchText}\r\n            />\r\n          </div>\r\n        }\r\n        {\r\n          this.selected == '2' &&\r\n          <div>\r\n            <w-done-container \r\n            doneTaskList={this.doneTaskList}\r\n            page={this.page}\r\n            rows={this.rows}\r\n            userCode={this.userCode}\r\n            roleId={this.roleId}\r\n            name={this.searchText}\r\n            />\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","import Vue from 'vue';\nimport WorkflowApprove from './workflow-approve';\nimport WorkflowReject from './workflow-reject';\n//import WorkflowTraceSimple from './workflow-trace/workflow-trace-simple';\nimport WorkflowTraceFull from './workflow-trace/workflow-trace-full';\n//import WorkflowTraceForm from './workflow-trace/workflow-trace-form';\nimport WorkflowTraceList from './workflow-trace/workflow-trace-list';\n//import WorkflowTraceFlowchart from './workflow-trace/workflow-trace-flowchart';\nimport WorkflowTaskCenter from './task-center';\nimport api from './services/api';\nimport * as func from './workflow-func';\nimport * as validator from './validator';\nimport { error } from './utils';\n\nimport { check } from './utils';\n\nimport config from './services/config';\nimport MintUI from 'mint-ui';\n//import 'mint-ui/lib/style.css';\n\n\n// import {\n//     Affix,\n//     Anchor,\n//     AutoComplete,\n//     Alert,\n//     Avatar,\n//     BackTop,\n//     Badge,\n//     Breadcrumb,\n//     Button,\n//     Calendar,\n//     Card,\n//     Collapse,\n//     Carousel,\n//     Cascader,\n//     Checkbox,\n//     Col,\n//     DatePicker,\n//     Divider,\n//     Dropdown,\n//     Form,\n//     Icon,\n//     Input,\n//     InputNumber,\n//     Layout,\n//     List,\n//     LocaleProvider,\n//     message,\n//     Menu,\n//     Modal,\n//     notification,\n//     Pagination,\n//     Popconfirm,\n//     Popover,\n//     Progress,\n//     Radio,\n//     Rate,\n//     Row,\n//     Select,\n//     Slider,\n//     Spin,\n//     Steps,\n//     Switch,\n//     Table,\n//     Transfer,\n//     Tree,\n//     TreeSelect,\n//     Tabs,\n//     Tag,\n//     TimePicker,\n//     Timeline,\n//     Tooltip,\n//     Upload,\n//     Drawer,\n//     Skeleton,\n// } from 'ant-design-vue';\n\nexport * from './models';\nexport * from './workflow-func';\nexport { WorkflowApprove, WorkflowReject };\n//export { reject, canTaskRevoke, revoke, startWorkflow };\n\n/**\n * 默认选项参数\n */\nconst defaultOptions = {\n    debug: false,\n};\n\n/**\n * 配置工作流\n * @param options \n *       debug  （可选） 是否启用调试, 默认为false, 当启用时，在调试过程中会弹出错误提示\n *       authToken  （可选） 如果用户请求接口需要token\n *       userCode   （必填） 用户Code\n *       flowModelerBaseUrl   （必填） 流程模型Modeler地址\n *       flowProcessBaseUrl   （必填） 流程运行process地址\n *       appCode   （必填） 应用编码\n *       rgCode   （必填） 区划编码\n */\nfunction setConfig(options: any) {\n    console.log(\"config\", options);\n    let opts = { ...defaultOptions, ...options };\n    config.setDebug(opts.debug);\n    if (!check(\"workflow.config\", ['userCode', 'appCode', 'rgCode', 'flowModelerBaseUrl', 'flowProcessBaseUrl'], opts)) {\n        return;\n    }\n    api.onError((url: string, e: any) => {\n        let m = e.message;\n        if (e.code) {\n            m = `${e.code}:${e.msg}`;\n            \n        }\n\n        if (opts.debug) {\n            m += ` ${url} `;\n        }\n        error(m);\n    })\n    // if (opts.debug) {\n\n    // }\n    config.setBaseAddress(opts.flowModelerBaseUrl, opts.flowProcessBaseUrl);\n\n    if (opts.userCode) {\n        config.setUserCode(opts.userCode);\n    }\n\n    if (opts.appCode) {\n        config.setAppCode(opts.appCode);\n    }\n\n    if (opts.rgCode) {\n        config.setRegionCode(opts.rgCode);\n    }\n\n    if (opts.token) {\n        config.setAuthToken(opts.token);\n    }\n\n    // 加载组件配置\n    func.getConfig().then( (data) => {\n        if(data) {\n            //console.log(\"config\", data);\n            config.setData(data);\n        }\n    })\n    \n}\n\nconst defaultInstallOptions = { useAntd: true };\nfunction install(vue: any, options: any) {\n\n    Vue.use(MintUI)\n    let opts = { ...defaultInstallOptions, ...options };\n\n    // // 审批\n    // vue.component('workflow-approve', WorkflowApprove);\n\n    // // 驳回\n    // vue.component('workflow-reject', WorkflowReject);\n\n    // // 已废弃\n    // vue.component('workflow-flow', WorkflowTraceSimple);\n\n    // 流程跟踪\n    // 简版\n    // vue.component('workflow-trace-simple', WorkflowTraceSimple);\n    // 全流程\n    vue.component('workflow-trace-full', WorkflowTraceFull);\n    // 基于表单\n    //vue.component('workflow-trace-form', WorkflowTraceForm);\n    // 跟踪列表\n    vue.component('workflow-trace-list', WorkflowTraceList);\n    vue.component('workflow-task-center', WorkflowTaskCenter);\n    // 流程图\n    //vue.component('workflow-trace-flowchart', WorkflowTraceFlowchart);\n}\n\nexport default { \n    install, \n\n    /**\n     * @param options\n     *      debug  （可选） 是否启用调试, 默认为false, 当启用时，在调试过程中会弹出错误提示\n    *       authToken  （可选） 如果用户请求接口需要token\n    *       userCode   （必填） 用户Code\n    *       flowModelerBaseUrl   （必填） 流程模型Modeler地址\n    *       flowProcessBaseUrl   （必填） 流程运行process地址\n    *       appCode   （必填） 应用编码\n    *       rgCode   （必填） 区划编码\n     */\n    config: setConfig,\n\n    /**\n     * 启动流程\n     */\n    start: func.startWorkflow,\n\n    /**\n     * 审批\n     * @param options {object}\n     *  {\n            taskId: 任务id,\n            procDefId:流程定义id,\n            nodeId: 节点id\n            businessKey: 单据id\n\n            businessKey: 单据id, 当有单据Id时，taskId,procDefId和nodeId可不传, 这时组件会根据businessKey查出所需的taskId, procdefId和nodeId\n\n            // 可修改弹窗文本\n            title: 标题文本\n\n            // 网关分支扩展变量\n            // 数组, 可以放多个变量\n            // object结构\n            //  {\n            //       type: 类型 string,integer,long,short,double,boolean,date,json\n            //       name: 变量名,\n            //       value: 值，根据type不同，值不同\n            //  }\n            // 如: [ { type: \"integer\", name: \"money\", value:  100 }]\n            variables: 表单变量集合\n\n            // 完成回调\n            // 完成后的回调\n            // ret\n            //    error: 错误标记，0: 没有错误\n            //                    1: 错误\n            //    message: 错误消息\n            onComplete: 完成回调,\n            onCancel: 取消回调\n        }\n     */\n    approve: func.approve,\n\n\n    /**\n     * 代办\n     * @param  options {object}\n     *      taskId: 任务id,\n            businessKey: 单据id, 当有单据Id时，taskId不传, 这时组件会根据businessKey查出所需的taskId\n\n            unitCode:单位Code, 在创建流程模型时所选,\n\n            // 可修改弹窗文本\n            title: 标题文本\n\n            isTextMessage: true | false 是否显示意见框, 默认为显示\n\n            // 完成回调\n            // 完成后的回调\n            // ret\n            //    error: 错误标记，0: 没有错误\n            //                    1: 错误\n            //    message: 错误消息\n            onComplete: 完成回调,\n            onCancel: 取消回调\n     */\n    delegate: func.delegate,\n\n\n    /**\n     * 转办\n    * @param  options {object}\n     *      taskId: 任务id,\n            businessKey: 单据id, 当有单据Id时，taskId不传, 这时组件会根据businessKey查出所需的taskId\n\n            unitCode:单位Code, 在创建流程模型时所选,\n\n            // 可修改弹窗文本\n            title: 标题文本\n\n            isTextMessage: true | false 是否显示意见框, 默认为显示\n\n            // 完成回调\n            // 完成后的回调\n            // ret\n            //    error: 错误标记，0: 没有错误\n            //                    1: 错误\n            //    message: 错误消息\n            onComplete: 完成回调,\n            onCancel: 取消回调\n     */\n    transfer: func.transfer,\n\n    /**\n     * 撤销\n     * \n     * @param  options {object}\n     *      taskId: 任务id,\n            procDefId:流程定义id,\n            nodeId: 节点id\n\n            businessKey: 单据id, 当有单据Id时，taskId,procDefId和nodeId可不传, 这时组件会根据businessKey查出所需的taskId, procdefId和nodeId\n\n            // 可修改弹窗文本\n            title: 标题文本\n\n            // 完成回调\n            // 完成后的回调\n            // ret\n            //    error: 错误标记，0: 没有错误\n            //                    1: 错误\n            //    message: 错误消息\n            onComplete: 完成回调,\n            onCancel: 取消回调\n     */\n    cancel: func.revoke,\n\n    /**\n     * 激活\n     */\n    activate: func.activateWorkflow,\n\n    /**\n     * 驳回\n     * @param  opiotns {object}\n     *      {\n                taskId: 任务id,\n                procDefId:流程定义id,\n                nodeId: 节点id\n\n                businessKey: 单据id, 当有单据Id时，taskId,procDefId和nodeId可不传, 这时组件会根据businessKey查出所需的taskId, procdefId和nodeId\n\n                // 可修改弹窗文本\n                title: 标题文本\n\n                // 完成回调\n                // 完成后的回调\n                // ret\n                //    error: 错误标记，0: 没有错误\n                //                    1: 错误\n                //    message: 错误消息\n                onComplete: 完成回调,\n                onCancel: 取消回调\n        }\n     */\n    back: func.back,\n\n    /**\n     * 批量送审\n     * @param options 送审数据集合\n        {\n        // 送审列表\n        list: [ {\n            taskId: 任务Id,\n            businessKey: 单据Id,\n            variables: [], 表单变量集合\n        }],\n            // 完成回调\n            // 完成后的回调\n            // ret\n            //    error: 错误标记，0: 没有错误\n            //                    1: 错误\n            //    message: 错误消息\n            onComplete: 完成回调\n        }\n     */\n    batchApprove: func.batchApprove,\n\n    /**\n     * 挂起流程\n     * @param options \n     *        businessKey 单据Id\n     */\n    suspend: func.suspendWorkflow,\n\n    /**\n     * 恢复挂起的流程\n     * @param options \n     *        businessKey 单据Id\n     */\n    resume: func.resumeWorkflow,\n\n    /**\n     * 直接送审\n     */\n    directApprove: func.directApprove,\n\n    /**\n     * 校验器\n     */\n    validator: {\n        canTaskCancel: func.canTaskRevoke,\n        isWorkflowStarted: validator.isWorkflowStarted,\n        isWorkflowEnded: validator.isWorkflowEnded,\n        isTaskDirectApprove: validator.isTaskDirectApprove\n    },\n\n    getWorkflowInfo: func.getWorkflowInfo,\n\n    /**\n     * 获取流程签章数据\n     * @param procInstId 流程实例Id\n     */\n    getSignData: func.getSignData,\n\n}"],"names":["address","modeler_base","flow_process_base","getModelerBase","console","log","getFlowCenterBase","Object","Config","_userCode","_appCode","_rgCode","_authToken","_debug","businessKey","taskId","id","procInstId","procDefId","tasids","flowModelerBaseUrl","flowProcessBaseUrl","code","token","debug","key","keys","split","data","_data","keys_1","_i","k","undefined","url","e","Api","cb","_beforeRequest","_afterRequest","_onError","config","authToken","axios","defaults","headers","common","post","delete","then","resp","_this","catch","err","json","throwWhenError","get","params","status","isWorkflowStarted","api","WORKFLOW_IS_STARTED_URL","isWorkflowEnded","WORKFLOW_IS_ENDED_URL","getWorkflowInfo","WORKFLOW_INFO","userCode","startWorkflow","req","WORKFLOW_START_URL","suspendWorkflow","WORKFLOW_SUSPEND_URL","resumeWorkflow","WORKFLOW_RESUME_URL","getNodeInfo","NODE_INFO_URL","getFirstNodeInfo","getFirstNodeInfoUrl","getNodeNextSteps","NODE_STEPS_URL","getNodeCancelStartNodes","NODE_CANCEL_START_URL","getNodeParticipantTypes","NODE_TYPES_URL","getParticipantCatalog","NODE_CATALOG_URL","getParticipantList","NODE_USER_LIST_URL","getWorkflowTraceFullData","getNodeTraceFullUrl","variables","getWorkflowTraceListData","getNodeTraceListUrl","sort","approveByTaskId","APPROVE_BY_TASKID_URL","approveByBusinessKey","APPROVE_BY_BUSSINESSKEY_URL","getBackNodeInfo","NODE_BACK_NODE_INFO_URL","getAvaliableBackNodeList","NODE_BACK_NODE_LIST_URL","cancel","getNodeCancelActionUrl","cancelByBusinessKey","getNodeCancelActionWithBusinessKeyUrl","back","getNodeBackActionUrl","canTaskRevokeByBusinessKey","NODE_CAN_REVOKE_BUSINESSKEY_URL","getTasks","WORKFLOW_TASKS_URL","getUserInfoList","WORKFLOW_USER_INFO_LIST_URL","appCode","rgCode","activateWorkflow","WORKFLOW_ACTIVATE_URL","batchApprove","taskIds","WORKFLOW_BATCH_APPROVE_URL","directApproveByTaskId","WORKFLOW_DIRECT_APPROVE_TASKID_URL","isTaskDirectApprove","WORKFLOW_IS_DIRECT_APPROVE_URL","getAdminConfig","getOld","WORKFLOW_ADMIN_CONFIG_URL","_a","getRoleInfoListByUrl","platAdapterBaseUrl","getTaskDelegateUsers","WORKFLOW_USER_DELEGATE_URL","getRemarkList","WORKFLOW_REMARK_LIST_URL","saveRemark","WORKFLOW_REMARK_SAVE_URL","isRemarkDup","WORKFLOW_IS_REMARK_DUP_URL","starRemark","WORKFLOW_REMARK_STAR_URL","formatMillonSecondsToDays","millonSeconds","days","Math","round","intPart","parseInt","toString","decimalPart","check","name","arr","input","errCount","forEach","v","error","push","join","checkOr","arr1","arr2","errCount1","errCount2","params1","params2","checkTriple","arr3","errCount3","message","foreShowing","MessageBox","getConfig","options","defaultOptions","mergeOptions","service","info","opt","nodeId","buildTreeNode","list","filter","temp","tree","i","value","title","pId","children","hit_1","o","hitted","indexOf","length","getErrorInfo","ret","msg","response","decodeBase64","str","Base64","decode","parseQueryString","obj","val","colorArr","textColor","bgColor","matchColor","newData","m","map","res","bizTypeCode","findIndex","item","getUnits","unitCode","WORKFLOW_UNITS_URL","getOrgs","containUnit","WORKFLOW_DEPTS_URL","getOrgUsers","type","pageNum","pageSize","WORKFLOW_DEPT_USERS_URL","saveSignData","SIGN_SAVE_URL","getSignList","SIGN_QUERY_URL","getJson","WORKFLOW_GLOBAL_CONFIG_URL","Date","now","getApproveElementsList","APPROVE_ELEMENTS_QUERY_URL","getTaskTodoList","TASK_TODO_LIST_URL","getTaskDoneList","process","env","NODE_ENV","TASK_DONE_LIST_URL","advanceAsk","getCenterTaskVariables","TASK_CENTER_VARIABLES_REQUEST","FbpmStatus","TaskState","ApproveFlows","__extends","Icon","h","primary","__decorate","Prop","Component","Vue","Empty","height","default","components","functional","render","ctx","props","vnode","loading","Boolean","finished","Array","required","wrapperHeight","hasMore","mounted","wrapper","$refs","document","documentElement","clientHeight","getBoundingClientRect","top","methods","loadMore","setTimeout","$emit","onChange","option","selected","target","checked","values","List","source","dataSource","change","label","Emit","Search","text","placeholder","enter","onInput","onSearch","PAGE_SIZE","Map","SelectUsers","users","selectedUsers","selectedNodeId","nextIsPreemptMode","nextNodeIsMultiple","extra","steps","_c","node","selectedNodeName","nodeName","isPreemptMode","isMultiinstance","_b","creatorCode","types","handleTypeChange","visible","isNextStepsPopup","isParticipantTypePopup","catalog","isParticipantCatalogPopup","renderUserNames","isUsersPopup","Toast","ok","okText","onNodeStepChange","step","catalogList","searchText","userList","loadingUserList","loadAllFinished","u","userName","unitName","deptName","Promise","resolve","reject","currentPage","pageTotal","searchUserList","includes","selectedUsersInPopup","substr","nodeDataMap","set","find","n","t","replace","param","rows","total","page","Checklist","Sep","REMARK_TYPE","Message","approveText","getData","isRemarkPopup","onInputChange","saveAsRemark","comLang","remarks","remark","size","Elements","elements","elementName","isRequired","Confirm","flow","flows","ApproveElements","move","element","index","Messge","Users","getUsersName","WorkflowApprove","oldVal","reinit","saveBusying","openLoading","assignee","assigneeName","assigneeType","sel","nextNodeId","nextUsers","isNextPreemptMode","isNextNodeMultiple","opts","approveFirstNode","checkApproveElements","action","signObject","deptCode","assignments","assignment","processDefinitionId","utils","e_1","closeLoading","menuId","approve","bizTitle","bizUrl","bizExtra","isCheckUsers","e_2","emptyText","Indicator","open","spinnerType","close","onComplete","mode","approveFlow","allowedFlows","isAllowedUsers","user","splice","onSelected","isBackFromConfirm","next","Watch","NodeType","Prev","First","Any","WorkflowReject","reload","buttonBusying","backType","nodeType","isReject","backNode","currentActivityIds","targetActivityIds","loadingNodeList","nodes","backNodeName","isNodeTypePopup","onOk","isNodeListPopup","loadNodeList","nodeTypes","Step","description","icon","Steps","$slots","MAX_USER_COUNT","ServerTaskStateMapping","Submitted","Process","Approved","Back","NotStart","Cancel","defaultLocale","submitted","submitting","approved","dateTimeFormat","dataIndex","width","align","customRender","record","renderElement","WorkflowTraceFull","adminConfig","hiddenCancelNodes","getSteps","loadUserNames","loadSignData","loadApproveElements","querySelector","focus","userInfo","isUserInfoPopup","elementsInfo","isElementsPopup","state","getTaskState","locale","Submitting","none","Backed","showElementsInfo","tasks","roleId","taskCount","maxUserCount","more","slice","showUserInfo","roleName","renderTaskStateText","signImage","isMessagePrefix","endTime","moment","format","duration","css","direction","renderStepIcon","actType","Number","renderState","renderTitle","renderTasks","phone","mail","tel","isFirstNode","isFirstNodeFound","firstNodeId","steps_1","roleIds","userCodes","isSkipped","_e","_d","task","userIds","roles","ids","names","delegateUserNameMap","this_1","showDelegatedUserName","delegatedUsers","reduce","prev","cur","delegatedUserCode","delegatedUserInfos","delegateUser","delegateUserCode","showRoleName","platform","baseUrl","role","data_1","signList","signMap","signList_1","sign","steps_2","has","elementsMap","steps_3","WorkflowTraceList","updateUserNames","columns","serverTaskState","count","tasks_1","userInfoList","userMap","userInfoList_1","tasks_2","EventBus","DoneContainer","arg","interfaceType","$router","path","query","urlType","scroll","BScroll","taskContainer","scrollY","click","bounce","bottom","pullDownRefresh","threshold","stop","fade","pullUpLoad","on","doneTaskList","finishPullDown","refresh","showDown","finishPullUp","pos","body","y","pageContainer","upload","taskDoneList","isEmpty","openUrl","color","backgroundColor","bizTypeName","field1","taskEndTime","field2","field3","field4","field5","getTaskCssName","retName","WorkflowBatchApprove","signType","signRequired","taskFormRequests","flag","WorkflowDelegate","currentUsers","units","defaultUnit","orgs","defaultOrgId","defaultOrgType","$attrs","selectDeptTreeNode","selectedRowKeys","selectedRows","unselectedKeys","row","isTextMessage","userTotal","userPage","showTreeNode","defaultStartOptions","isStarted","div_1","createElement","el_1","appendChild","destry_1","approveInstance_1","$destroy","parentNode","removeChild","el","onCancel","startConfig","selectResult","config_1","isFirstUserTaskNode","approveTask","div_2","el_2","destry_2","approveInstance_2","approveConfig","approveResult","delegate","div_3","el_3","destry_3","instance_1","config_2","result","transfer","div_4","el_4","destry_4","instance_2","config_3","canTaskRevoke","permitCancel","revoke","e_3","e_4","div_5","el_5","destry_5","backInstance_1","config_4","getWorkflowTasks","div_6","el_6","destry_6","approveInstance_3","e_5","directApprove","isDirectTask","isBackTask","e_6","e_7","e_8","getSignData","services","setConfig","setDebug","onError","setBaseAddress","setUserCode","setAppCode","setRegionCode","setAuthToken","func","setData","defaultInstallOptions","useAntd","install","vue","use","MintUI","component","WorkflowTaskCenter","start","activate","suspend","resume","validator","canTaskCancel","TodoContainer","taskTodoList","todoTaskList","taskCreateTime","stopPropagation","workflow","Nav","navLabels","TaskHeader","headerTit","NoDataImage","require","TaskCenterLabels","TaskCenter","commonData","localStorage","getItem","commonDataObj","JSON","parse","$on","backNodePath"],"mappings":"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"}